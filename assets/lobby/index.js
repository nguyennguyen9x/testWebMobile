window.__require=function e(t,n,r){function o(s,a){if(!n[s]){if(!t[s]){var c=s.split("/");if(c=c[c.length-1],!t[c]){var l="function"==typeof __require&&__require;if(!a&&l)return l(c,!0);if(i)return i(c,!0);throw new Error("Cannot find module '"+s+"'")}s=c}var u=n[s]={exports:{}};t[s][0].call(u.exports,function(e){return o(t[s][1][e]||e)},u,u.exports,e,t,n,r)}return n[s].exports}for(var i="function"==typeof __require&&__require,s=0;s<r.length;s++)o(r[s]);return o}({AlertDialog:[function(e,t,n){"use strict";cc._RF.push(t,"5cd59x81XlLD5onPnBvqwTL","AlertDialog");var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});const o=e("./BaseDialog"),{ccclass:i,property:s}=cc._decorator;let a=class extends o.default{constructor(){super(...arguments),this.lbMessage=null,this.onClosed=null}showMessage(e,t=null){this.lbMessage.string=e,this.onClosed=t,this.show()}_onClosed(){super._onClosed(),this.onClosed&&this.onClosed()}};r([s(cc.Label)],a.prototype,"lbMessage",void 0),a=r([i],a),n.default=a,cc._RF.pop()},{"./BaseDialog":"BaseDialog"}],AudioController:[function(e,t,n){"use strict";cc._RF.push(t,"9a972VcbjRDCLK+MeHAjnBo","AudioController");var r,o=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});const i=e("../common/Broadcast"),s=e("../common/SPUtils"),{ccclass:a,property:c}=cc._decorator;let l=r=class extends cc.Component{constructor(){super(...arguments),this.audioSource=null,this.isOnSound=!0,this.isOnMusic=!0}static getInstance(){return this.instance}onLoad(){null==r.instance?(this.audioSource=this.node.addComponent(cc.AudioSource),r.instance=this,cc.game.addPersistRootNode(r.instance.node)):this.node.destroy()}start(){i.Broadcast.register(i.Broadcast.AUDIO_CHANGED,()=>{this.isOnSound=s.default.getSound(),this.isOnMusic=s.default.getMusic(),this.audioSource.mute=!this.isOnMusic},this),this.isOnSound=s.default.getSound(),this.isOnMusic=s.default.getMusic(),this.audioSource.mute=!this.isOnMusic}playEffect(e,t=1){null!=e?this.isOnSound&&t>0&&cc.audioEngine.play(e,!1,t):cc.warn("PlayEffect audioClip is null")}playMusic(e,t=!0,n=1){null!=e?(this.audioSource.stop(),this.audioSource.clip=e,this.audioSource.volume=n,this.audioSource.mute=!this.isOnMusic,this.audioSource.loop=t,this.audioSource.play()):cc.warn("PlayMusic audioClip is null")}pauseAudio(){this.audioSource.stop(),cc.audioEngine.pauseMusic(),cc.audioEngine.pauseAllEffects()}resumeAudio(){this.audioSource.play(),cc.audioEngine.resumeMusic(),cc.audioEngine.resumeAllEffects()}};l.instance=null,l=r=o([a],l),n.default=l,cc._RF.pop()},{"../common/Broadcast":"Broadcast","../common/SPUtils":"SPUtils"}],BackgroundResizer:[function(e,t,n){"use strict";cc._RF.push(t,"70638o04DFBBpJfEgrrHzje","BackgroundResizer");var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});const{ccclass:o,property:i}=cc._decorator;let s=class extends cc.Component{constructor(){super(...arguments),this.designResolution=new cc.Size(1280,720),this.lastWitdh=0,this.lastHeight=0}start(){this.updateSize()}update(e){cc.sys.isBrowser&&this.updateSize()}updateSize(){var e=cc.view.getFrameSize();if(this.lastWitdh!==e.width||this.lastHeight!==e.height)if(this.lastWitdh=e.width,this.lastHeight=e.height,this.designResolution.width/this.designResolution.height>e.width/e.height){var t=(r=this.designResolution.width*e.height/e.width)*this.designResolution.width/this.designResolution.height,n=cc.size(t,r);this.node.setContentSize(n)}else{var r=(t=this.designResolution.height*e.width/e.height)*this.designResolution.height/this.designResolution.width;n=cc.size(t,r),n=cc.size(t,r),this.node.setContentSize(n)}}};r([i],s.prototype,"designResolution",void 0),s=r([o],s),n.default=s,cc._RF.pop()},{}],BankDialog:[function(e,t,n){"use strict";cc._RF.push(t,"101eeYlmaFGeoqXUnoXd+2V","BankDialog");var r,o=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});const i=e("../../common/ConfigClient"),s=e("../../common/Utils"),a=e("../../common/User"),c=e("../../dialogs/sendgift/SendGiftDialog"),l=e("../../network/NetworkClient"),u=e("../../common/GlobalApp"),d=e("../../common/BaseDialog"),h=e("../../common/Broadcast");var f;(function(e){e[e.DEPOSIT=0]="DEPOSIT",e[e.WITH_DRAW=1]="WITH_DRAW"})(f||(f={}));const{ccclass:p,property:g}=cc._decorator;let m=r=class extends d.default{constructor(){super(...arguments),this.bankContent=null,this.bankInput=null,this.bankHistory=null,this.lbAccountChip=null,this.lbBankChip=null,this.edbChips=null,this.historyScrollView=null,this.historyItem=null,this.limit=20,this.cursor=""}static getInstance(){return this.instance}static show(){null==this.instance||null==this.instance.node?u.default.getInstance().loadPrefabByMainBundle("res/prefabs/dialogs/BankDialog",(e,t)=>{if(null!=e)return void u.default.getInstance().alertDialog.showMessage(e);let n=cc.instantiate(t);n.parent=u.default.getInstance().dialogRootNode,this.instance=n.getComponent(r),this.instance.node.zIndex=1e3,this.instance.show()}):(this.instance.node.zIndex=1e3,this.instance.show())}show(){super.show(),this.getUserProfile()}start(){h.Broadcast.register(h.Broadcast.CHIP_CHANGED,()=>{this.lbAccountChip.string=s.default.formatNumberToString(a.default.accountChip),this.lbBankChip.string=s.default.formatNumberToString(a.default.bankChip)},this)}actionPushToSafe(){this.inputType=f.DEPOSIT,this.bankContent.active=!1,this.bankInput.active=!0}actionWithDraw(){this.inputType=f.WITH_DRAW,this.bankContent.active=!1,this.bankInput.active=!0}actionSendGift(){this.close(),c.default.show()}actionHistory(){this.bankContent.active=!1,this.bankHistory.active=!0,this.getHistory()}edbChipsDidBegan(){this.edbChips.string=this.edbChips.string?Number(this.edbChips.string)+"":""}edbChipsTextChanged(){this.edbChips.string=this.edbChips.string.split(/[.-]/).join("")}edbChipsDidEnded(){switch(this.edbChips.string=this.edbChips.string.split(/[.-]/).join(""),this.inputType){case f.DEPOSIT:Number(this.edbChips.string)>a.default.accountChip&&(this.edbChips.string=a.default.accountChip+"");break;case f.WITH_DRAW:Number(this.edbChips.string)>a.default.bankChip&&(this.edbChips.string=a.default.bankChip+"")}}actionInputSend(){const e=this.edbChips.string.split(",").join("");switch(this.inputType){case f.DEPOSIT:if(Number(e)<=0)return void u.default.getInstance().alertDialog.showMessage("Chips invalid");if(Number(e)>a.default.accountChip)return void u.default.getInstance().alertDialog.showMessage("Not enough chip");this.sendDeposit(e);break;case f.WITH_DRAW:if(Number(e)<=0)return void u.default.getInstance().alertDialog.showMessage("Chips invalid");if(Number(e)>a.default.bankChip)return void u.default.getInstance().alertDialog.showMessage("Not enough chip");this.sendWithDraw(e)}}actionInputBack(){this.bankContent.active=!0,this.bankInput.active=!1,this.edbChips.string=""}sendDeposit(e){l.default.getInstance().rpcCall(i.default.Network.RPC_ID.PUSH_TO_BANK,{chipsInBank:e}).then(()=>{u.default.getInstance().alertDialog.showMessage("Push to safe successfully!"),this.getUserProfile(),this.edbChips.string=""},e=>{cc.log("err when push to bank",e);const t=e.message||e.error&&e.error.Message||"Error when push to safe!";u.default.getInstance().alertDialog.showMessage(t)})}sendWithDraw(e){l.default.getInstance().rpcCall(i.default.Network.RPC_ID.WITH_DRAW,{chips:e}).then(()=>{u.default.getInstance().alertDialog.showMessage("WithDraw successfully!"),this.getUserProfile(),this.edbChips.string=""},e=>{cc.log("err when withDraw",e),u.default.getInstance().alertDialog.showMessage(e.message||"Error when WithDraw!")})}getUserProfile(){l.default.getInstance().rpcCall(i.default.Network.RPC_ID.GET_PROFILE,{}).then(e=>{a.default.init(e.payload),h.Broadcast.send(h.Broadcast.CHIP_CHANGED)},e=>{cc.log("err when get PROFILE ",e)})}getHistory(){l.default.getInstance().rpcCall(i.default.Network.RPC_ID.WALLET_TRANSACTION,{limit:this.limit,meta_action:"bank_topup"}).then(e=>{this.cursor=e.payload.cursor,this.setHistory(e.payload.transactions)},e=>{cc.log("err when load history",e)})}setHistory(e){this.historyScrollView.content.children.forEach(e=>{e.active=!1}),e.forEach((e,t)=>{let n=this.historyScrollView.content.children[t];n||(n=cc.instantiate(this.historyItem),this.historyScrollView.content.addChild(n)),n.active=!0;let r=n.getComponentsInChildren(cc.Label),o=new Date(1970,0,1);o.setSeconds(e.createdTime),r[0].string=o+"",r[1].string=e.metadata.bank_action,r[2].string=s.default.formatNumberToString(e.changeset.chipsInBank)})}actionHistoryBack(){this.bankContent.active=!0,this.bankHistory.active=!1}};m.instance=null,o([g(cc.Node)],m.prototype,"bankContent",void 0),o([g(cc.Node)],m.prototype,"bankInput",void 0),o([g(cc.Node)],m.prototype,"bankHistory",void 0),o([g(cc.Label)],m.prototype,"lbAccountChip",void 0),o([g(cc.Label)],m.prototype,"lbBankChip",void 0),o([g(cc.EditBox)],m.prototype,"edbChips",void 0),o([g(cc.ScrollView)],m.prototype,"historyScrollView",void 0),o([g(cc.Node)],m.prototype,"historyItem",void 0),m=r=o([p],m),n.default=m,cc._RF.pop()},{"../../common/BaseDialog":"BaseDialog","../../common/Broadcast":"Broadcast","../../common/ConfigClient":"ConfigClient","../../common/GlobalApp":"GlobalApp","../../common/User":"User","../../common/Utils":"Utils","../../dialogs/sendgift/SendGiftDialog":"SendGiftDialog","../../network/NetworkClient":"NetworkClient"}],BannerDialog:[function(e,t,n){"use strict";cc._RF.push(t,"0fa69dcQudGgIfjZpBOyQSS","BannerDialog");var r,o=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0}),n.BannerData=void 0;const i=e("../../common/BaseDialog"),s=e("../../common/ConfigClient"),a=e("../../common/Constants"),c=e("../../common/GlobalApp"),l=e("../../common/SPUtils"),u=e("../../common/User"),d=e("../../lobby/LobbyController"),h=e("../bank/BankDialog"),f=e("../exchange/ExchangeDialog"),p=e("../leaderboard/LeaderBoardDialog"),g=e("../shop/ShopDialog");class m{static setBannerData(e=a.Banner.ShowType.HOME_PAGE,t=!1,n=null){t&&(m.isShow[e]=!1),m.showType=e,m.gameCode=n}static setGameCode(e){m.gameCode=e}static clear(){m.showType=null,m.isShow[m.showType]=!0}}n.BannerData=m,m.isShow={};const{ccclass:v,property:b}=cc._decorator;let w=r=class extends i.default{constructor(){super(...arguments),this.btnBack=null,this.btnNext=null,this.pageView=null,this.webview=null,this.bannerIdx=0,this.banners=[],this.listImgUrl=[]}static getInstance(){return this.instance}static show(e=null){m.setGameCode(e),r.getBanners().then(e=>{0!==e.length&&(null==this.instance||null==this.instance.node?c.default.getInstance().loadPrefabByMainBundle("res/prefabs/dialogs/BannerDialog",(t,n)=>{if(null!=t)return void c.default.getInstance().alertDialog.showMessage(t);let o=cc.instantiate(n);o.parent=c.default.getInstance().dialogRootNode,this.instance=o.getComponent(r),this.instance.node.zIndex=1e3,this.instance.show(e)}):(this.instance.node.zIndex=1e3,this.instance.show(e)))})}show(e=[]){super.show(),this.pageView.removeAllPages(),this.setBanners(e)}_onClosed(){super._onClosed(),m.clear()}start(){this.webview.setJavascriptInterfaceScheme("testkey"),this.webview.setOnJSCallback((e,t)=>{t.replace("testkey://",""),cc.log("target",JSON.stringify(e)),cc.log("self",this.webview),this.webview.node.active=!1})}static getBanners(){return fetch(s.default.Api.bannerUrl,{method:"GET",headers:{Authorization:`Bearer ${l.default.getToken()}`}}).then(e=>e.json()).then(e=>(cc.log(e),Promise.resolve(e.inAppMessages))).catch(e=>(cc.log("LIST_IN_APP_MESSAGE error ",e),Promise.resolve([]))),Promise.resolve([])}onWebFinishLoad(e,t){var n=this;t===cc.WebView.EventType.LOADED?(cc.log("webview loaded"),cc.assetManager.loadRemote(e.url,function(e){e&&(n.webview.node.active=!1)})):t===cc.WebView.EventType.LOADING?(cc.log("loading webview"),cc.log(e)):t===cc.WebView.EventType.ERROR&&(cc.log("webview err"),n.webview.node.active=!1)}closeWebview(){}checkConditions(e){var t,n,r,o,i,s,l,d,h,f,p,g,v,b,w,y,_,C,I,S,E,P,A,N,k,O,T,D,R,B,x,L,M,U,F,G,j,V,H,q,z,J,W,Y,K;let Q=0==(new Date).getDay()?6:(new Date).getDay()-1,$=(new Date).getHours();const X=Number(null===(n=null===(t=e.data)||void 0===t?void 0:t.params)||void 0===n?void 0:n.showType)===m.showType||!(null===(o=null===(r=e.data)||void 0===r?void 0:r.params)||void 0===o?void 0:o.showType)&&0===m.showType,Z=!m.gameCode||!(null===(s=null===(i=e.data)||void 0===i?void 0:i.params)||void 0===s?void 0:s.gameIds)||JSON.parse((null===(d=null===(l=e.data)||void 0===l?void 0:l.params)||void 0===d?void 0:d.gameIds)||{}).find(e=>e.code==m.gameCode),ee=!(null===(f=null===(h=e.data)||void 0===h?void 0:h.params)||void 0===f?void 0:f.Vip)||u.default.vipLevel>=JSON.parse((null===(g=null===(p=e.data)||void 0===p?void 0:p.params)||void 0===g?void 0:g.Vip)||{}).min&&u.default.vipLevel<=JSON.parse((null===(b=null===(v=e.data)||void 0===v?void 0:v.params)||void 0===b?void 0:b.Vip)||{}).max,te=!(null===(y=null===(w=e.data)||void 0===w?void 0:w.params)||void 0===y?void 0:y.AG)||u.default.accountChip>=JSON.parse((null===(C=null===(_=e.data)||void 0===_?void 0:_.params)||void 0===C?void 0:C.AG)||{}).min&&u.default.accountChip<=JSON.parse((null===(S=null===(I=e.data)||void 0===I?void 0:I.params)||void 0===S?void 0:S.AG)||{}).max,ne=!(null===(P=null===(E=e.data)||void 0===E?void 0:E.params)||void 0===P?void 0:P.os)||(null===(N=null===(A=e.data)||void 0===A?void 0:A.params)||void 0===N?void 0:N.os)==a.OS.Enum.NONE||cc.sys.os==cc.sys.OS_WINDOWS||(null===(O=null===(k=e.data)||void 0===k?void 0:k.params)||void 0===O?void 0:O.os)==a.OS.Enum[cc.sys.os],re=!(null===(D=null===(T=e.data)||void 0===T?void 0:T.params)||void 0===D?void 0:D.showByStake)||1!=(null===(B=null===(R=e.data)||void 0===R?void 0:R.params)||void 0===B?void 0:B.showType)&&3!=(null===(L=null===(x=e.data)||void 0===x?void 0:x.params)||void 0===L?void 0:L.showType)||JSON.parse((null===(M=c.default.getInstance().matchInfo)||void 0===M?void 0:M.label)||{}).bet>=JSON.parse((null===(F=null===(U=e.data)||void 0===U?void 0:U.params)||void 0===F?void 0:F.showByStake)||{}).min&&JSON.parse((null===(G=c.default.getInstance().matchInfo)||void 0===G?void 0:G.label)||{}).bet<=JSON.parse((null===(V=null===(j=e.data)||void 0===j?void 0:j.params)||void 0===V?void 0:V.showByStake)||{}).max,oe=!(null===(q=null===(H=e.data)||void 0===H?void 0:H.params)||void 0===q?void 0:q.showDays)||JSON.parse((null===(J=null===(z=e.data)||void 0===z?void 0:z.params)||void 0===J?void 0:J.showDays)||{})[Q].enable,ie=!(null===(W=e.data)||void 0===W?void 0:W.showTimes)||0==(null===(Y=e.data)||void 0===Y?void 0:Y.showTimes.length)||(null===(K=e.data)||void 0===K?void 0:K.showTimes.find(e=>$>=e.from&&$<=e.to));return cc.log(e.id),cc.log(`${X} ${Z} ${ee} ${te} ${ne} ${re} ${oe} ${ie}`),X&&Z&&ee&&te&&ne&&re&&oe&&ie}setBanners(e){this.banners=null==e?void 0:e.filter(e=>this.checkConditions(e)),cc.log("setBanners",this.banners),this.banners&&0!==this.banners.length?this.loadBanner(0):this.close()}loadBanner(e){var t,n,r,o,i,s;this.pageView.removeAllPages(),this.listImgUrl=[],this.btnBack.node.active=!0,this.btnNext.node.active=!0;for(let c=e;c<this.banners.length;c++){if(!(null===(n=null===(t=this.banners[c].data)||void 0===t?void 0:t.params)||void 0===n?void 0:n.images)||""===(null===(o=null===(r=this.banners[c].data)||void 0===r?void 0:r.params)||void 0===o?void 0:o.images))continue;const e=null===(s=null===(i=this.banners[c].data)||void 0===i?void 0:i.params)||void 0===s?void 0:s.images.split(";");if(e.length>0){this.listImgUrl=e,this.bannerIdx=c;break}}if(cc.log("this.listImgUrl",this.listImgUrl),(!this.listImgUrl||this.listImgUrl.length<=1)&&(this.btnBack.node.active=!1,this.btnNext.node.active=!1),0===this.listImgUrl.length)return this.pageView.removeAllPages(),void this.close();var a=this;this.listImgUrl.forEach(e=>{cc.assetManager.loadRemote(e,function(e,t){var n,r,o;if(!t)return;let i=new cc.Node,s=i.addComponent(cc.Sprite),c=a.pageView.node.width,l=a.pageView.node.height,u=l/t.height;u>c/t.width&&(u=c/t.width),t.width=t.width*u,t.height=t.height*u,s.spriteFrame=new cc.SpriteFrame(t);let d=new cc.Node;d.width=c,d.height=l,d.addChild(i),a.pageView.addPage(d),JSON.parse((null===(o=null===(r=null===(n=a.banners[a.bannerIdx])||void 0===n?void 0:n.data)||void 0===r?void 0:r.params)||void 0===o?void 0:o.listButton)||[]).forEach(e=>{cc.assetManager.loadRemote(e.urlButton,function(t,n){if(!n)return;let r=new cc.Node;r.on(cc.Node.EventType.TOUCH_START,()=>a.actionButton(e),a);let o=r.addComponent(cc.Sprite),s=a.pageView.node.width,c=a.pageView.node.height/n.height;c>s/n.width&&(c=s/n.width),n.width=n.width*c/5,n.height=n.height*c/5,o.spriteFrame=new cc.SpriteFrame(n),r.x=e.pos.x,r.y=e.pos.y,i.addChild(r)})})})})}actionButton(e){switch(e.type){case"Openlink":if(!cc.sys.isBrowser)break;window.open(e.urlLink);case"ShowWebview":this.webview.url=e.urlLink,this.webview.node.active=!0;break;case"OK":this.onClose();break;case"PM":g.default.show();break;case"CashOut":f.default.show();break;case"Topgame":p.default.show();break;case"Update":if(!cc.sys.isBrowser)break;window.open(e.urlLink);case"Playnow":this.close(),d.default.getInstance().actionQuickPlay(m.gameCode);break;case"Iap":g.default.show(g.ShopDealCategoryEnum.IAP)}}handlerNavigate(e){switch(e){case"bankView":h.default.show();break;default:cc.log("handlerNavigate target not found",e)}}eventPageTurning(e){cc.log("turning: ",e)}actionNextPage(){this.pageView.scrollToPage(this.pageView.getCurrentPageIndex()+1,.3)}actionPreviousPage(){this.pageView.scrollToPage(this.pageView.getCurrentPageIndex()-1,.3)}onClose(){this.bannerIdx>=this.banners.length-1?(this.bannerIdx=this.banners.length,m.showType=null,this.pageView.removeAllPages(),this.close()):this.loadBanner(this.bannerIdx+1)}};w.instance=null,o([b(cc.Button)],w.prototype,"btnBack",void 0),o([b(cc.Button)],w.prototype,"btnNext",void 0),o([b(cc.PageView)],w.prototype,"pageView",void 0),o([b(cc.WebView)],w.prototype,"webview",void 0),w=r=o([v],w),n.default=w,cc._RF.pop()},{"../../common/BaseDialog":"BaseDialog","../../common/ConfigClient":"ConfigClient","../../common/Constants":"Constants","../../common/GlobalApp":"GlobalApp","../../common/SPUtils":"SPUtils","../../common/User":"User","../../lobby/LobbyController":"LobbyController","../bank/BankDialog":"BankDialog","../exchange/ExchangeDialog":"ExchangeDialog","../leaderboard/LeaderBoardDialog":"LeaderBoardDialog","../shop/ShopDialog":"ShopDialog"}],BaseDialog:[function(e,t,n){"use strict";cc._RF.push(t,"a1974JM3RRKRr9HRVxHtgrb","BaseDialog");var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});const{ccclass:o,property:i}=cc._decorator;let s=class extends cc.Component{constructor(){super(...arguments),this.background=null,this.dialog=null}show(){this.background||(this.background=this.node.getChildByName("bg")),this.dialog||(this.dialog=this.node.getChildByName("dialog")),this.node.active=!0,this.background.stopAllActions(),this.background.opacity=0,this.background.runAction(cc.fadeTo(.2,125)),this.dialog.stopAllActions(),this.dialog.opacity=0,this.dialog.setScale(1.2,1.2);let e=cc.fadeTo(.2,255).easing(cc.easeCubicActionOut()),t=cc.scaleTo(.2,1).easing(cc.easeCubicActionOut());this.dialog.runAction(cc.sequence(cc.spawn(t,e),cc.callFunc(this._onShowed.bind(this))))}_onShowed(){}close(){this.background.stopAllActions(),this.background.opacity=125,this.background.runAction(cc.fadeOut(.2)),this.dialog.stopAllActions();let e=cc.scaleTo(.2,1.1).easing(cc.easeCubicActionIn()),t=cc.fadeOut(.2).easing(cc.easeCubicActionIn());this.dialog.runAction(cc.sequence(cc.spawn(e,t),cc.callFunc(this._onClosed.bind(this))))}_onClosed(){this.node.active=!1}};s=r([o],s),n.default=s,cc._RF.pop()},{}],Broadcast:[function(e,t,n){"use strict";cc._RF.push(t,"a138dyIS0ZAVr79quS3GF6d","Broadcast"),Object.defineProperty(n,"__esModule",{value:!0}),n.Broadcast=n.BroadcastListener=void 0;class r{constructor(e,t,n){this.action=e,this.target=n,this.callback=t}}n.BroadcastListener=r;class o{static register(e,t,n){this.listeners.push(new r(e,t,n))}static send(e,t=null){try{for(var n=0;n<this.listeners.length;n++){let r=this.listeners[n];r.action==e&&(r.target&&r.target instanceof Object&&r.target.node?r.callback(t):this.listeners.splice(n--,1))}}catch(r){cc.log(JSON.stringify(r.stack))}}}n.Broadcast=o,o.LOGOUT="LOGOUT",o.DISCONNECTED="DISCONNECTED",o.CHIP_CHANGED="CHIP_CHANGED",o.VIP_CHANGED="VIP_CHANGED",o.AVATAR_CHANGED="AVATAR_CHANGED",o.DISPLAY_NAME_CHANGED="DISPLAY_NAME_CHANGED",o.AUDIO_CHANGED="AUDIO_CHANGED",o.VIBRATION_CHANGED="VIBRATION_CHANGED",o.listeners=new Array,cc._RF.pop()},{}],BubbleChat:[function(e,t,n){"use strict";cc._RF.push(t,"50dc6UI6XVELaweMtFKmReY","BubbleChat");var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});const{ccclass:o,property:i}=cc._decorator;let s=class extends cc.Component{constructor(){super(...arguments),this.boxChat=null,this.lbChat=null}start(){this.lbChatOnChangeSize()}setData(e){this.lbChat.string=e}lbChatOnChangeSize(){this.lbChat.node.on("size-changed",()=>{this.scheduleOnce(()=>{this.boxChat.setContentSize(cc.size(this.boxChat.width,this.lbChat.node.height+15))})})}};r([i(cc.Node)],s.prototype,"boxChat",void 0),r([i(cc.Label)],s.prototype,"lbChat",void 0),s=r([o],s),n.default=s,cc._RF.pop()},{}],CanvasController:[function(e,t,n){"use strict";cc._RF.push(t,"032a3oj7idGc6fCm4kQtHkK","CanvasController");var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});const{ccclass:o,property:i}=cc._decorator;let s=class extends cc.Component{onLoad(){cc.winSize.width/cc.winSize.height>=16/9?(cc.Canvas.instance.fitHeight=!0,cc.Canvas.instance.fitWidth=!1):(cc.Canvas.instance.fitHeight=!1,cc.Canvas.instance.fitWidth=!0)}};s=r([o],s),n.default=s,cc._RF.pop()},{}],Card:[function(e,t,n){"use strict";cc._RF.push(t,"03281oWeEFHkIsrNB5dyYpE","Card");var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});const{ccclass:o,property:i}=cc._decorator,s={1:"co",2:"ro",3:"tep",4:"bich"};let a=class extends cc.Component{constructor(){super(...arguments),this.imgBackground=null,this.starPusoy=null,this.redBg=null,this.darkBg=null,this.value=null,this.icon_small=null,this.icon_large=null,this.imageSpritesPusoy=null,this.cardBorder=null,this.animLapLanh=null,this.data=null,this.tweenLapLanh=null}onLoad(){this.tweenLapLanh=null}setData(e,t){this.data={rank:e,suit:t},this.value.node.color=1===t||2===t?new cc.Color(211,6,25):new cc.Color(0,0,0);let n=e;14===Number(n)&&(n=1),this.value.spriteFrame=this.imageSpritesPusoy.getSpriteFrame(`card_${n}`),this.icon_small.spriteFrame=this.imageSpritesPusoy.getSpriteFrame(`card_${s[t]}_small`),this.icon_large.spriteFrame=this.imageSpritesPusoy.getSpriteFrame(`card${n>10?"_"+n:""}_${s[t]}`)}hideCardPusoy(){this.redBg.node.active=!0}showCardPusoy(){this.redBg.node.active=!1}isShow(){return!this.redBg.node.active}hideCardAnimPusoy(){let e=this.node.scaleX;cc.tween(this.node).to(.1,{scaleX:0}).call(()=>{this.redBg.node.active=!0}).to(.3,{scaleX:e}).start()}showCardAnimPusoy(){cc.tween(this.node).to(.1,{scaleX:0}).call(()=>{this.redBg.node.active=!1}).to(.3,{scaleX:this.node.scaleX}).start()}showShadowCard(){this.darkBg.node.active=!0}hideShadowCard(){this.darkBg.node.active=!1}setDark(e){this.darkBg.node.active=e}setBorder(e){this.cardBorder.node.active=e}setColorCard(e){this.imgBackground.node.color=e}setOpacity(e){this.imgBackground.node.opacity=e}isDark(){return this.darkBg.node.active}stopLapLanh(){this.animLapLanh.node.active=!1}showLapLanh(){this.darkBg.node.active||(this.node.getActionByTag(1)&&this.node.stopActionByTag(1),cc.tween(this.node).tag(1).call(()=>{this.animLapLanh.node.active=!0,this.animLapLanh.animation="animation"}).delay(1).call(()=>{this.stopLapLanh()}).start())}showStarPusoy(){this.starPusoy.node.active=!0,this.starPusoy.node.stopAllActions(),this.starPusoy.node.scale=10,this.starPusoy.node.opacity=0,this.starPusoy.node.angle=180,cc.tween(this.starPusoy.node).parallel(cc.tween().to(.5,{scale:1},{easing:"cubicOut"}),cc.tween().to(.5,{angle:0},{easing:"cubicOut"}),cc.tween().to(.3,{opacity:255})).start()}hideStarPusoy(){this.starPusoy.node.active=!1}setStarPusoyColor(e){this.starPusoy.node.color=e}};r([i(cc.Sprite)],a.prototype,"imgBackground",void 0),r([i(cc.Sprite)],a.prototype,"starPusoy",void 0),r([i(cc.Sprite)],a.prototype,"redBg",void 0),r([i(cc.Sprite)],a.prototype,"darkBg",void 0),r([i(cc.Sprite)],a.prototype,"value",void 0),r([i(cc.Sprite)],a.prototype,"icon_small",void 0),r([i(cc.Sprite)],a.prototype,"icon_large",void 0),r([i(cc.SpriteAtlas)],a.prototype,"imageSpritesPusoy",void 0),r([i(cc.Sprite)],a.prototype,"cardBorder",void 0),r([i(sp.Skeleton)],a.prototype,"animLapLanh",void 0),a=r([o],a),n.default=a,cc._RF.pop()},{}],ChangeNameDialog:[function(e,t,n){"use strict";cc._RF.push(t,"52416U6QO1CXLY5fmPq7VuC","ChangeNameDialog");var r,o=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});const i=e("../../common/BaseDialog"),s=e("../../common/Broadcast"),a=e("../../common/ConfigClient"),c=e("../../common/GlobalApp"),l=e("../../common/User"),u=e("../../language/LanguageController"),d=e("../../network/NetworkClient"),{ccclass:h,property:f}=cc._decorator;let p=r=class extends i.default{constructor(){super(...arguments),this.edbDisplayName=null,this.edbReDisplayName=null,this.edbPassword=null}static getInstance(){return this.instance}static show(){null==this.instance||null==this.instance.node?c.default.getInstance().loadPrefabByMainBundle("res/prefabs/dialogs/ChangeNameDialog",(e,t)=>{if(null!=e)return void c.default.getInstance().alertDialog.showMessage(e);let n=cc.instantiate(t);n.parent=c.default.getInstance().dialogRootNode,this.instance=n.getComponent(r),this.instance.node.zIndex=1e3,this.instance.show()}):(this.instance.node.zIndex=1e3,this.instance.show())}show(){super.show(),this.edbDisplayName.string="",this.edbReDisplayName.string="",this.edbPassword.string=""}actionChangeName(){this.edbDisplayName.string.trim()?this.edbReDisplayName.string.trim()?this.edbPassword.string.trim()?this.edbDisplayName.string.trim()!==l.default.displayName?this.edbDisplayName.string.trim()===this.edbReDisplayName.string.trim()?(c.default.getInstance().showProcessing(!0),d.default.getInstance().rpcCall(a.default.Network.RPC_ID.UPDATE_PROFILE,{userName:this.edbDisplayName.string.trim()}).then(e=>{c.default.getInstance().showProcessing(!1),l.default.init(e.payload),s.Broadcast.send(s.Broadcast.DISPLAY_NAME_CHANGED),c.default.getInstance().alertDialog.showMessage(u.default.getInstance().getString("change_display_name_success")),this.close()},e=>{cc.log("err when change display name",e),c.default.getInstance().showProcessing(!1),c.default.getInstance().alertDialog.showMessage(u.default.getInstance().getString("change_display_name_error"))})):c.default.getInstance().alertDialog.showMessage(u.default.getInstance().getString("reenter_display_name_error")):c.default.getInstance().alertDialog.showMessage(u.default.getInstance().getString("new_display_name_duplicate")):c.default.getInstance().alertDialog.showMessage(u.default.getInstance().getString("plz_enter_password")):c.default.getInstance().alertDialog.showMessage(u.default.getInstance().getString("reenter_display_name")):c.default.getInstance().alertDialog.showMessage(u.default.getInstance().getString("enter_new_display_name"))}};p.instance=null,o([f(cc.EditBox)],p.prototype,"edbDisplayName",void 0),o([f(cc.EditBox)],p.prototype,"edbReDisplayName",void 0),o([f(cc.EditBox)],p.prototype,"edbPassword",void 0),p=r=o([h],p),n.default=p,cc._RF.pop()},{"../../common/BaseDialog":"BaseDialog","../../common/Broadcast":"Broadcast","../../common/ConfigClient":"ConfigClient","../../common/GlobalApp":"GlobalApp","../../common/User":"User","../../language/LanguageController":"LanguageController","../../network/NetworkClient":"NetworkClient"}],ChangePasswordDialog:[function(e,t,n){"use strict";cc._RF.push(t,"2fb3bwbjktMEZ0mCVYhyDb7","ChangePasswordDialog");var r,o=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});const i=e("../../common/BaseDialog"),s=e("../../common/ConfigClient"),a=e("../../common/GlobalApp"),c=e("../../common/SPUtils"),l=e("../../language/LanguageController"),u=e("../../network/NetworkClient"),{ccclass:d,property:h}=cc._decorator;let f=r=class extends i.default{constructor(){super(...arguments),this.edbOldPassword=null,this.edbNewPassword=null,this.edbReNewPassword=null}static getInstance(){return this.instance}static show(){null==this.instance||null==this.instance.node?a.default.getInstance().loadPrefabByMainBundle("res/prefabs/dialogs/ChangePasswordDialog",(e,t)=>{if(null!=e)return void a.default.getInstance().alertDialog.showMessage(e);let n=cc.instantiate(t);n.parent=a.default.getInstance().dialogRootNode,this.instance=n.getComponent(r),this.instance.node.zIndex=1e3,this.instance.show()}):(this.instance.node.zIndex=1e3,this.instance.show())}show(){super.show(),this.edbOldPassword.string="",this.edbNewPassword.string="",this.edbReNewPassword.string=""}actionChangePassword(){this.edbOldPassword.string.trim()?this.edbNewPassword.string.trim()?this.edbReNewPassword.string.trim()?this.edbNewPassword.string.trim()===this.edbReNewPassword.string.trim()?(a.default.getInstance().showProcessing(!0),u.default.getInstance().rpcCall(s.default.Network.RPC_ID.CHANGE_PASS,{old_password:this.edbOldPassword.string.trim(),password:this.edbNewPassword.string.trim()}).then(()=>{a.default.getInstance().showProcessing(!1),a.default.getInstance().alertDialog.showMessage(l.default.getInstance().getString("change_pass_success")),c.default.setUserPassword(this.edbNewPassword.string.trim()),this.close()},e=>{cc.log("err when change password",e),a.default.getInstance().showProcessing(!1),a.default.getInstance().alertDialog.showMessage(l.default.getInstance().getString("change_pass_error"))})):a.default.getInstance().alertDialog.showMessage(l.default.getInstance().getString("new_pass_not_match")):a.default.getInstance().alertDialog.showMessage(l.default.getInstance().getString("reenter_new_password")):a.default.getInstance().alertDialog.showMessage(l.default.getInstance().getString("enter_new_password")):a.default.getInstance().alertDialog.showMessage(l.default.getInstance().getString("enter_old_password"))}};f.instance=null,o([h(cc.EditBox)],f.prototype,"edbOldPassword",void 0),o([h(cc.EditBox)],f.prototype,"edbNewPassword",void 0),o([h(cc.EditBox)],f.prototype,"edbReNewPassword",void 0),f=r=o([d],f),n.default=f,cc._RF.pop()},{"../../common/BaseDialog":"BaseDialog","../../common/ConfigClient":"ConfigClient","../../common/GlobalApp":"GlobalApp","../../common/SPUtils":"SPUtils","../../language/LanguageController":"LanguageController","../../network/NetworkClient":"NetworkClient"}],ChatInGameDialog:[function(e,t,n){"use strict";cc._RF.push(t,"881464go1FIUpXY5zbQZiVR","ChatInGameDialog");var r,o=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});const i=e("../../chat/ChatPresenter"),s=e("../../common/ConfigClient"),a=e("../../common/GlobalApp"),c=e("../../network/HttpClient"),l=e("../../network/NetworkClient"),{ccclass:u,property:d}=cc._decorator;let h=r=class extends cc.Component{constructor(){super(...arguments),this.dialog=null,this.tabs=null,this.contents=null,this.tabsEmoji=null,this.emojiContents=null,this.chatItem=null,this.emojiKingItem=null,this.emojiFishItem=null,this.emojiLoadRetries=0,this.maxEmojiLoadRetries=3,this.emojiLoadCheckInterval=500}static show(){null==this.instance||null==this.instance.node?a.default.getInstance().loadPrefabByMainBundle("res/prefabs/dialogs/ChatInGameDialog",(e,t)=>{if(null!=e)return void a.default.getInstance().alertDialog.showMessage(e);let n=cc.instantiate(t);n.parent=a.default.getInstance().dialogRootNode,this.instance=n.getComponent(r),this.instance.node.zIndex=1e3,this.instance.show()}):(this.instance.node.zIndex=1e3,this.instance.show())}start(){this.tabs.children.forEach((e,t)=>{e.on("toggle",()=>{this.tabChanged(t)})}),this.tabsEmoji.children.forEach((e,t)=>{e.on("toggle",()=>{this.tabEmojiChanged(t)})}),this.initEmoji()}show(){this.node.active=!0,cc.tween(this.dialog).to(.2,{scale:1.1}).to(.1,{scale:1}).start(),this.getQuickChat(),this.tabs.children[0].getComponent(cc.Toggle).isChecked=!0,this.tabChanged(0),this.tabsEmoji.children[0].getComponent(cc.Toggle).isChecked=!0,this.tabEmojiChanged(0)}close(){cc.tween(this.dialog).to(.1,{scale:1.1}).to(.2,{scale:0}).call(()=>{this.node.active=!1}).start()}tabChanged(e){this.contents.children.forEach((t,n)=>{t.active=n==e})}getQuickChat(){l.default.getInstance().rpcCall(s.default.Network.RPC_ID.GET_QUICKCHAT,{}).then(e=>{cc.log(e),c.default.get(s.default.Api.quickChatUrl,{}).then(t=>{cc.log(t);const n=(e.payload.texts.length>0?e.payload.texts:t.default).map(e=>t.texts[e]);cc.log(n),this.initChat(n)},e=>{cc.log("err when get quick chat ",e)})},e=>{cc.log("err when get my quick chat ",e)})}initChat(e){let t=this.contents.children[1].getComponentInChildren(cc.ScrollView).content;t.children.forEach(e=>{e.active=!1}),e.forEach((e,n)=>{let r=t.children[n];r||((r=cc.instantiate(this.chatItem)).parent=t),r.active=!0,r.getComponentInChildren(cc.Label).string=e,r.off("click"),r.on("click",()=>{let t={sender_id:a.default.getInstance().matchInfo.self.user_id,message:e};l.default.getInstance().sendChat(i.default.getInstance().getCurrentChatRoomId(),t)})})}tabEmojiChanged(e){this.emojiContents.children.forEach((t,n)=>{t.active=n==e})}initEmoji(){this.emojiLoadRetries=0,this.tryLoadEmojis()}tryLoadEmojis(){const e=i.default.getInstance(),t=e.getEmojisByType(i.EmojiType.KING),n=e.getEmojisByType(i.EmojiType.FISH);t&&12===t.length&&n&&9===n.length?(cc.log(`All emojis loaded successfully: ${t.length} king emojis, ${n.length} fish emojis`),this.loadEmojiContent(t,n)):this.emojiLoadRetries<this.maxEmojiLoadRetries?(this.emojiLoadRetries++,cc.log(`Emojis not fully loaded yet (King: ${(null==t?void 0:t.length)||0}/12, Fish: ${(null==n?void 0:n.length)||0}/9), retrying... (${this.emojiLoadRetries}/${this.maxEmojiLoadRetries})`),this.scheduleOnce(()=>{this.tryLoadEmojis()},this.emojiLoadCheckInterval/1e3)):(cc.warn(`Max retries (${this.maxEmojiLoadRetries}) reached. Loading with available emojis: King: ${(null==t?void 0:t.length)||0}/12, Fish: ${(null==n?void 0:n.length)||0}/9`),t&&t.length>0||n&&n.length>0?this.loadEmojiContent(t||[],n||[]):cc.error("No emojis available after maximum retries"))}loadEmojiContent(e,t){const n=this.emojiContents.children[0].getComponent(cc.ScrollView).content;n.children.forEach(e=>{e.active=!1});for(let o=0;o<e.length;o++){let t=n.children[o];t||((t=cc.instantiate(this.emojiKingItem)).parent=n),t.active=!0;let r=t.getComponentInChildren(sp.Skeleton);e[o]&&e[o].value?(r.skeletonData=e[o].value,r.animation="animation",t.off("click"),t.on("click",()=>{let t={sender_id:a.default.getInstance().matchInfo.self.user_id,emoji:{type:e[o].type,index:e[o].index}};l.default.getInstance().sendChat(i.default.getInstance().getCurrentChatRoomId(),t),this.close()})):cc.warn(`King emoji at index ${o} is undefined or missing value`)}const r=this.emojiContents.children[1].getComponent(cc.ScrollView).content;r.children.forEach(e=>{e.active=!1});for(let o=0;o<t.length;o++){let e=r.children[o];e||((e=cc.instantiate(this.emojiFishItem)).parent=r),e.active=!0;let n=e.getComponentInChildren(sp.Skeleton);t[o]&&t[o].value?(n.skeletonData=t[o].value,n.animation="animation",e.off("click"),e.on("click",()=>{let e={sender_id:a.default.getInstance().matchInfo.self.user_id,emoji:{type:t[o].type,index:t[o].index}};l.default.getInstance().sendChat(i.default.getInstance().getCurrentChatRoomId(),e),this.close()})):cc.warn(`Fish emoji at index ${o} is undefined or missing value`)}cc.log("Emoji content loaded successfully")}};h.instance=null,o([d(cc.Node)],h.prototype,"dialog",void 0),o([d(cc.Node)],h.prototype,"tabs",void 0),o([d(cc.Node)],h.prototype,"contents",void 0),o([d(cc.Node)],h.prototype,"tabsEmoji",void 0),o([d(cc.Node)],h.prototype,"emojiContents",void 0),o([d(cc.Node)],h.prototype,"chatItem",void 0),o([d(cc.Node)],h.prototype,"emojiKingItem",void 0),o([d(cc.Node)],h.prototype,"emojiFishItem",void 0),h=r=o([u],h),n.default=h,cc._RF.pop()},{"../../chat/ChatPresenter":"ChatPresenter","../../common/ConfigClient":"ConfigClient","../../common/GlobalApp":"GlobalApp","../../network/HttpClient":"HttpClient","../../network/NetworkClient":"NetworkClient"}],ChatPresenter:[function(e,t,n){"use strict";cc._RF.push(t,"69849LfXaxCN7e7Tc6lTd4G","ChatPresenter"),Object.defineProperty(n,"__esModule",{value:!0}),n.EmojiType=void 0;const r=e("../common/ConfigClient"),o=e("../network/NetworkClient");var i;(function(e){e.KING="E",e.FISH="F"})(i||(i={})),n.EmojiType=i;class s{constructor(){this.currentChatRoomId=null,this.gameView=null,this.throwIcons=[],this.throwAnimations=[],this.emojiE=[],this.emojiF=[],this.currentChatRoomId=null,this.gameView=null,this.throwIcons=[],this.throwAnimations=[],this.loadThrowAssets(),this.emojiE=[],this.emojiF=[],this.loadEmojiAssets()}static getInstance(){return null==this.instance&&(this.instance=new s),this.instance}loadThrowAssets(){const e=cc.assetManager.getBundle(r.default.Bundle.BUNDLE_NAME.LOBBY);let t=["1","2","3","4","5","6"];for(let r=0;r<t.length;r++)e.load(`res/sprites/common/throwicons/${t[r]}`,cc.SpriteFrame,(e,t)=>{e?cc.log("error:"+e):this.throwIcons.push({index:r,value:t})});let n=["1","2","3","4","5","6"];for(let r=0;r<n.length;r++)e.loadDir(`res/animations/ingame/throwicons/${n[r]}`,sp.SkeletonData,(e,t)=>{e?cc.log("error:"+e):this.throwAnimations.push({index:r,value:t[0]})})}loadEmojiAssets(){const e=cc.assetManager.getBundle(r.default.Bundle.BUNDLE_NAME.LOBBY);for(let t=1;t<=12;t++)e.loadDir(`res/animations/ingame/emoticon/e${t}`,sp.SkeletonData,(e,n)=>{e?cc.log("error:"+e):this.emojiE.push({index:t-1,value:n[0],type:i.KING})});for(let t=1;t<=9;t++)e.loadDir(`res/animations/ingame/emoticon/f${t}`,sp.SkeletonData,(e,n)=>{e?cc.log("error:"+e):this.emojiF.push({index:t-1,value:n[0],type:i.FISH})})}getThrowIcon(e){const t=this.throwIcons.find(t=>t.index===e);return t?t.value:null}getAllThrowIcons(){return this.throwIcons.sort((e,t)=>e.index-t.index).map(e=>e.value)}getThrowAnimation(e){const t=this.throwAnimations.find(t=>t.index===e);return t?t.value:null}getAllThrowAnimations(){return this.throwAnimations.sort((e,t)=>e.index-t.index).map(e=>e.value)}getEmojiE(e){const t=this.emojiE.find(t=>t.index===e);return t?t.value:null}getAllEmojiE(){return this.emojiE.sort((e,t)=>e.index-t.index)}getEmojiF(e){const t=this.emojiF.find(t=>t.index===e);return t?t.value:null}getAllEmojiF(){return this.emojiF.sort((e,t)=>e.index-t.index)}getEmojisByType(e){switch(e){case i.KING:return this.getAllEmojiE();case i.FISH:return this.getAllEmojiF();default:return cc.warn(`Unknown emoji type: ${e}`),[]}}getEmojiByTypeAndIndex(e,t){let n;switch(e){case i.KING:n=this.emojiE.find(e=>e.index===t);break;case i.FISH:n=this.emojiF.find(e=>e.index===t);break;default:return cc.warn(`Unknown emoji type: ${e}`),null}return n||null}getCurrentChatRoomId(){return this.currentChatRoomId}setCurrentChatRoomId(e){this.currentChatRoomId=e}joinChatRoom(e,t){this.gameView=t,o.default.getInstance().joinChat(e,1,!0).then(e=>{cc.log("joinChatRoom",e),this.setCurrentChatRoomId(e.id)},e=>{cc.error("join room failed:",JSON.stringify(e))})}leaveChat(){this.getCurrentChatRoomId()&&(cc.log("Leave room chat: "+o.default.getInstance().leaveChat(this.getCurrentChatRoomId())),this.setCurrentChatRoomId(null),this.gameView=null)}handleChatData(e){this.gameView?e.message&&"function"==typeof this.gameView.showChat?this.gameView.showChat(e):e.emoji&&"function"==typeof this.gameView.showEmoji?this.gameView.showEmoji(e):e.throw&&"function"==typeof this.gameView.throwIcons?this.gameView.throwIcons(e):cc.error("Game view does not have the required methods"):cc.error("Game view not found")}}s.instance=null,n.default=s,cc._RF.pop()},{"../common/ConfigClient":"ConfigClient","../network/NetworkClient":"NetworkClient"}],ConfigClient:[function(e,t,n){"use strict";var r;cc._RF.push(t,"d2a34ybtNJEqrsBx7S6N/Fk","ConfigClient"),Object.defineProperty(n,"__esModule",{value:!0}),function(e){class t{}t.serverKey="defaultkey",t.nakamaIp="nakama.ciaolinkgames.com",t.nakamaPort="",t.timeout=7e3,t.useSSL=!0,t.RPC_ID={LIST_GAME:"list_game",LIST_BET:"list_bet",CREATE_MATCH:"create_match",FIND_MATCH:"find_match",QUICK_MATCH:"quick_match",GET_PROFILE:"get_profile",UPDATE_PROFILE:"update_profile",UPDATE_AVATAR:"update_avatar",LINK_USERNAME:"link_username",CHANGE_PASS:"user_change_pass",PUSH_TO_BANK:"push_to_bank",WITH_DRAW:"with_draw",SEND_GIFT:"send_gift",WALLET_TRANSACTION:"wallet_transaction",LIST_CLAIMABLE_FREECHIPS:"list_claimable_freechip",CLAIM_FREECHIP:"claim_freechip",LIST_DEAL:"list_deal",GET_QUICKCHAT:"get_quickchat",UPDATE_QUICKCHAT:"update_quickchat",EXCHANGE_ADD:"exchange_add",EXCHANGE_CANCEL:"exchange_cancel",LIST_EXCHANGE_DEAL:"list_exchange_deal",LIST_EXCHANGE:"list_exchange",CAN_CLAIM_DAILY_REWARD:"canclaimdailyreward",CLAIM_DAILY_REWARD:"claimdailyreward",GIFT_CODE_CLAIM:"gift_code_claim",LIST_IN_APP_MESSAGE:"list_in_app_message",LIST_NOTIFICATION:"list_notification",READ_NOTIFICATION:"read_notification",DELETE_NOTIFICATION:"delete_notification",READ_ALL_NOTIFICATION:"read_all_notification",DELETE_ALL_NOTIFICATION:"delete_all_notification",LEADER_BOARD_INFO:"leaderboard_info",GET_JACKPOT:"jackpot",INFO_MATCH:"info_match",SEND_GIFT_FEE:"send_gift_fee"},t.OP_CODE={OPCODE_UPDATE_UNSPECIFIED:0,OPCODE_UPDATE_TABLE:1,OPCODE_UPDATE_DEAL:2,OPCODE_UPDATE_FINISH:3,OPCODE_UPDATE_REJECTED:4,OPCODE_UPDATE_GAME_STATE:5,OPCODE_UPDATE_CARD_STATE:6,OPCODE_UPDATE_WALLET:7,OPCODE_KICK_OFF_THE_TABLE:8,OPCODE_UPDATE_USER_INFO:9,OPCODE_LIST_PLAYER:10,OPCODE_BUY_SIXIANG_GEM:13},t.OP_CODE_REQUEST={OPCODE_UNSPECIFIED:0,OPCODE_REQUEST_NEW_GAME:1,OPCODE_REQUEST_ORGANIZE:2,OPCODE_REQUEST_LEAVE_GAME:3,OPCODE_REQUEST_COMBINE_CARDS:4,OPCODE_REQUEST_SHOW_CARDS:5,OPCODE_REQUEST_DECLARE_CARDS:6,OPCODE_MOVE_CARDS:7,OPCODE_BET:8,OPCODE_LIST_USERS:9,OPCODE_REQUEST_INFO_TABLE:10,OPCODE_REQUEST_HISTORY_RESULT:11,OPCODE_REQUEST_SPIN:12,OPCODE_REQUEST_BUY_SIXIANG_GEM:13,OPCODE_REQUEST_TIP_INGAME:14,OPCODE_REQUEST_SYNC_TABLE:15},e.Network=t;class n{}n.ip="103.226.250.195",n.quickChatUrl="http://"+n.ip+":9000/lang/quickchat-en.json",n.apiurlv1="http://"+n.ip+":9180/v1/",n.bannerUrl="http://"+n.ip+":7360/notification/v1/banner?type=1",e.Api=n;class r{static setBundleInfo(e){this.version=e.version,this.url=e.url,this.bundles=e.bundles,this.mainBundle=e.mainbundle,this.startScene=e.mainscene}}r.version="0.0.0",r.url="",r.bundles=[],r.mainBundle="lobby",r.startScene="Login",r.BUNDLE_NAME={BACCARAT:"baccarat",BANDARQQ:"bandarqq",BLACKJACK:"blackjack",DRAGONTIGER:"dragontiger",GAPLE:"gaple",LOBBY:"lobby",OSPHE:"osphe",PUSOY:"chinese-poker",SICBO:"sicbo",FRUIT:"fruit",INCA:"inca",JUICYGARDEN:"juicygarden",NOEL:"noel",SIXIANG:"sixiang",TARZAN:"tarzan",TONGITS:"tongits"},e.Bundle=r;class o{}o.fbAppId="688743849211399",o.SCENE_NAME={LOGIN:"Login",LOBBY:"Lobby",GAMELIST:"GameList",TABLELIST:"TableList"},o.WEB_NATIVE=!1,e.AppInfo=o}(r||(r={})),n.default=r,cc.sys.isNative&&cc.sys.os!==cc.sys.OS_OSX&&cc.sys.os!==cc.sys.OS_WINDOWS&&r.Bundle.setBundleInfo(JSON.parse(cc.sys.localStorage.getItem("bundles"))),cc._RF.pop()},{}],ConfirmDialog:[function(e,t,n){"use strict";cc._RF.push(t,"6056bgHVL1NAraqej8qe9vO","ConfirmDialog");var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});const o=e("./BaseDialog"),{ccclass:i,property:s}=cc._decorator;let a=class extends o.default{constructor(){super(...arguments),this.lbMessage=null,this.onClosed=null,this.isConfirm=!1}showMessage(e,t=null){this.isConfirm=!1,this.lbMessage.string=e,this.onClosed=t,this.show()}_onClosed(){super._onClosed(),this.onClosed&&this.onClosed(this.isConfirm)}confirm(){this.isConfirm=!0,this.close()}};r([s(cc.Label)],a.prototype,"lbMessage",void 0),a=r([i],a),n.default=a,cc._RF.pop()},{"./BaseDialog":"BaseDialog"}],Constants:[function(e,t,n){"use strict";cc._RF.push(t,"9eccaaiBKhPoJ+gSMjGuyW5","Constants"),Object.defineProperty(n,"__esModule",{value:!0}),n.NativeCommand=n.MetaBank=n.OS=n.GiftCode=n.Chat=n.Login=n.Notification=n.Banner=n.Game=n.GameType=n.InAppMessage=n.Language=void 0;const r=e("./ConfigClient");(function(e){let t;(function(e){e.EN="en-US",e.PH="tl-PH"})(t=e.Enum||(e.Enum={})),e.valueToEnum=function(e){return e}})(n.Language||(n.Language={})),function(e){let t,n;(function(e){e[e.HOT_NEWS=0]="HOT_NEWS",e[e.BANNER=1]="BANNER"})(t=e.MessageType||(e.MessageType={})),function(e){e[e.NONE=0]="NONE",e[e.NAVIGATE=1]="NAVIGATE",e[e.OPEN_URL=2]="OPEN_URL"}(n=e.MessageAction||(e.MessageAction={}))}(n.InAppMessage||(n.InAppMessage={})),function(e){let t;(function(e){e[e.TABLE_GAME=0]="TABLE_GAME",e[e.SLOT_GAME=1]="SLOT_GAME"})(t=e.Enum||(e.Enum={})),e.getDisplayName=function(e){switch(e){case t.TABLE_GAME:return"TABLE GAMES";case t.SLOT_GAME:return"SLOTS GAMES"}}}(n.GameType||(n.GameType={})),function(e){let t,n,o,i;(function(e){e.PUSOY="chinese-poker",e.COLOR_GAME="color-game",e.LUCKY_NUMBER="lucky-number",e.BACCARAT="baccarat",e.SABONG_CARD="sabong-cards",e.BANDAQQ="bandarqq",e.DRAGON_TIGER="dragontiger",e.SICBO="sicbo",e.BLACKJACK="blackjack",e.SIXIANG="sixiang",e.TARZAN="tarzan",e.JUICY_GARDEN="juicygarden",e.INCA="inca",e.NOEL="noel",e.FRUIT="fruit",e.GAPLE="gaple",e.TONGITS="tongits",e.TONGITS_JOKER="tongits-joker",e.KARTU_QIU="kartu-qiu"})(t=e.Enum||(e.Enum={})),e.valueToEnum=function(e){return e},e.Info={[t.PUSOY]:{urlAsset:"res/prefabs/Pusoy",bundleName:r.default.Bundle.BUNDLE_NAME.PUSOY,gameName:"Pusoy"},[t.BACCARAT]:{urlAsset:"res/prefabs/Baccarat",bundleName:r.default.Bundle.BUNDLE_NAME.BACCARAT,gameName:"Baccarat"},[t.BANDAQQ]:{urlAsset:"res/prefabs/BandaQQ",bundleName:r.default.Bundle.BUNDLE_NAME.BANDARQQ,gameName:"BandarQQ"},[t.DRAGON_TIGER]:{urlAsset:"res/prefabs/DragonTiger",bundleName:r.default.Bundle.BUNDLE_NAME.DRAGONTIGER,gameName:"Dragon Tiger"},[t.SICBO]:{urlAsset:"res/prefabs/Sicbo",bundleName:r.default.Bundle.BUNDLE_NAME.SICBO,gameName:"Sicbo"},[t.BLACKJACK]:{urlAsset:"res/prefabs/Blackjack",bundleName:r.default.Bundle.BUNDLE_NAME.BLACKJACK,gameName:"Black Jack"},[t.SIXIANG]:{urlAsset:"res/prefabs/Sixiang",bundleName:r.default.Bundle.BUNDLE_NAME.SIXIANG,gameName:"Sixiang"},[t.TARZAN]:{urlAsset:"res/prefabs/Tarzan",bundleName:r.default.Bundle.BUNDLE_NAME.TARZAN,gameName:"Tarzan"},[t.JUICY_GARDEN]:{urlAsset:"res/prefabs/JuicyGarden",bundleName:r.default.Bundle.BUNDLE_NAME.JUICYGARDEN,gameName:"JuicyGarden"},[t.INCA]:{urlAsset:"res/prefabs/Inca",bundleName:r.default.Bundle.BUNDLE_NAME.INCA,gameName:"Inca"},[t.NOEL]:{urlAsset:"res/prefabs/Noel",bundleName:r.default.Bundle.BUNDLE_NAME.NOEL,gameName:"Noel"},[t.FRUIT]:{urlAsset:"res/prefabs/Fruit",bundleName:r.default.Bundle.BUNDLE_NAME.FRUIT,gameName:"Fruit"},[t.GAPLE]:{urlAsset:"res/prefabs/Domino",bundleName:r.default.Bundle.BUNDLE_NAME.GAPLE,gameName:"Domino Gaple"},[t.TONGITS]:{urlAsset:"res/prefabs/Tongits",bundleName:r.default.Bundle.BUNDLE_NAME.TONGITS,gameName:"Tongits"}},function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.NOT_ENOUGH_CHIP=1]="NOT_ENOUGH_CHIP",e[e.BELOW_MIN_VIP=2]="BELOW_MIN_VIP",e[e.ABOVE_MAX_VIP=3]="ABOVE_MAX_VIP"}(n=e.BetDisableType||(e.BetDisableType={})),function(e){e[e.LOBBY=0]="LOBBY",e[e.MATCHING=2]="MATCHING",e[e.PREPARE=3]="PREPARE",e[e.RUN=4]="RUN",e[e.REWARD=5]="REWARD",e[e.FINISH=6]="FINISH",e[e.SPECTATING=666]="SPECTATING"}(o=e.GAME_STATE||(e.GAME_STATE={})),function(e){e[e.COMBINE=0]="COMBINE",e[e.SHOW=1]="SHOW",e[e.DECLARE=2]="DECLARE"}(i=e.CARD_EVENT||(e.CARD_EVENT={}))}(n.Game||(n.Game={})),function(e){let t;(function(e){e[e.HOME_PAGE=0]="HOME_PAGE",e[e.KICK_OUT_MATCH=1]="KICK_OUT_MATCH",e[e.LEFT_MATCH=2]="LEFT_MATCH",e[e.CHOOSE_GAME=4]="CHOOSE_GAME",e[e.LOBBY_PAYMENT=5]="LOBBY_PAYMENT",e[e.PAYMENT_LOBBY=6]="PAYMENT_LOBBY",e[e.EVENT=7]="EVENT"})(t=e.ShowType||(e.ShowType={}))}(n.Banner||(n.Banner={})),function(e){let t;(function(e){e[e.MAIL_BOX=1]="MAIL_BOX",e[e.FREE_CHIP=2]="FREE_CHIP"})(t=e.Enum||(e.Enum={}))}(n.Notification||(n.Notification={})),function(e){let t;(function(e){e[e.GUEST=0]="GUEST",e[e.FB=1]="FB",e[e.ID=2]="ID"})(t=e.Enum||(e.Enum={})),e.valueToEnum=function(e){return t[t[e]]}}(n.Login||(n.Login={})),function(e){let t;e.WORLD_CHAT_ROOM_NAME="world",function(e){e[e.ROOM=1]="ROOM",e[e.DIRECT=2]="DIRECT",e[e.GROUP=3]="GROUP"}(t=e.ChatType||(e.ChatType={}))}(n.Chat||(n.Chat={})),function(e){let t;(function(e){e[e.NOT_OPEN=1]="NOT_OPEN",e[e.HAS_CLOSED=2]="HAS_CLOSED",e[e.REACH_MAX_CLAIMED=3]="REACH_MAX_CLAIMED",e[e.ALREADY_CLAIMED=4]="ALREADY_CLAIMED",e[e.LV_VIP_NOT_MET_REQUIRE=5]="LV_VIP_NOT_MET_REQUIRE"})(t=e.ErrorCode||(e.ErrorCode={}))}(n.GiftCode||(n.GiftCode={})),function(e){let t;(function(e){e[e.NONE=0]="NONE",e[e.iOS=1]="iOS",e[e.Android=2]="Android"})(t=e.Enum||(e.Enum={}))}(n.OS||(n.OS={})),function(e){let t;(function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.SEND_GIFT=1]="SEND_GIFT",e[e.RECV_GIFT=2]="RECV_GIFT",e[e.REVERT_SEND_GIFT=3]="REVERT_SEND_GIFT",e[e.PUSH_TO_SAFE=4]="PUSH_TO_SAFE",e[e.WITH_DRAW=5]="WITH_DRAW"})(t=e.Enum||(e.Enum={}))}(n.MetaBank||(n.MetaBank={})),function(e){let t;(function(e){e.LOGIN_FACEBOOK="LOGIN_FACEBOOK",e.GET_DEVICE_ID="GET_DEVICE_ID",e.ON_VIBRATOR="ON_VIBRATOR",e.CHAT_ADMIN="CHAT_ADMIN",e.OPEN_FANPAGE="OPEN_FANPAGE",e.OPEN_GROUP="OPEN_GROUP",e.BUY_IAP="BUY_IAP",e.OPEN_URL="OPEN_URL"})(t=e.Enum||(e.Enum={}))}(n.NativeCommand||(n.NativeCommand={})),cc._RF.pop()},{"./ConfigClient":"ConfigClient"}],CreateTableDialog:[function(e,t,n){"use strict";cc._RF.push(t,"7d4194kBmFDfa2XRlSIeZld","CreateTableDialog");var r,o=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});const i=e("../common/BaseDialog"),s=e("../common/ConfigClient"),a=e("../common/GlobalApp"),c=e("../common/User"),l=e("../common/Utils"),u=e("../network/NetworkClient"),{ccclass:d,property:h}=cc._decorator;let f=r=class extends i.default{constructor(){super(...arguments),this.lbBet=null,this.slider=null,this.progressBar=null,this.edbTableName=null,this.edbPassword=null,this.btnCreate=null}static show(e,t){null==this.instance||null==this.instance.node?a.default.getInstance().loadPrefabByMainBundle("res/prefabs/dialogs/CreateTableDialog",(n,o)=>{if(null!=n)return void a.default.getInstance().alertDialog.showMessage(n);let i=cc.instantiate(o);i.parent=a.default.getInstance().dialogRootNode,this.instance=i.getComponent(r),this.instance.node.zIndex=1e3,this.instance.gameCode=e,this.instance.bets=t,this.instance.show()}):(this.instance.node.zIndex=1e3,this.instance.gameCode=e,this.instance.bets=t,this.instance.show())}show(){super.show(),this.onSlide()}onSlide(){var e,t;let n=Math.floor(this.slider.progress*this.bets.length);1==this.slider.progress&&(n-=1),this.lbBet.string=l.default.formatBetNumber((null===(e=this.bets[n])||void 0===e?void 0:e.markUnit)||0),this.progressBar.progress=this.slider.progress,this.btnCreate.interactable=c.default.accountChip>=(null===(t=this.bets[n])||void 0===t?void 0:t.markUnit)}moveToIndex(e){var t,n;let r=e===this.bets.length-1?1:e/this.bets.length;this.lbBet.string=l.default.formatBetNumber((null===(t=this.bets[e])||void 0===t?void 0:t.markUnit)||0),this.progressBar.progress=r,this.slider.progress=r,this.btnCreate.interactable=c.default.accountChip>=(null===(n=this.bets[e])||void 0===n?void 0:n.markUnit)}actionAdd(){let e=Math.floor(this.slider.progress*this.bets.length);1==this.slider.progress&&(e-=1),e>=this.bets.length-1||this.moveToIndex(e+1)}actionSub(){let e=Math.floor(this.slider.progress*this.bets.length);1==this.slider.progress&&(e-=1),e<=0||this.moveToIndex(e-1)}actionCreateTable(){var e;let t=Math.floor(this.slider.progress*this.bets.length);1==this.slider.progress&&(t-=1),a.default.getInstance().showProcessing(!0);const n=this.edbTableName.string.trim(),r=this.edbPassword.string.trim();u.default.getInstance().rpcCall(s.default.Network.RPC_ID.CREATE_MATCH,{mark_unit:null===(e=this.bets[t])||void 0===e?void 0:e.markUnit,game_code:this.gameCode,name:n,password:r}).then(e=>{let t=e.payload.matchId;t?u.default.getInstance().joinMatch(t,null,r?{passowrd:r}:null).then(e=>{a.default.getInstance().matchInfo=e},e=>{cc.log("err when join match",e)}):a.default.getInstance().showProcessing(!1)},e=>{cc.log("err when create match",e),a.default.getInstance().showProcessing(!1)}),this.close()}};f.instance=null,o([h(cc.Label)],f.prototype,"lbBet",void 0),o([h(cc.Slider)],f.prototype,"slider",void 0),o([h(cc.ProgressBar)],f.prototype,"progressBar",void 0),o([h(cc.EditBox)],f.prototype,"edbTableName",void 0),o([h(cc.EditBox)],f.prototype,"edbPassword",void 0),o([h(cc.Button)],f.prototype,"btnCreate",void 0),f=r=o([d],f),n.default=f,cc._RF.pop()},{"../common/BaseDialog":"BaseDialog","../common/ConfigClient":"ConfigClient","../common/GlobalApp":"GlobalApp","../common/User":"User","../common/Utils":"Utils","../network/NetworkClient":"NetworkClient"}],DropdownItem:[function(e,t,n){"use strict";cc._RF.push(t,"a32fd+qKP1GrYwZHfBwtOq4","DropdownItem");var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});const{ccclass:o,property:i,requireComponent:s}=cc._decorator;let a=class extends cc.Component{constructor(){super(...arguments),this.checkMark=null,this.label=null,this.idx=-1}};r([i(cc.Node)],a.prototype,"checkMark",void 0),r([i(cc.Label)],a.prototype,"label",void 0),a=r([o,s(cc.Button)],a),n.default=a,cc._RF.pop()},{}],Dropdown:[function(e,t,n){"use strict";cc._RF.push(t,"a7aa3rde05J57YScrdqiy9B","Dropdown");var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});const o=e("./DropdownItem"),{ccclass:i,property:s,requireComponent:a}=cc._decorator;let c=class extends cc.Component{constructor(){super(...arguments),this.label=null,this.itemTemplate=null,this.value=-1,this.data=[],this.items=[]}start(){this.itemTemplate.node.active=!1}show(){this.node.active=!0,this.node.opacity=0,this.node.runAction(cc.fadeIn(.2));for(var e=0;e<this.items.length;e++)this.items[e].checkMark.active=this.items[e].idx==this.value}setOptions(e=[]){this.data=e;for(var t=this.itemTemplate.node.parent.children,n=0;n<t.length;n++)t[n].active=!1;for(this.items=[],n=0;n<e.length;n++){var r=this.getItem();r.idx=n,r.label.string=e[n],r.checkMark.active=n==this.value,this.items.push(r)}}close(){var e=this;this.node.runAction(cc.sequence(cc.fadeOut(.2),cc.callFunc(()=>{e.node.active=!1})))}setOnValueChange(e){this.onValueChange=e}setValue(e){e<this.data.length?(this.value=e,this.label.string=this.data[this.value]):this.value=0}getValue(){return this.value}getItem(){for(var e=null,t=this.itemTemplate.node.parent.children,n=0;n<t.length;n++)t[n].active||t[n]==this.itemTemplate.node||(e=t[n]);return null==e&&((e=cc.instantiate(this.itemTemplate.node)).parent=this.itemTemplate.node.parent,e.on("click",e=>{this.value=e.getComponent(o.default).idx,this.label.string=this.data[this.value],this.onValueChange&&this.onValueChange(this.value),this.close()},this)),e.active=!0,e.zIndex=this.getLastZIndex(),e.getComponent(o.default)}getLastZIndex(){for(var e=0,t=this.itemTemplate.node.parent.children,n=1;n<t.length;n++)t[n].active&&e++;return e}};r([s(cc.Label)],c.prototype,"label",void 0),r([s(o.default)],c.prototype,"itemTemplate",void 0),c=r([i,a(cc.Button)],c),n.default=c,cc._RF.pop()},{"./DropdownItem":"DropdownItem"}],EnterPasswordDialog:[function(e,t,n){"use strict";cc._RF.push(t,"01c8d5Jtr1D5a6aGZSPrAMV","EnterPasswordDialog");var r,o=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});const i=e("../common/BaseDialog"),s=e("../common/GlobalApp"),a=e("../language/LanguageController"),{ccclass:c,property:l}=cc._decorator;let u=r=class extends i.default{constructor(){super(...arguments),this.edbPassword=null,this.onConfirm=null}static show(e){null==this.instance||null==this.instance.node?s.default.getInstance().loadPrefabByMainBundle("res/prefabs/dialogs/EnterPasswordDialog",(t,n)=>{if(null!=t)return void s.default.getInstance().alertDialog.showMessage(t);let o=cc.instantiate(n);o.parent=s.default.getInstance().dialogRootNode,this.instance=o.getComponent(r),this.instance.node.zIndex=1e3,this.instance.onConfirm=e,this.instance.show()}):(this.instance.node.zIndex=1e3,this.instance.onConfirm=e,this.instance.show())}show(){super.show(),this.edbPassword.string=""}actionConfirm(){const e=this.edbPassword.string.trim();e?(this.onConfirm&&this.onConfirm(e),this.close()):s.default.getInstance().alertDialog.showMessage(a.default.getInstance().getString("plz_enter_password"))}};u.instance=null,o([l(cc.EditBox)],u.prototype,"edbPassword",void 0),u=r=o([c],u),n.default=u,cc._RF.pop()},{"../common/BaseDialog":"BaseDialog","../common/GlobalApp":"GlobalApp","../language/LanguageController":"LanguageController"}],ExchangeDialog:[function(e,t,n){"use strict";cc._RF.push(t,"c2c82QO0idGGb/HShnjKKec","ExchangeDialog");var r,o=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0}),n.ExchangeCategory=n.ExchangeDeal=void 0;const i=e("../../common/BaseDialog"),s=e("../../common/Broadcast"),a=e("../../common/ConfigClient"),c=e("../../common/GlobalApp"),l=e("../../common/User"),u=e("../../common/Utils"),d=e("../../network/NetworkClient"),h=e("./ExchangeFormInputDialog");class f{static toExchangeDeal(e,t){let n=new f;return n.id=t.id,n.chips=Number(t.chips),n.amountChips=t.amountChips,n.bonus=t.bonus,n.price=Number(t.price),n.name=t.name,n.currency=t.currency,n.percent=t.percent,n.chipPerUnit=t.chipPerUnit,n.cashType=e,n}static toExchangeDeals(e,t){let n=[];return t.forEach(t=>{n.push(f.toExchangeDeal(e,t))}),n}}n.ExchangeDeal=f;const p={1:"Waiting",2:"Canceled",3:"Pending",4:"Done",5:"Rejected"},g={1:"#ffff00",2:"#FFFFFF",3:"#FFA500",4:"#00FF00",5:"#FF0000"};class m{static toExchangeCategory(e,t){let n=new m;n.name=e;let r="";switch(e){case"gcashes":n.displayName="G-Cashes",r="Mobile"}return n.deals=f.toExchangeDeals(r,t),n}static toExchangeCategorys(e){let t=[];for(let n in e){let r=m.toExchangeCategory(n,e[n]);t.push(r)}return t}}n.ExchangeCategory=m;const{ccclass:v,property:b}=cc._decorator;let w=r=class extends i.default{constructor(){super(...arguments),this.tabs=null,this.tabContents=null,this.rewardTabContent=null,this.rewardTabItem=null,this.rewardScroll=null,this.rewardItem=null,this.historyScroll=null,this.historyItem=null,this.formInputDialog=null,this.lbAmoutChip=null}static getInstance(){return this.instance}static show(){null==this.instance||null==this.instance.node?c.default.getInstance().loadPrefabByMainBundle("res/prefabs/dialogs/ExchangeDialog",(e,t)=>{if(null!=e)return void c.default.getInstance().alertDialog.showMessage(e);let n=cc.instantiate(t);n.parent=c.default.getInstance().dialogRootNode,this.instance=n.getComponent(r),this.instance.node.zIndex=1e3,this.instance.show()}):(this.instance.node.zIndex=1e3,this.instance.show())}show(){super.show(),this.getUserProfile(),this.tabs.children[0].getComponent(cc.Toggle).check(),this.onTabChanged(0)}start(){s.Broadcast.register(s.Broadcast.CHIP_CHANGED,()=>{u.default.runNumber(this.lbAmoutChip,l.default.accountChip,.3)},this),this.tabs.children.forEach((e,t)=>{e.on("toggle",()=>{this.onTabChanged(t)})})}onTabChanged(e){switch(this.tabContents.children.forEach((t,n)=>{t.active=n===e}),e){case 0:this.getListExchangeDeal();break;case 1:this.getHistory()}}setListExchangeDeal(e){this.rewardTabContent.children.forEach(e=>{e.active=!1,e.off("toggle")}),e.forEach((e,t)=>{let n=this.rewardTabContent.children[t];n||((n=cc.instantiate(this.rewardTabItem)).parent=this.rewardTabContent),n.active=!0,n.getComponentsInChildren(cc.Label).forEach(t=>{t.string=e.displayName}),n.on("toggle",()=>{this.rewardScroll.content.children.forEach(e=>{e.active=!1}),e.deals.forEach((e,t)=>{let n=this.rewardScroll.content.children[t];n||(n=cc.instantiate(this.rewardItem),this.rewardScroll.content.addChild(n)),n.active=!0;let r=n.getComponentsInChildren(cc.Label);r[0].string=`${u.default.formatNumber(e.chips)}`,r[1].string=`${u.default.formatNumber(e.price)}(${e.currency})`;let o=n.getComponentInChildren(cc.Button);o.node.off("click"),o.node.on("click",()=>{this.formInputDialog.showForm(e)})})}),0===t&&(n.getComponent(cc.Toggle).check(),n.emit("toggle"))})}setHistory(e){this.historyScroll.content.children.forEach(e=>{e.active=!1}),e.forEach((e,t)=>{let n=this.historyScroll.content.children[t];n||(n=cc.instantiate(this.historyItem),this.historyScroll.content.addChild(n)),n.active=!0;let r=n.getComponentsInChildren(cc.Label),o=new Date(1970,0,1);o.setSeconds(e.createTime),r[0].string=o+"",r[1].string=u.default.formatWalletNumber(e.chips),r[2].string=u.default.formatWalletNumber(e.price),r[3].string=e.cashId,r[4].string=p[e.status],r[4].node.color=cc.Color.fromHEX(new cc.Color,g[e.status]);let i=n.getComponentInChildren(cc.Button);"1"==e.status?(i.node.active=!0,i.node.off("click"),i.node.on("click",()=>{c.default.getInstance().confirmDialog.showMessage("Confirm to cancel?",()=>{d.default.getInstance().rpcCall(a.default.Network.RPC_ID.EXCHANGE_CANCEL,{id:e.id}).then(()=>{c.default.getInstance().alertDialog.showMessage("Cancel exchange success!"),this.getHistory(),this.getUserProfile()},()=>{c.default.getInstance().alertDialog.showMessage("Cancel exchange failed!")})})})):i.node.active=!1})}getListExchangeDeal(){d.default.getInstance().rpcCall(a.default.Network.RPC_ID.LIST_EXCHANGE_DEAL,{}).then(e=>{this.setListExchangeDeal(m.toExchangeCategorys(e.payload))},()=>{this.setListExchangeDeal([])})}getHistory(){d.default.getInstance().rpcCall(a.default.Network.RPC_ID.LIST_EXCHANGE,{}).then(e=>{this.setHistory(e.payload.exchangeInfos)},()=>{this.setHistory([])})}getUserProfile(){d.default.getInstance().rpcCall(a.default.Network.RPC_ID.GET_PROFILE,{}).then(e=>{l.default.init(e.payload),s.Broadcast.send(s.Broadcast.CHIP_CHANGED)},e=>{cc.log("err when get PROFILE ",e)})}};w.instance=null,o([b(cc.Node)],w.prototype,"tabs",void 0),o([b(cc.Node)],w.prototype,"tabContents",void 0),o([b(cc.Node)],w.prototype,"rewardTabContent",void 0),o([b(cc.Node)],w.prototype,"rewardTabItem",void 0),o([b(cc.ScrollView)],w.prototype,"rewardScroll",void 0),o([b(cc.Node)],w.prototype,"rewardItem",void 0),o([b(cc.ScrollView)],w.prototype,"historyScroll",void 0),o([b(cc.Node)],w.prototype,"historyItem",void 0),o([b(h.default)],w.prototype,"formInputDialog",void 0),o([b(cc.Label)],w.prototype,"lbAmoutChip",void 0),w=r=o([v],w),n.default=w,cc._RF.pop()},{"../../common/BaseDialog":"BaseDialog","../../common/Broadcast":"Broadcast","../../common/ConfigClient":"ConfigClient","../../common/GlobalApp":"GlobalApp","../../common/User":"User","../../common/Utils":"Utils","../../network/NetworkClient":"NetworkClient","./ExchangeFormInputDialog":"ExchangeFormInputDialog"}],ExchangeFormInputDialog:[function(e,t,n){"use strict";cc._RF.push(t,"64d75Jqef5GLbBT7b8utmmM","ExchangeFormInputDialog");var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});const o=e("../../common/BaseDialog"),i=e("../../common/ConfigClient"),s=e("../../common/GlobalApp"),a=e("../../network/NetworkClient"),c=e("./ExchangeDialog"),{ccclass:l,property:u}=cc._decorator;let d=class extends o.default{constructor(){super(...arguments),this.inputNumber=null,this.inputNumberConfirm=null,this.deal=null}showForm(e){super.show(),this.deal=e}resetForm(){this.inputNumber.string="",this.inputNumberConfirm.string=""}close(){super.close(),this.resetForm()}actConfirm(){this.inputNumber.string?this.inputNumber.string===this.inputNumberConfirm.string?s.default.getInstance().confirmDialog.showMessage("Confirm to exchange?",()=>{let e={id:this.deal.id,cash_type:this.deal.cashType,cash_id:this.inputNumber.string};a.default.getInstance().rpcCall(i.default.Network.RPC_ID.EXCHANGE_ADD,e).then(()=>{this.close(),c.default.getInstance().getUserProfile(),s.default.getInstance().alertDialog.showMessage("Add exchange request success!")},()=>{s.default.getInstance().alertDialog.showMessage("Add exchange request failed!")})}):s.default.getInstance().alertDialog.showMessage("Phone number not match!"):s.default.getInstance().alertDialog.showMessage("Phone number cannot be empty!")}};r([u(cc.EditBox)],d.prototype,"inputNumber",void 0),r([u(cc.EditBox)],d.prototype,"inputNumberConfirm",void 0),d=r([l],d),n.default=d,cc._RF.pop()},{"../../common/BaseDialog":"BaseDialog","../../common/ConfigClient":"ConfigClient","../../common/GlobalApp":"GlobalApp","../../network/NetworkClient":"NetworkClient","./ExchangeDialog":"ExchangeDialog"}],FreeChipsDialog:[function(e,t,n){"use strict";cc._RF.push(t,"a1fc0qoR89G3Y2l7jdmZQNH","FreeChipsDialog");var r,o=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});const i=e("../../common/BaseDialog"),s=e("../../common/Broadcast"),a=e("../../common/ConfigClient"),c=e("../../common/Constants"),l=e("../../common/GlobalApp"),u=e("../../common/User"),d=e("../../common/Utils"),h=e("../../lobby/LobbyController"),f=e("../../network/NetworkClient"),{ccclass:p,property:g}=cc._decorator;let m=r=class extends i.default{constructor(){super(...arguments),this.freeChipsScrollView=null,this.freeChipsItem=null}static getInstance(){return this.instance}static show(){null==this.instance||null==this.instance.node?l.default.getInstance().loadPrefabByMainBundle("res/prefabs/dialogs/FreeChipsDialog",(e,t)=>{if(null!=e)return void l.default.getInstance().alertDialog.showMessage(e);let n=cc.instantiate(t);n.parent=l.default.getInstance().dialogRootNode,this.instance=n.getComponent(r),this.instance.node.zIndex=1e3,this.instance.show()}):(this.instance.node.zIndex=1e3,this.instance.show())}show(){super.show(),this.getListClaimedFreeChips()}getListClaimedFreeChips(){l.default.getInstance().showProcessing(!0),f.default.getInstance().rpcCall(a.default.Network.RPC_ID.LIST_CLAIMABLE_FREECHIPS,{}).then(e=>{l.default.getInstance().showProcessing(!1),this.setListClaimableFreeChips(e.payload.freechips)},e=>{l.default.getInstance().showProcessing(!1),this.setListClaimableFreeChips([]),console.log("LIST_CLAIMABLE_FREECHIPS error ",e)})}setListClaimableFreeChips(e){this.freeChipsScrollView.content.children.forEach(e=>e.active=!1),this.freeChipsScrollView.scrollToLeft(),0===e.length&&this.readAllNotifications();for(let t=0;t<e.length;t++){let n=this.freeChipsScrollView.content.children[t];n||(n=cc.instantiate(this.freeChipsItem),this.freeChipsScrollView.content.addChild(n)),n.active=!0;let r=n.getComponentsInChildren(cc.Label);r[0].string=d.default.formatNumberToString(e[t].chips),"user_gift"===e[t].action?f.default.getInstance().getUsers([e[t].senderId],[],[]).then(e=>{console.log("user: ",e),r[1].string=`${e.users[0].username} sent you ${r[0].string} chips`},e=>{console.log("err get user: ",e)}):r[1].string=e[t].content;let o=n.getComponentInChildren(cc.Button);o.node.off("click"),o.node.on("click",()=>{l.default.getInstance().showProcessing(!0),f.default.getInstance().rpcCall(a.default.Network.RPC_ID.CLAIM_FREECHIP,e[t]).then(()=>{var e;l.default.getInstance().showProcessing(!1),null===(e=h.default.getInstance())||void 0===e||e.getFreeChipNotifications(),this.getUserProfile(),this.getListClaimedFreeChips(),l.default.getInstance().alertDialog.showMessage("Claim free chip success.")},e=>{console.log("CLAIM_FREECHIP error ",e),l.default.getInstance().showProcessing(!1),l.default.getInstance().alertDialog.showMessage("Claim free chip failed. "+JSON.stringify(e))})})}}getUserProfile(){f.default.getInstance().rpcCall(a.default.Network.RPC_ID.GET_PROFILE,{}).then(e=>{u.default.init(e.payload),s.Broadcast.send(s.Broadcast.CHIP_CHANGED)},e=>{console.log("err when get PROFILE ",e)})}readAllNotifications(){f.default.getInstance().rpcCall(a.default.Network.RPC_ID.READ_ALL_NOTIFICATION,{type:c.Notification.Enum.FREE_CHIP}).then(e=>{console.log("READ_ALL_NOTIFICATION data ",e)},e=>{console.log("READ_ALL_NOTIFICATION error ",e)})}};m.instance=null,o([g(cc.ScrollView)],m.prototype,"freeChipsScrollView",void 0),o([g(cc.Node)],m.prototype,"freeChipsItem",void 0),m=r=o([p],m),n.default=m,cc._RF.pop()},{"../../common/BaseDialog":"BaseDialog","../../common/Broadcast":"Broadcast","../../common/ConfigClient":"ConfigClient","../../common/Constants":"Constants","../../common/GlobalApp":"GlobalApp","../../common/User":"User","../../common/Utils":"Utils","../../lobby/LobbyController":"LobbyController","../../network/NetworkClient":"NetworkClient"}],GameListItem:[function(e,t,n){"use strict";cc._RF.push(t,"814c7QwvGJPj47vMtv5PhbG","GameListItem");var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});const o=e("../common/Constants"),{ccclass:i,property:s}=cc._decorator;let a=class extends cc.Component{constructor(){super(...arguments),this.animation=null,this.animationDatas=[],this.lbJackpot=null,this.gameInfo=null}init(e){this.gameInfo=e,e.code==o.Game.Enum.PUSOY?(this.lbJackpot.node.active=!0,this.lbJackpot.string=e.jp_chips):this.lbJackpot.node.active=!1,this.node.width=e.width,this.node.height=e.height,this.animation.skeletonData=this.animationDatas[e.animationIndex],this.animation.animation=e.animation,this.animation.node.x=e.spineX,this.animation.node.y=e.spineY}};r([s(sp.Skeleton)],a.prototype,"animation",void 0),r([s([sp.SkeletonData])],a.prototype,"animationDatas",void 0),r([s(cc.Label)],a.prototype,"lbJackpot",void 0),a=r([i],a),n.default=a,cc._RF.pop()},{"../common/Constants":"Constants"}],GameList:[function(e,t,n){"use strict";cc._RF.push(t,"bbe89Rg2GFNQ6VoyJoX7Lg0","GameList");var r,o=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});const i=e("../common/Broadcast"),s=e("../common/ConfigClient"),a=e("../common/Constants"),c=e("../common/GlobalApp"),l=e("../common/User"),u=e("../common/Utils"),d=e("../dialogs/banner/BannerDialog"),h=e("../dialogs/profile/ProfileDialog"),f=e("../dialogs/shop/ShopDialog"),p=e("../game/GamePresenter"),g=e("../language/LanguageController"),m=e("../network/NetworkClient"),v=e("./GameListItem"),b=e("./TableList"),w=[{code:a.Game.Enum.PUSOY,gameType:a.GameType.Enum.TABLE_GAME,animation:"animation",animationIndex:3,width:280,height:190,spineX:140,spineY:0},{code:a.Game.Enum.KARTU_QIU,gameType:a.GameType.Enum.TABLE_GAME,animation:"animation",animationIndex:9,width:280,height:190,spineX:140,spineY:0},{code:a.Game.Enum.BLACKJACK,gameType:a.GameType.Enum.TABLE_GAME,animation:"animation",animationIndex:2,width:280,height:190,spineX:140,spineY:0},{code:a.Game.Enum.DRAGON_TIGER,gameType:a.GameType.Enum.TABLE_GAME,animation:"eng",animationIndex:4,width:280,height:190,spineX:140,spineY:12},{code:a.Game.Enum.BACCARAT,gameType:a.GameType.Enum.TABLE_GAME,animation:"animation",animationIndex:0,width:280,height:190,spineX:140,spineY:0},{code:a.Game.Enum.SICBO,gameType:a.GameType.Enum.TABLE_GAME,animation:"eng",animationIndex:11,width:280,height:190,spineX:140,spineY:0},{code:a.Game.Enum.TONGITS,gameType:a.GameType.Enum.TABLE_GAME,animation:"animation",animationIndex:14,width:280,height:190,spineX:140,spineY:0},{code:a.Game.Enum.SIXIANG,gameType:a.GameType.Enum.SLOT_GAME,animation:"animation",animationIndex:12,width:180,height:390,spineX:126.25,spineY:0},{code:a.Game.Enum.TARZAN,gameType:a.GameType.Enum.SLOT_GAME,animation:"animation",animationIndex:13,width:252.5,height:390,spineX:126.25,spineY:0},{code:a.Game.Enum.JUICY_GARDEN,gameType:a.GameType.Enum.SLOT_GAME,animation:"animation",animationIndex:8,width:180,height:390,spineX:126.25,spineY:0},{code:a.Game.Enum.FRUIT,gameType:a.GameType.Enum.SLOT_GAME,animation:"eng",animationIndex:5,width:252.5,height:390,spineX:126.25,spineY:0},{code:a.Game.Enum.INCA,gameType:a.GameType.Enum.SLOT_GAME,animation:"animation",animationIndex:7,width:180,height:390,spineX:126.25,spineY:0},{code:a.Game.Enum.NOEL,gameType:a.GameType.Enum.SLOT_GAME,animation:"animation",animationIndex:10,width:252.5,height:390,spineX:126.25,spineY:0}],{ccclass:y,property:_}=cc._decorator;let C=r=class extends cc.Component{constructor(){super(...arguments),this.scrollview=null,this.gameItem=null,this.lbGameType=null,this.lbUserId=null,this.lbUserName=null,this.lbUserChips=null,this.lbUserBank=null,this.spUserAvatar=null,this.spUserBorderAvatar=null,this.animationButtonSwitchGameType=null,this.btnarrow=null}static getInstance(){return this.instance}onLoad(){r.instance=this}start(){i.Broadcast.register(i.Broadcast.CHIP_CHANGED,()=>{u.default.runNumber(this.lbUserChips,l.default.accountChip,.3),u.default.runNumber(this.lbUserBank,l.default.bankChip,.3)},this),i.Broadcast.register(i.Broadcast.DISPLAY_NAME_CHANGED,()=>{let e=l.default.displayName;this.lbUserName.string=e.length>17?e.substring(0,14)+"...":e},this),i.Broadcast.register(i.Broadcast.AVATAR_CHANGED,()=>{this.spUserAvatar.spriteFrame=c.default.getInstance().getAvatarById(l.default.avatarId)},this),i.Broadcast.register(i.Broadcast.VIP_CHANGED,()=>{this.spUserBorderAvatar.spriteFrame=c.default.getInstance().getAvatarBorderByVip(l.default.vipLevel)},this),this.getListGames(),this.setDisplayGameType(),this.setProfileData()}setGameType(e){this.gameType=e}setGameTypeByGameCode(e){this.gameType=w.find(t=>t.code===e).gameType}setDisplayGameType(){this.lbGameType.string=a.GameType.getDisplayName(this.gameType),this.animationButtonSwitchGameType.animation=this.gameType==a.GameType.Enum.SLOT_GAME?"text_Table_game":"text_Slots_game"}getListGames(){this.scrollview.content.destroyAllChildren(),c.default.getInstance().showProcessing(!0),m.default.getInstance().rpcCall(s.default.Network.RPC_ID.LIST_GAME,{}).then(e=>{c.default.getInstance().showProcessing(!1),this.scrollview.content.getComponent(cc.Layout).type=this.gameType===a.GameType.Enum.TABLE_GAME?cc.Layout.Type.GRID:cc.Layout.Type.HORIZONTAL,this.scrollview.content.getComponent(cc.Layout).paddingRight=this.gameType===a.GameType.Enum.TABLE_GAME?300:60;let t=e.payload.games||[];w.forEach(e=>{const n=t.findIndex(t=>t.code===e.code&&e.gameType===this.gameType);if(n>-1){let r=cc.instantiate(this.gameItem);r.getComponent(v.default).init(Object.assign(e,t[n])),r.on("click",()=>{this.actionGame(e.code)}),this.scrollview.content.addChild(r)}}),this.scrollview.scrollToLeft(.5)},()=>{c.default.getInstance().showProcessing(!1)})}setProfileData(){i.Broadcast.send(i.Broadcast.CHIP_CHANGED),i.Broadcast.send(i.Broadcast.DISPLAY_NAME_CHANGED),i.Broadcast.send(i.Broadcast.AVATAR_CHANGED),i.Broadcast.send(i.Broadcast.VIP_CHANGED),this.lbUserId.string="ID: "+l.default.userSid}actionSwitchGameType(){this.setGameType(this.gameType===a.GameType.Enum.SLOT_GAME?a.GameType.Enum.TABLE_GAME:a.GameType.Enum.SLOT_GAME),this.getListGames(),this.setDisplayGameType()}quickPlay(e){l.default.accountChip<=0?c.default.getInstance().alertDialog.showMessage(g.default.getInstance().getString("txt_not_enough_money_gl"),()=>{this.actionShop()}):(c.default.getInstance().showProcessing(!0),m.default.getInstance().rpcCall(s.default.Network.RPC_ID.LIST_BET,{code:e}).then(t=>{var n;c.default.getInstance().showProcessing(!1),c.default.getInstance().gameCode=e,p.default.joinMatch(e,Number(null===(n=t.payload.bets[0])||void 0===n?void 0:n.markUnit)),d.BannerData.setBannerData(a.Banner.ShowType.CHOOSE_GAME,!0)},e=>{cc.log("err when get list bet",e),c.default.getInstance().showProcessing(!1)}))}actionGame(e){if(l.default.vipLevel&&0!=l.default.vipLevel){switch(e){case a.Game.Enum.PUSOY:case a.Game.Enum.BANDAQQ:case a.Game.Enum.DRAGON_TIGER:case a.Game.Enum.SICBO:case a.Game.Enum.BACCARAT:case a.Game.Enum.BLACKJACK:case a.Game.Enum.GAPLE:case a.Game.Enum.TONGITS:return c.default.getInstance().gameCode=e,void c.default.getInstance().loadSceneByBundle(s.default.Bundle.BUNDLE_NAME.LOBBY,s.default.AppInfo.SCENE_NAME.TABLELIST,()=>{var t;null===(t=b.default.getInstance())||void 0===t||t.setGameCode(e)});default:p.default.joinMatch(e,0)}d.BannerData.setBannerData(a.Banner.ShowType.CHOOSE_GAME,!0)}else this.quickPlay(e)}onScroll(e){this.btnarrow.active=e.getScrollOffset().x<-10}scrollToLeft(){this.scrollview.scrollToLeft(),this.btnarrow.active=!1}actionBack(){c.default.getInstance().loadSceneByBundle(s.default.Bundle.BUNDLE_NAME.LOBBY,s.default.AppInfo.SCENE_NAME.LOBBY)}actionShop(){f.default.show()}actionProfile(){h.default.show()}};C.instance=null,o([_(cc.ScrollView)],C.prototype,"scrollview",void 0),o([_(cc.Prefab)],C.prototype,"gameItem",void 0),o([_(cc.Label)],C.prototype,"lbGameType",void 0),o([_(cc.Label)],C.prototype,"lbUserId",void 0),o([_(cc.Label)],C.prototype,"lbUserName",void 0),o([_(cc.Label)],C.prototype,"lbUserChips",void 0),o([_(cc.Label)],C.prototype,"lbUserBank",void 0),o([_(cc.Sprite)],C.prototype,"spUserAvatar",void 0),o([_(cc.Sprite)],C.prototype,"spUserBorderAvatar",void 0),o([_(sp.Skeleton)],C.prototype,"animationButtonSwitchGameType",void 0),o([_(cc.Node)],C.prototype,"btnarrow",void 0),C=r=o([y],C),n.default=C,cc._RF.pop()},{"../common/Broadcast":"Broadcast","../common/ConfigClient":"ConfigClient","../common/Constants":"Constants","../common/GlobalApp":"GlobalApp","../common/User":"User","../common/Utils":"Utils","../dialogs/banner/BannerDialog":"BannerDialog","../dialogs/profile/ProfileDialog":"ProfileDialog","../dialogs/shop/ShopDialog":"ShopDialog","../game/GamePresenter":"GamePresenter","../language/LanguageController":"LanguageController","../network/NetworkClient":"NetworkClient","./GameListItem":"GameListItem","./TableList":"TableList"}],GamePresenter:[function(e,t,n){"use strict";cc._RF.push(t,"a870c0Vb4RA9b0g+iYNkBd3","GamePresenter"),Object.defineProperty(n,"__esModule",{value:!0});const r=e("../common/ConfigClient"),o=e("../common/GlobalApp"),i=e("../common/User"),s=e("../language/LanguageController"),a=e("../network/NetworkClient");n.default=class{static createMatch(e,t){a.default.getInstance().rpcCall(r.default.Network.RPC_ID.CREATE_MATCH,{mark_unit:t,game_code:e}).then(t=>{let n=t.payload.matchId;n&&a.default.getInstance().joinMatch(n).then(t=>{o.default.getInstance().openGame(e,()=>{o.default.getInstance().matchInfo=t})},e=>{console.log("err when join match",e),o.default.getInstance().alertDialog.showMessage(s.default.getInstance().getString("err_table_when_join"))})},e=>{console.log("err when create match",e),o.default.getInstance().showProcessing(!1)})}static joinMatch(e,t){o.default.getInstance().showProcessing(!0),a.default.getInstance().rpcCall(r.default.Network.RPC_ID.FIND_MATCH,{mark_unit:t,game_code:e,with_non_open:!1,create:!0}).then(n=>{let r=n.payload.matches[0];r?a.default.getInstance().joinMatch(r.matchId).then(t=>{o.default.getInstance().openGame(e,()=>{o.default.getInstance().matchInfo=t})},e=>{console.log("err when join match",e),o.default.getInstance().alertDialog.showMessage(s.default.getInstance().getString("err_table_when_join"))}):this.createMatch(e,t)},n=>{console.log("err when find match",n),this.createMatch(e,t)})}static reloadMatch(e){o.default.getInstance().showProcessing(!0),a.default.getInstance().joinMatch(e.match_id).then(e=>{o.default.getInstance().showProcessing(!1),o.default.getInstance().matchInfo=e},e=>{console.log("err when join match",e),o.default.getInstance().showProcessing(!1),o.default.getInstance().alertDialog.showMessage(s.default.getInstance().getString("err_table_when_join"))})}static changeMatch(e,t){let n=e=>{a.default.getInstance().rpcCall(r.default.Network.RPC_ID.CREATE_MATCH,{mark_unit:e,game_code:o.default.getInstance().gameCode}).then(e=>{let t=e.payload.matchId;a.default.getInstance().joinMatch(t).then(e=>{o.default.getInstance().showProcessing(!1),o.default.getInstance().matchInfo=e},e=>{console.log("err when join match",e),o.default.getInstance().showProcessing(!1),o.default.getInstance().alertDialog.showMessage(s.default.getInstance().getString("err_table_when_join"))})},e=>{console.log("err when create match",e),o.default.getInstance().showProcessing(!1)})};o.default.getInstance().showProcessing(!0),a.default.getInstance().rpcCall(r.default.Network.RPC_ID.FIND_MATCH,{mark_unit:e,game_code:o.default.getInstance().gameCode,with_non_open:!1,create:!0}).then(r=>{var i;let c=null===(i=r.payload.matches)||void 0===i?void 0:i.find(e=>e.matchId!=t.match_id);c?a.default.getInstance().joinMatch(c.matchId).then(e=>{o.default.getInstance().showProcessing(!1),o.default.getInstance().matchInfo=e},e=>{console.log("err when join match",e),o.default.getInstance().showProcessing(!1),o.default.getInstance().alertDialog.showMessage(s.default.getInstance().getString("err_table_when_join"))}):n(e)},t=>{console.log("err when find match",t),n(e)})}static syncTable(){a.default.getInstance().sendMatchState(o.default.getInstance().matchInfo.match_id,r.default.Network.OP_CODE_REQUEST.OPCODE_REQUEST_SYNC_TABLE,{}).then(()=>{console.log("syncTable success")},e=>{console.log("syncTable err",e)})}static loadUserData(){a.default.getInstance().rpcCall(r.default.Network.RPC_ID.GET_PROFILE,{}).then(e=>{i.default.init(e.payload)},e=>{console.log("err when get PROFILE ",e)})}static loadListBet(){a.default.getInstance().rpcCall(r.default.Network.RPC_ID.LIST_BET,{code:o.default.getInstance().gameCode}).then(()=>{},e=>{console.log("err when get list bet",e)})}},cc._RF.pop()},{"../common/ConfigClient":"ConfigClient","../common/GlobalApp":"GlobalApp","../common/User":"User","../language/LanguageController":"LanguageController","../network/NetworkClient":"NetworkClient"}],GiftCodeDialog:[function(e,t,n){"use strict";cc._RF.push(t,"333055o1ApI95pHQcEYQasH","GiftCodeDialog");var r,o=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});const i=e("../../network/NetworkClient"),s=e("../../common/ConfigClient"),a=e("../../common/Constants"),c=e("../../common/BaseDialog"),l=e("../../common/GlobalApp"),u=e("../../common/User"),d=e("../../common/Broadcast"),h=e("../../language/LanguageController"),{ccclass:f,property:p}=cc._decorator;let g=r=class extends c.default{constructor(){super(...arguments),this.edbCode=null}static getInstance(){return this.instance}static show(){null==this.instance||null==this.instance.node?l.default.getInstance().loadPrefabByMainBundle("res/prefabs/dialogs/GiftCodeDialog",(e,t)=>{if(null!=e)return void l.default.getInstance().alertDialog.showMessage(e);let n=cc.instantiate(t);n.parent=l.default.getInstance().dialogRootNode,this.instance=n.getComponent(r),this.instance.node.zIndex=1e3,this.instance.show()}):(this.instance.node.zIndex=1e3,this.instance.show())}show(){super.show(),this.edbCode.string=""}actionSubmit(){""!==this.edbCode.string&&(l.default.getInstance().showProcessing(!0),i.default.getInstance().rpcCall(s.default.Network.RPC_ID.GIFT_CODE_CLAIM,{code:this.edbCode.string}).then(e=>{switch(l.default.getInstance().showProcessing(!1),cc.log(e.payload),e.payload.errCode){case a.GiftCode.ErrorCode.NOT_OPEN:l.default.getInstance().alertDialog.showMessage(h.default.getInstance().getString("txt_gift_code_error_1"));break;case a.GiftCode.ErrorCode.HAS_CLOSED:l.default.getInstance().alertDialog.showMessage(h.default.getInstance().getString("txt_gift_code_error_2"));break;case a.GiftCode.ErrorCode.REACH_MAX_CLAIMED:l.default.getInstance().alertDialog.showMessage(h.default.getInstance().getString("txt_gift_code_error_3"));break;case a.GiftCode.ErrorCode.ALREADY_CLAIMED:l.default.getInstance().alertDialog.showMessage(h.default.getInstance().getString("txt_gift_code_error_4"));break;case a.GiftCode.ErrorCode.LV_VIP_NOT_MET_REQUIRE:l.default.getInstance().alertDialog.showMessage(h.default.getInstance().getString("txt_gift_code_error_5"));break;default:l.default.getInstance().alertDialog.showMessage(e.payload.message)}this.getUserProfile()},e=>{l.default.getInstance().showProcessing(!1),cc.log("claim gift code error",e),l.default.getInstance().alertDialog.showMessage(h.default.getInstance().getString("txt_gift_code_error_6"))}),this.edbCode.string="")}getUserProfile(){i.default.getInstance().rpcCall(s.default.Network.RPC_ID.GET_PROFILE,{}).then(e=>{u.default.init(e.payload),d.Broadcast.send(d.Broadcast.CHIP_CHANGED)},e=>{cc.log("err when get PROFILE ",e)})}};g.instance=null,o([p(cc.EditBox)],g.prototype,"edbCode",void 0),g=r=o([f],g),n.default=g,cc._RF.pop()},{"../../common/BaseDialog":"BaseDialog","../../common/Broadcast":"Broadcast","../../common/ConfigClient":"ConfigClient","../../common/Constants":"Constants","../../common/GlobalApp":"GlobalApp","../../common/User":"User","../../language/LanguageController":"LanguageController","../../network/NetworkClient":"NetworkClient"}],GlobalApp:[function(e,t,n){"use strict";cc._RF.push(t,"4384adNfQ1FC7Dj2D7MRQSV","GlobalApp");var r,o=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});const i=e("../hotnews/HotNews"),s=e("./AlertDialog"),a=e("./ConfigClient"),c=e("./ConfirmDialog"),l=e("./Constants"),u=e("./Processing"),d=e("./Toast"),{ccclass:h,property:f}=cc._decorator;let p=r=class extends cc.Component{constructor(){super(...arguments),this.processing=null,this.gameRootNode=null,this.dialogRootNode=null,this.alertDialog=null,this.confirmDialog=null,this.toast=null,this.hotNews=null,this.avatarAtlas=null,this.avatarBorderAtlas=null,this.isFreeChipLoaded=!1}static getInstance(){return this.instance}onLoad(){null==r.instance?(r.instance=this,cc.game.addPersistRootNode(r.instance.node)):this.node.destroy()}showProcessing(e){this.processing.show(e)}showProcessingWithMessage(e){this.processing.showWithMessage(e)}loadScene(e,t){e!==cc.director.getScene().name&&cc.director.preloadScene(e,(e,t)=>{this.showProcessingWithMessage(`Loading ${Math.round(e/t*100)}%`)},()=>{this.showProcessing(!1),cc.director.loadScene(e,()=>{t&&t()})})}loadSceneByBundle(e,t,n){this.showProcessing(!0),cc.assetManager.loadBundle(cc.sys.isNative?a.default.Bundle.url+e:e,{version:cc.sys.isNative?a.default.Bundle.bundles[e]:""},(e,r)=>{e?this.showProcessing(!1):r.preloadScene(t,(e,t)=>{this.showProcessingWithMessage(`Loading ${parseInt(""+e/t*100)} %`)},e=>{e?this.showProcessing(!1):r.loadScene(t,(e,t)=>{this.showProcessing(!1),e||cc.director.runScene(t,null,()=>{n&&n()})})})})}loadSceneByMainBundle(e,t){this.showProcessing(!0);let n=cc.assetManager.getBundle(a.default.Bundle.BUNDLE_NAME.LOBBY);n.preloadScene(e,(e,t)=>{this.showProcessingWithMessage(`Loading ${parseInt(""+e/t*100)} %`)},r=>{r?this.showProcessing(!1):n.loadScene(e,(e,n)=>{this.showProcessing(!1),e||cc.director.runScene(n,null,()=>{t&&t()})})})}loadPrefabByBundle(e,t,n){this.showProcessing(!0),cc.assetManager.loadBundle(cc.sys.isNative?a.default.Bundle.url+e:e,{version:cc.sys.isNative?a.default.Bundle.bundles[e]:""},(e,r)=>{this.showProcessing(!1),e?cc.log(JSON.stringify(e.message)):r.load(t,cc.Prefab,(e,t)=>{this.showProcessingWithMessage(`Loading ${parseInt(""+e/t*100)} %`)},(e,t)=>{this.showProcessing(!1),n(null==e?null:e.message,t)})})}loadPrefabByMainBundle(e,t){this.showProcessingWithMessage("Loading..."),cc.assetManager.getBundle(a.default.Bundle.BUNDLE_NAME.LOBBY).load(e,cc.Prefab,(e,t)=>{this.showProcessingWithMessage(`Loading ${parseInt(""+e/t*100)} %`)},(e,n)=>{this.showProcessing(!1),t(null==e?null:e.message,n)})}openGame(e,t){r.instance.loadPrefabByBundle(l.Game.Info[e].bundleName,l.Game.Info[e].urlAsset,(e,n)=>{e?cc.log(e):(cc.instantiate(n).parent=this.gameRootNode,t&&t())})}getAvatarById(e){return this.avatarAtlas.getSpriteFrame(e)||this.avatarAtlas.getSpriteFrame("1")}getAvatarBorderByVip(e){let t=0;switch(e){case 0:case 1:case 2:t=0;break;case 3:case 4:t=1;break;case 5:case 6:t=2;break;case 7:case 8:t=3;break;default:t=4}return this.avatarBorderAtlas.getSpriteFrame("v"+t)}};p.instance=null,o([f(u.default)],p.prototype,"processing",void 0),o([f(cc.Node)],p.prototype,"gameRootNode",void 0),o([f(cc.Node)],p.prototype,"dialogRootNode",void 0),o([f(s.default)],p.prototype,"alertDialog",void 0),o([f(c.default)],p.prototype,"confirmDialog",void 0),o([f(d.default)],p.prototype,"toast",void 0),o([f(i.default)],p.prototype,"hotNews",void 0),o([f(cc.SpriteAtlas)],p.prototype,"avatarAtlas",void 0),o([f(cc.SpriteAtlas)],p.prototype,"avatarBorderAtlas",void 0),p=r=o([h],p),n.default=p,cc._RF.pop()},{"../hotnews/HotNews":"HotNews","./AlertDialog":"AlertDialog","./ConfigClient":"ConfigClient","./ConfirmDialog":"ConfirmDialog","./Constants":"Constants","./Processing":"Processing","./Toast":"Toast"}],HotNews:[function(e,t,n){"use strict";cc._RF.push(t,"bf3a7c0LJVHK4WF2LJ+/pwq","HotNews");var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});const o=e("../common/ConfigClient"),i=e("../common/Constants"),s=e("../network/NetworkClient"),{ccclass:a,property:c}=cc._decorator;let l=class extends cc.Component{constructor(){super(...arguments),this.lbHotNews=null,this.newsMarquee=""}startHotNews(){this.newsMarquee||(this.node.active=!0,this.getHotNews())}stopHotNews(){cc.Tween.stopAllByTarget(this.lbHotNews.node),this.node.active=!1,this.newsMarquee=""}getHotNews(){s.default.getInstance().rpcCall(o.default.Network.RPC_ID.LIST_IN_APP_MESSAGE,{type:i.InAppMessage.MessageType.HOT_NEWS}).then(e=>{this.setHotNews(e)},()=>{this.setHotNews(null)})}setHotNews(e){var t,n;if(!e)return;const r=e.payload.inAppMessages;this.newsMarquee="";for(let o=0;o<r.length;o++)this.newsMarquee+=null===(n=null===(t=r[o].data)||void 0===t?void 0:t.params)||void 0===n?void 0:n.content,o<r.length-1&&(this.newsMarquee+="        ");this.lbHotNews.string=this.newsMarquee,this.lbHotNews.node.x=cc.winSize.width/2+50,this.move()}move(){cc.tween(this.lbHotNews.node).by(.4,{x:-50}).call(()=>{if(this.lbHotNews.node.x<-this.lbHotNews.node.width-cc.winSize.width/2-50)return cc.Tween.stopAllByTarget(this.lbHotNews.node),void this.getHotNews();this.move()}).start()}};r([c(cc.Label)],l.prototype,"lbHotNews",void 0),l=r([a],l),n.default=l,cc._RF.pop()},{"../common/ConfigClient":"ConfigClient","../common/Constants":"Constants","../network/NetworkClient":"NetworkClient"}],HttpClient:[function(e,t,n){"use strict";cc._RF.push(t,"3aa23kcrW5LV5BuNmYqbjIH","HttpClient");var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function s(e){try{c(r.next(e))}catch(t){i(t)}}function a(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(n,"__esModule",{value:!0});class o{static post(e,t,n={}){return r(this,void 0,void 0,function*(){const r={method:"POST",headers:Object.assign(Object.assign({},this.DEFAULT_HEADERS),n.headers)};return t&&(r.body=JSON.stringify(t)),this.makeRequest(e,r,n.timeout)})}static get(e,t,n={}){return r(this,void 0,void 0,function*(){const r=this.buildUrlWithParams(e,t),o={method:"GET",headers:Object.assign({},n.headers)};return this.makeRequest(r,o,n.timeout)})}static put(e,t,n={}){return r(this,void 0,void 0,function*(){const r={method:"PUT",headers:Object.assign(Object.assign({},this.DEFAULT_HEADERS),n.headers)};return t&&(r.body=JSON.stringify(t)),this.makeRequest(e,r,n.timeout)})}static delete(e,t={}){return r(this,void 0,void 0,function*(){const n={method:"DELETE",headers:Object.assign({},t.headers)};return this.makeRequest(e,n,t.timeout)})}static buildUrlWithParams(e,t){if(!t||0===Object.keys(t).length)return e;const n=new URLSearchParams;Object.entries(t).forEach(([e,t])=>{null!=t&&n.append(e,String(t))});const r=n.toString();return r?`${e}?${r}`:e}static makeRequest(e,t,n=this.DEFAULT_TIMEOUT){return r(this,void 0,void 0,function*(){const r=new AbortController,o=setTimeout(()=>r.abort(),n);try{const s=yield fetch(e,Object.assign(Object.assign({},t),{signal:r.signal}));if(clearTimeout(o),!s.ok){const e=`HTTP Error: ${s.status} ${s.statusText}`;throw cc.error(e),new Error(e)}return{data:yield s.json(),status:s.status,statusText:s.statusText}}catch(i){if(clearTimeout(o),"AbortError"===i.name){const e=new Error(`Request timeout after ${n}ms`);throw cc.error("Request timeout:",e),e}throw i}})}}n.default=o,o.DEFAULT_TIMEOUT=1e4,o.DEFAULT_HEADERS={"Content-Type":"application/json"},cc._RF.pop()},{}],IAPExample:[function(e,t,n){"use strict";cc._RF.push(t,"31a3e8DwpJNqbTdQgg0ymb0","IAPExample"),Object.defineProperty(n,"__esModule",{value:!0}),n.IAPExample=void 0;const r=e("./Utils");class o{static initialize(){console.log("Initializing in-app purchases..."),this.setupEventListeners(),this.loadProducts(),this.loadPurchases()}static setupEventListeners(){cc.systemEvent.on("billing-setup-result",this.onBillingSetupResult,this),cc.systemEvent.on("purchase-result",this.onPurchaseResult,this),cc.systemEvent.on("products-result",this.onProductsResult,this),cc.systemEvent.on("purchases-result",this.onPurchasesResult,this)}static onBillingSetupResult(e){console.log("Billing setup result:",e.success,e.message),e.success?console.log("Google Play Billing is ready"):console.error("Google Play Billing setup failed:",e.message)}static onPurchaseResult(e){console.log("Purchase result:",e.success,e.message),e.success&&e.purchase?(console.log("Purchase successful:",e.purchase.productId),this.grantPurchasedItem(e.purchase),this.loadPurchases()):console.error("Purchase failed:",e.message)}static onProductsResult(e){console.log("Products result:",e.success,e.message),e.success?(this.availableProducts=e.products,console.log("Available products:",this.availableProducts)):console.error("Products query failed:",e.message)}static onPurchasesResult(e){console.log("Purchases result:",e.success,e.message),e.success?(this.userPurchases=e.purchases,console.log("User purchases:",this.userPurchases)):console.error("Purchases query failed:",e.message)}static loadProducts(){const e=Object.values(this.PRODUCT_IDS);r.default.queryProducts(e)}static loadPurchases(){r.default.queryPurchases()}static purchaseProduct(e){console.log("Purchasing product:",e);const t=this.isConsumableProduct(e);r.default.purchaseItem(e,t)}static isProductOwned(e){return this.userPurchases.some(t=>t.productId===e)}static getProductDetails(e){return this.availableProducts.find(t=>t.productId===e)||null}static isConsumableProduct(e){return e.includes("coin_pack")}static grantPurchasedItem(e){const t=e.productId;switch(t){case this.PRODUCT_IDS.COIN_PACK_SMALL:this.addCoins(100);break;case this.PRODUCT_IDS.COIN_PACK_MEDIUM:this.addCoins(500);break;case this.PRODUCT_IDS.COIN_PACK_LARGE:this.addCoins(1e3);break;case this.PRODUCT_IDS.REMOVE_ADS:this.setRemoveAds(!0);break;case this.PRODUCT_IDS.VIP_MEMBERSHIP:this.setVipMembership(!0);break;default:console.warn("Unknown product ID:",t)}}static addCoins(e){console.log("Adding coins:",e)}static setRemoveAds(e){console.log("Setting remove ads:",e)}static setVipMembership(e){console.log("Setting VIP membership:",e)}static exampleUsage(){this.initialize()}}n.IAPExample=o,o.PRODUCT_IDS={COIN_PACK_SMALL:"com.ciaolink.cgpapp.coin_pack_small",COIN_PACK_MEDIUM:"com.ciaolink.cgpapp.coin_pack_medium",COIN_PACK_LARGE:"com.ciaolink.cgpapp.coin_pack_large",REMOVE_ADS:"com.ciaolink.cgpapp.remove_ads",VIP_MEMBERSHIP:"com.ciaolink.cgpapp.vip_membership"},o.availableProducts=[],o.userPurchases=[],cc._RF.pop()},{"./Utils":"Utils"}],JackpotDialog:[function(e,t,n){"use strict";cc._RF.push(t,"be4ba/0Z+JBrYyQjGu5ttKi","JackpotDialog");var r,o=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});const i=e("../../common/BaseDialog"),s=e("../../common/GlobalApp"),{ccclass:a,property:c}=cc._decorator;let l=r=class extends i.default{constructor(){super(...arguments),this.tabs=null,this.tabContents=null,this.historyScrollView=null,this.historyItem=null}static getInstance(){return this.instance}static show(){null==this.instance||null==this.instance.node?s.default.getInstance().loadPrefabByMainBundle("res/prefabs/dialogs/JackpotDialog",(e,t)=>{if(null!=e)return void s.default.getInstance().alertDialog.showMessage(e);let n=cc.instantiate(t);n.parent=s.default.getInstance().dialogRootNode,this.instance=n.getComponent(r),this.instance.node.zIndex=1e3,this.instance.show()}):(this.instance.node.zIndex=1e3,this.instance.show())}show(){super.show(),this.tabs.children[0].getComponent(cc.Toggle).isChecked=!0,this.tabChanged(0)}start(){for(let e=0;e<this.tabs.children.length;e++)this.tabs.children[e].on("toggle",()=>{this.tabChanged(e)})}tabChanged(e){switch(this.tabContents.children.forEach((t,n)=>{t.active=n==e}),e){case 0:this.getJackpotRank();break;case 1:this.getJackpotHistory()}}getJackpotRank(){}getJackpotHistory(){}};l.instance=null,o([c(cc.Node)],l.prototype,"tabs",void 0),o([c(cc.Node)],l.prototype,"tabContents",void 0),o([c(cc.ScrollView)],l.prototype,"historyScrollView",void 0),o([c(cc.Node)],l.prototype,"historyItem",void 0),l=r=o([a],l),n.default=l,cc._RF.pop()},{"../../common/BaseDialog":"BaseDialog","../../common/GlobalApp":"GlobalApp"}],LanguageController:[function(e,t,n){"use strict";cc._RF.push(t,"39172s79ShHcoCEy2MrFdED","LanguageController");var r,o=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});const i=e("../common/Constants"),s=e("../common/SPUtils"),{ccclass:a,property:c}=cc._decorator;let l=r=class extends cc.Component{constructor(){super(...arguments),this.jsonEn=null,this.jsonPh=null,this.languageCode=i.Language.Enum.PH,this.texts={},this.listeners=[]}static getInstance(){return this.instance}onLoad(){null==r.instance?(r.instance=this,cc.game.addPersistRootNode(r.instance.node)):this.node.destroy()}start(){this.setLanguage(s.default.getLanguageCode()||this.languageCode)}setLanguage(e){switch(this.languageCode=e,s.default.setLanguageCode(e),this.languageCode){case i.Language.Enum.EN:this.texts=this.jsonEn.json;break;case i.Language.Enum.PH:this.texts=this.jsonPh.json}for(var t=0;t<this.listeners.length;t++){var n=this.listeners[t];n.target&&n.target instanceof Object&&n.target.node?n.callback(e):(this.listeners.splice(t,1),t--)}}addListener(e,t){this.listeners.push({callback:e,target:t})}getString(e){return this.texts.hasOwnProperty(e)?this.texts[e]:e}};l.instance=null,o([c(cc.JsonAsset)],l.prototype,"jsonEn",void 0),o([c(cc.JsonAsset)],l.prototype,"jsonPh",void 0),l=r=o([a],l),n.default=l,cc._RF.pop()},{"../common/Constants":"Constants","../common/SPUtils":"SPUtils"}],LanguageLabel:[function(e,t,n){"use strict";cc._RF.push(t,"e6b19/4ESVPPIIAcSZv+InF","LanguageLabel");var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});const o=e("./LanguageController"),{ccclass:i,property:s}=cc._decorator;let a=class extends cc.Component{constructor(){super(...arguments),this.id=""}start(){o.default.getInstance().addListener(()=>{this.updateText()},this),this.updateText()}updateText(){let e=o.default.getInstance().getString(this.id);null!=e&&0==e.trim().length||(this.getComponent(cc.Label).string=e)}};r([s],a.prototype,"id",void 0),a=r([i],a),n.default=a,cc._RF.pop()},{"./LanguageController":"LanguageController"}],LanguageSkeleton:[function(e,t,n){"use strict";cc._RF.push(t,"408528jHNlGK4NESqGAAyia","LanguageSkeleton");var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});const{ccclass:o,property:i}=cc._decorator;let s=class extends cc.Component{constructor(){super(...arguments),this.label=null,this.text="hello"}start(){}};r([i(cc.Label)],s.prototype,"label",void 0),r([i],s.prototype,"text",void 0),s=r([o],s),n.default=s,cc._RF.pop()},{}],LanguageSprite:[function(e,t,n){"use strict";cc._RF.push(t,"01480Sx95hH1aZNNyKx8EXL","LanguageSprite");var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});const{ccclass:o,property:i}=cc._decorator;let s=class extends cc.Component{constructor(){super(...arguments),this.label=null,this.text="hello"}start(){}};r([i(cc.Label)],s.prototype,"label",void 0),r([i],s.prototype,"text",void 0),s=r([o],s),n.default=s,cc._RF.pop()},{}],LeaderBoardDialog:[function(e,t,n){"use strict";cc._RF.push(t,"1cbd2DWSjFN3bXcvuytSZ6t","LeaderBoardDialog");var r,o=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});const i=e("../../common/BaseDialog"),s=e("../../common/ConfigClient"),a=e("../../common/Constants"),c=e("../../common/GlobalApp"),l=e("../../common/Utils"),u=e("../../network/NetworkClient"),{ccclass:d,property:h}=cc._decorator;let f=r=class extends i.default{constructor(){super(...arguments),this.tabScrollView=null,this.tabItem=null,this.lbTimeReset=null,this.top1Content=null,this.top23Content=null,this.topItem=null,this.normalScrollView=null,this.normalItem=null,this.topIcons=[],this.stars=[],this.games=[a.Game.Enum.PUSOY,a.Game.Enum.TONGITS,a.Game.Enum.BACCARAT,a.Game.Enum.DRAGON_TIGER,a.Game.Enum.SICBO,a.Game.Enum.FRUIT,a.Game.Enum.INCA,a.Game.Enum.JUICY_GARDEN,a.Game.Enum.NOEL,a.Game.Enum.SIXIANG,a.Game.Enum.TARZAN],this.scheduleTime=null}static getInstance(){return this.instance}static show(){null==this.instance||null==this.instance.node?c.default.getInstance().loadPrefabByMainBundle("res/prefabs/dialogs/LeaderBoardDialog",(e,t)=>{if(null!=e)return void c.default.getInstance().alertDialog.showMessage(e);let n=cc.instantiate(t);n.parent=c.default.getInstance().dialogRootNode,this.instance=n.getComponent(r),this.instance.node.zIndex=1e3,this.instance.show()}):(this.instance.node.zIndex=1e3,this.instance.show())}show(){super.show(),this.generateTabs()}generateTabs(){this.tabScrollView.content.children.forEach(e=>e.active=!1),this.games.forEach((e,t)=>{let n=this.tabScrollView.content.children[t];n||(n=cc.instantiate(this.tabItem),this.tabScrollView.content.addChild(n)),n.active=!0;let r=n.getComponentsInChildren(cc.Label);r[0].string=r[1].string=a.Game.Info[e].gameName,n.off("toggle"),n.on("toggle",()=>{this.getLeaderBoardInfo(e),this.getListUser(e)}),0===t&&n.emit("toggle")})}getLeaderBoardInfo(e){u.default.getInstance().rpcCall(s.default.Network.RPC_ID.LEADER_BOARD_INFO,{game_code:e}).then(e=>{this.setLeaderBoardInfo(e.payload)},e=>{cc.log("err when get PROFILE ",e),c.default.getInstance().alertDialog.showMessage(e.message||"Error when get leader board info!")})}setLeaderBoardInfo(e){if(this.unschedule(this.scheduleTime),e&&e.cdResetUnix){let t=Number(e.cdResetUnix)-Math.round((new Date).getTime()/1e3);this.scheduleTime=()=>{let e=Math.floor(t/3600%24),n=Math.floor(t%3600/60),r=Math.floor(t%60),o=Math.floor(t/3600/24);this.lbTimeReset&&(this.lbTimeReset.string=`${o>0?o+" days ":""}${e<10?"0"+e:e}:${n<10?"0"+n:n}:${r<10?"0"+r:r}`),t-=1},this.schedule(this.scheduleTime,1,t,0)}}getListUser(e,t=15){u.default.getInstance().listLeaderboardRecords(e,t).then(e=>{const t=[...e.records];u.default.getInstance().getUsers(t.map(e=>e.owner_id),[],[]).then(e=>{this.setListUser(t,e.users)},e=>{cc.log("err get user: ",e)})},e=>{cc.log("err get record: ",e),c.default.getInstance().alertDialog.showMessage(e.message||"Error when get leader board records!")})}setListUser(e,t){this.top1Content.children.forEach(e=>e.active=!1),this.top23Content.children.forEach(e=>e.active=!1),this.normalScrollView.content.children.forEach(e=>e.active=!1),e.forEach((n,r)=>{const o=t.find(t=>t.id===e[r].owner_id);if(0===r){let e=this.top1Content.children[r];e||(e=cc.instantiate(this.topItem),this.top1Content.addChild(e)),e.active=!0;let t=e.getComponentsInChildren(cc.Sprite);t[1].spriteFrame=this.topIcons[0],t[2].spriteFrame=c.default.getInstance().getAvatarById(o.avatarId),t[3].spriteFrame=c.default.getInstance().getAvatarBorderByVip(o.vipLevel);let i=(o.vipLevel<=10?o.vipLevel:10)/2;for(let n=1;n<=5;n++)t[3+n].spriteFrame=i>=n?this.stars[2]:i===n-.5?this.stars[1]:this.stars[0];let s=e.getComponentsInChildren(cc.Label);s[0].string=o.name,s[1].string=l.default.formatWalletNumber(n.score)}else if(1===r||2===r){let e=this.top23Content.children[r-1];e||(e=cc.instantiate(this.topItem),this.top23Content.addChild(e)),e.active=!0;let t=e.getComponentsInChildren(cc.Sprite);t[1].spriteFrame=this.topIcons[r],t[2].spriteFrame=c.default.getInstance().getAvatarById(o.avatarId),t[3].spriteFrame=c.default.getInstance().getAvatarBorderByVip(o.vipLevel);let i=(o.vipLevel<=10?o.vipLevel:10)/2;for(let n=1;n<=5;n++)t[3+n].spriteFrame=i>=n?this.stars[2]:i===n-.5?this.stars[1]:this.stars[0];let s=e.getComponentsInChildren(cc.Label);s[0].string=o.name,s[1].string=l.default.formatWalletNumber(n.score)}else{let e=this.normalScrollView.content.children[r-3];e||(e=cc.instantiate(this.normalItem),this.normalScrollView.content.addChild(e)),e.active=!0;let t=e.getComponentsInChildren(cc.Sprite),i=(o.vipLevel<=10?o.vipLevel:10)/2;for(let n=1;n<=5;n++)t[n].spriteFrame=i>=n?this.stars[2]:i===n-.5?this.stars[1]:this.stars[0];let s=e.getComponentsInChildren(cc.Label);s[0].string=r+1+"",s[1].string=o.name,s[2].string=l.default.formatWalletNumber(n.score)}})}};f.instance=null,o([h(cc.ScrollView)],f.prototype,"tabScrollView",void 0),o([h(cc.Node)],f.prototype,"tabItem",void 0),o([h(cc.Label)],f.prototype,"lbTimeReset",void 0),o([h(cc.Node)],f.prototype,"top1Content",void 0),o([h(cc.Node)],f.prototype,"top23Content",void 0),o([h(cc.Node)],f.prototype,"topItem",void 0),o([h(cc.ScrollView)],f.prototype,"normalScrollView",void 0),o([h(cc.Node)],f.prototype,"normalItem",void 0),o([h([cc.SpriteFrame])],f.prototype,"topIcons",void 0),o([h([cc.SpriteFrame])],f.prototype,"stars",void 0),f=r=o([d],f),n.default=f,cc._RF.pop()},{"../../common/BaseDialog":"BaseDialog","../../common/ConfigClient":"ConfigClient","../../common/Constants":"Constants","../../common/GlobalApp":"GlobalApp","../../common/Utils":"Utils","../../network/NetworkClient":"NetworkClient"}],LobbyController:[function(e,t,n){"use strict";cc._RF.push(t,"bf895qAiw9GM6D5MVEmEz5v","LobbyController");var r,o=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});const i=e("../audio/AudioController"),s=e("../common/Broadcast"),a=e("../common/ConfigClient"),c=e("../common/Constants"),l=e("../common/GlobalApp"),u=e("../common/User"),d=e("../common/Utils"),h=e("../dialogs/bank/BankDialog"),f=e("../dialogs/banner/BannerDialog"),p=e("../dialogs/exchange/ExchangeDialog"),g=e("../dialogs/freechips/FreeChipsDialog"),m=e("../dialogs/giftcode/GiftCodeDialog"),v=e("../dialogs/leaderboard/LeaderBoardDialog"),b=e("../dialogs/mailbox/MailBoxDialog"),w=e("../dialogs/profile/ProfileDialog"),y=e("../dialogs/setting/SettingDialog"),_=e("../dialogs/shop/ShopDialog"),C=e("../game/GamePresenter"),I=e("../language/LanguageController"),S=e("../network/HttpClient"),E=e("../network/NetworkClient"),P=e("./GameList"),{ccclass:A,property:N}=cc._decorator;let k=r=class extends cc.Component{constructor(){super(...arguments),this.lbUserName=null,this.lbUserId=null,this.lbUserChips=null,this.lbUserBank=null,this.iconUserDot=null,this.spUserAvatar=null,this.spUserBorderAvatar=null,this.iconFreeChipDot=null,this.animBtnSupport=null,this.animBtnQuickPlay=null,this.bgAudioClip=null}static getInstance(){return this.instance}start(){r.instance=this,this.getFreeChipNotifications(),this.getUserProfile(),f.default.show(),l.default.getInstance().hotNews.startHotNews(),s.Broadcast.register(s.Broadcast.CHIP_CHANGED,()=>{d.default.runNumber(this.lbUserChips,u.default.accountChip,.3),d.default.runNumber(this.lbUserBank,u.default.bankChip,.3)},this),s.Broadcast.register(s.Broadcast.DISPLAY_NAME_CHANGED,()=>{let e=u.default.displayName;this.lbUserName.string=e.length>17?e.substring(0,14)+"...":e},this),s.Broadcast.register(s.Broadcast.AVATAR_CHANGED,()=>{this.spUserAvatar.spriteFrame=l.default.getInstance().getAvatarById(u.default.avatarId)},this),s.Broadcast.register(s.Broadcast.VIP_CHANGED,()=>{this.spUserBorderAvatar.spriteFrame=l.default.getInstance().getAvatarBorderByVip(u.default.vipLevel)},this),i.default.getInstance().playMusic(this.bgAudioClip)}getFreeChipNotifications(){this.iconFreeChipDot.active=!1,E.default.getInstance().rpcCall(a.default.Network.RPC_ID.LIST_CLAIMABLE_FREECHIPS,{}).then(e=>{e.payload&&e.payload.freechips&&0!==e.payload.freechips.length&&(this.iconFreeChipDot.active=!0,l.default.getInstance().isFreeChipLoaded||(l.default.getInstance().isFreeChipLoaded=!0,l.default.getInstance().confirmDialog.showMessage(I.default.getInstance().getString("has_mail_show_gold"),e=>{e&&g.default.show()})))},e=>{cc.log("LIST_CLAIMABLE_FREECHIPS error ",e)})}reconnectMatch(e){l.default.getInstance().isReconnectMatchFailed||(l.default.getInstance().gameCode=e.code,l.default.getInstance().gameCode&&E.default.getInstance().joinMatch(e.matchId).then(t=>{l.default.getInstance().openGame(e.code,()=>{l.default.getInstance().isReconnected=!0,l.default.getInstance().matchInfo=t})},e=>{cc.log("err when join match",e),l.default.getInstance().isReconnectMatchFailed=!0,l.default.getInstance().alertDialog.showMessage(I.default.getInstance().getString("err_table_when_join"))}))}getUserProfile(){E.default.getInstance().rpcCall(a.default.Network.RPC_ID.GET_PROFILE,{}).then(e=>{var t;u.default.init(e.payload),this.animBtnQuickPlay.animation=u.default.playingMatch.code?null===(t=c.Game.Info[u.default.playingMatch.code])||void 0===t?void 0:t.animation:"A_Quick_Play",this.setProfile(),u.default.playingMatch.matchId&&this.scheduleOnce(()=>{this.reconnectMatch(u.default.playingMatch)},.5),f.BannerData.setBannerData(0,!0)},e=>{cc.log("err when get PROFILE ",e)})}setProfile(){s.Broadcast.send(s.Broadcast.CHIP_CHANGED),s.Broadcast.send(s.Broadcast.DISPLAY_NAME_CHANGED),s.Broadcast.send(s.Broadcast.AVATAR_CHANGED),s.Broadcast.send(s.Broadcast.VIP_CHANGED),this.lbUserId.string="ID: "+u.default.userSid,this.animBtnSupport.animation=u.default.vipLevel>=5?"text_indo_normal":"text_indo_Vip",this.iconUserDot.active=0==u.default.remainTimeInputRefCode}getBanners(){S.default.get(a.default.Api.apiurlv1+"banners",{size:1,count:1}).then(e=>{cc.log(e)},()=>{})}actionTableGame(){l.default.getInstance().loadSceneByBundle(a.default.Bundle.BUNDLE_NAME.LOBBY,a.default.AppInfo.SCENE_NAME.GAMELIST,()=>{var e;null===(e=P.default.getInstance())||void 0===e||e.setGameType(c.GameType.Enum.TABLE_GAME)})}actionSlotGame(){l.default.getInstance().loadSceneByBundle(a.default.Bundle.BUNDLE_NAME.LOBBY,a.default.AppInfo.SCENE_NAME.GAMELIST,()=>{var e;null===(e=P.default.getInstance())||void 0===e||e.setGameType(c.GameType.Enum.SLOT_GAME)})}actionFreeChip(){g.default.show()}actionSetting(){y.default.show()}actionProfile(){w.default.show()}actionMail(){b.default.show()}actionBank(){h.default.show()}actionLeaderBoard(){v.default.show()}actionShop(){f.BannerData.setBannerData(c.Banner.ShowType.LOBBY_PAYMENT,!0),_.default.show()}actionBestDeal(){}actionGiftCode(){m.default.show()}actionExchange(){p.default.show()}actionBanner(){f.default.show()}actionVipFarm(){}actionSupport(){}actionQuickPlay(e=null){if(0==u.default.accountChip)return void l.default.getInstance().alertDialog.showMessage(I.default.getInstance().getString("txt_not_enough_money_gl"));let t=e||c.Game.Enum.GAPLE,n=-1;u.default.playingMatch&&(t=u.default.playingMatch.code,n=u.default.playingMatch.mcb),n>=0&&u.default.accountChip>=n?this.quickPlayGame(t,n):(l.default.getInstance().showProcessing(!0),E.default.getInstance().rpcCall(a.default.Network.RPC_ID.LIST_BET,{code:t}).then(e=>{var n,r,o;l.default.getInstance().showProcessing(!1);let i=-1;for(let t=0;t<e.payload.bets.length;t++)(null===(n=e.payload.bets.bets[t])||void 0===n?void 0:n.enable)&&(-1==i||Number(null===(r=e.payload.bets.bets[t])||void 0===r?void 0:r.markUnit)<i)&&(i=Number(null===(o=e.payload.bets.bets[t])||void 0===o?void 0:o.markUnit));i<=0||(u.default.accountChip<Number(i)?l.default.getInstance().alertDialog.showMessage(I.default.getInstance().getString("txt_not_enough_money_gl")):this.quickPlayGame(t,Number(i)))},e=>{cc.log("err when get list bet",e),l.default.getInstance().showProcessing(!1)}))}quickPlayGame(e,t){l.default.getInstance().gameCode=e,C.default.joinMatch(e,t),f.BannerData.setBannerData(c.Banner.ShowType.CHOOSE_GAME,!0)}};k.instance=null,o([N(cc.Label)],k.prototype,"lbUserName",void 0),o([N(cc.Label)],k.prototype,"lbUserId",void 0),o([N(cc.Label)],k.prototype,"lbUserChips",void 0),o([N(cc.Label)],k.prototype,"lbUserBank",void 0),o([N(cc.Node)],k.prototype,"iconUserDot",void 0),o([N(cc.Sprite)],k.prototype,"spUserAvatar",void 0),o([N(cc.Sprite)],k.prototype,"spUserBorderAvatar",void 0),o([N(cc.Node)],k.prototype,"iconFreeChipDot",void 0),o([N(sp.Skeleton)],k.prototype,"animBtnSupport",void 0),o([N(sp.Skeleton)],k.prototype,"animBtnQuickPlay",void 0),o([N(cc.AudioClip)],k.prototype,"bgAudioClip",void 0),k=r=o([A],k),n.default=k,cc._RF.pop()},{"../audio/AudioController":"AudioController","../common/Broadcast":"Broadcast","../common/ConfigClient":"ConfigClient","../common/Constants":"Constants","../common/GlobalApp":"GlobalApp","../common/User":"User","../common/Utils":"Utils","../dialogs/bank/BankDialog":"BankDialog","../dialogs/banner/BannerDialog":"BannerDialog","../dialogs/exchange/ExchangeDialog":"ExchangeDialog","../dialogs/freechips/FreeChipsDialog":"FreeChipsDialog","../dialogs/giftcode/GiftCodeDialog":"GiftCodeDialog","../dialogs/leaderboard/LeaderBoardDialog":"LeaderBoardDialog","../dialogs/mailbox/MailBoxDialog":"MailBoxDialog","../dialogs/profile/ProfileDialog":"ProfileDialog","../dialogs/setting/SettingDialog":"SettingDialog","../dialogs/shop/ShopDialog":"ShopDialog","../game/GamePresenter":"GamePresenter","../language/LanguageController":"LanguageController","../network/HttpClient":"HttpClient","../network/NetworkClient":"NetworkClient","./GameList":"GameList"}],LoginController:[function(e,t,n){"use strict";cc._RF.push(t,"5f76a8D6gVIUrWCfz0PlbJ9","LoginController");var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});const o=e("../common/GlobalApp"),i=e("../common/SPUtils"),s=e("../common/ConfigClient"),a=e("../network/NetworkClient"),c=e("../language/LanguageController"),l=e("../common/Constants"),u=e("../common/Utils");let d=window.FB;const{ccclass:h,property:f}=cc._decorator;let p=class extends cc.Component{constructor(){super(...arguments),this.formLogin=null,this.formInput=null,this.edbUserName=null,this.edbPassword=null}start(){this.initFacebook(),this.fillFormLogin()}onEnable(){this.onAutoLogin()}initFacebook(){var e,t,n,r,o;cc.sys.isBrowser&&(d.init({appId:s.default.AppInfo.fbAppId,autoLogAppEvents:!0,xfbml:!0,version:"v17.0"}),t="script",n="facebook-jssdk",o=(e=document).getElementsByTagName(t)[0],e.getElementById(n)||((r=e.createElement(t)).id=n,r.src="https://connect.facebook.net/en_US/sdk.js",o.parentNode.insertBefore(r,o)))}fillFormLogin(){i.default.getUserName()&&i.default.getUserPassword()&&(this.edbUserName.string=i.default.getUserName(),this.edbPassword.string=i.default.getUserPassword())}onAutoLogin(){if(i.default.getIsAutoLogin())switch(i.default.getLoginType()){case l.Login.Enum.GUEST:this.actionLoginGuest();break;case l.Login.Enum.ID:this.sendLoginId(i.default.getUserName(),i.default.getUserPassword());break;case l.Login.Enum.FB:this.actionLoginFacebook()}}actionShowInputLogin(){this.formLogin.getNumberOfRunningActions()>0||(this.formInput.active=!0,this.formLogin.runAction(cc.sequence(cc.moveTo(.2,cc.v2(0,-cc.winSize.width)).easing(cc.easeCubicActionIn()),cc.callFunc(()=>{this.formInput.runAction(cc.moveTo(.2,cc.v2(0,0)).easing(cc.easeCubicActionOut())),this.formLogin.active=!1}))))}actionCloseInputLogin(){this.formInput.getNumberOfRunningActions()>0||(this.formLogin.active=!0,this.formInput.runAction(cc.sequence(cc.moveTo(.2,cc.v2(cc.winSize.width,0)).easing(cc.easeCubicActionIn()),cc.callFunc(()=>{this.formLogin.runAction(cc.moveTo(.2,cc.v2(0,-250)).easing(cc.easeCubicActionOut())),this.formInput.active=!1}))))}actionLoginGuest(){let e=i.default.getDeviceId();if(e)this.sendLoginGuest(e);else if(cc.sys.isNative){const t=u.default.getDeviceId();t?(e="deviceidentifier-"+t+Date.now(),this.sendLoginGuest(e)):o.default.getInstance().alertDialog.showMessage(c.default.getInstance().getString("login_error"))}else this.sendLoginGuest(u.default.uuidv4())}actionLoginWithId(){const e=this.edbUserName.string;if(!e)return void o.default.getInstance().alertDialog.showMessage(c.default.getInstance().getString("login_empty_username"));const t=this.edbPassword.string;t?this.sendLoginId(e,t):o.default.getInstance().alertDialog.showMessage(c.default.getInstance().getString("login_empty_password"))}actionLoginFacebook(){try{o.default.getInstance().showProcessing(!0),cc.sys.isNative?u.default.loginFacebook():d.login(function(e){"connected"===e.status?(cc.log("Response auth",e),a.default.getInstance().loginFB(e.authResponse.accessToken).then(()=>{o.default.getInstance().showProcessing(!1),this.onLoginSuccess()}).catch(e=>{cc.log("Login facebook err:",e),o.default.getInstance().showProcessing(!1),this.onLoginError()})):(cc.log("The person is not logged into this app or we are unable to tell."),o.default.getInstance().showProcessing(!1),this.onLoginError())},{scope:"public_profile, email"})}catch(e){cc.log("An error occurred while trying to authenticate user:",JSON.stringify(e)),o.default.getInstance().showProcessing(!1),this.onLoginError()}}onLoginFacebook(e){a.default.getInstance().loginFB(e).then(()=>{o.default.getInstance().showProcessing(!1),i.default.setLoginType(l.Login.Enum.FB),i.default.setIsAutoLogin(!0),this.onLoginSuccess()}).catch(e=>{cc.log("Login facebook err:",e),o.default.getInstance().showProcessing(!1),this.onLoginError()})}onLoginSuccess(){o.default.getInstance().isReconnectMatchFailed=!1,o.default.getInstance().loadSceneByBundle(s.default.Bundle.BUNDLE_NAME.LOBBY,s.default.AppInfo.SCENE_NAME.LOBBY,()=>{a.default.getInstance().initEventQueue(),o.default.getInstance().isFreeChipLoaded=!1})}onLoginError(){o.default.getInstance().alertDialog.showMessage(c.default.getInstance().getString("login_error"),()=>{})}sendLoginGuest(e){o.default.getInstance().showProcessing(!0),a.default.getInstance().loginGuest(e).then(()=>{o.default.getInstance().showProcessing(!1),i.default.setLoginType(l.Login.Enum.GUEST),i.default.setIsAutoLogin(!0),i.default.setDeviceId(e),this.onLoginSuccess()}).catch(e=>{o.default.getInstance().showProcessing(!1),this.onLoginError(),cc.log("Login guest err:",e)})}sendLoginId(e,t){o.default.getInstance().showProcessing(!0),a.default.getInstance().loginId(e,t).then(()=>{o.default.getInstance().showProcessing(!1),i.default.setLoginType(l.Login.Enum.ID),i.default.setIsAutoLogin(!0),i.default.setUserName(e),i.default.setUserPassword(t),this.onLoginSuccess()}).catch(e=>{o.default.getInstance().showProcessing(!1),this.onLoginError(),cc.log("Login Id err:",e)})}};r([f(cc.Node)],p.prototype,"formLogin",void 0),r([f(cc.Node)],p.prototype,"formInput",void 0),r([f(cc.EditBox)],p.prototype,"edbUserName",void 0),r([f(cc.EditBox)],p.prototype,"edbPassword",void 0),p=r([h],p),n.default=p,cc._RF.pop()},{"../common/ConfigClient":"ConfigClient","../common/Constants":"Constants","../common/GlobalApp":"GlobalApp","../common/SPUtils":"SPUtils","../common/Utils":"Utils","../language/LanguageController":"LanguageController","../network/NetworkClient":"NetworkClient"}],MailBoxDialog:[function(e,t,n){"use strict";cc._RF.push(t,"dd4f7xxzJhGK5QZLub91H2M","MailBoxDialog");var r,o=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});const i=e("../../common/BaseDialog"),s=e("../../common/ConfigClient"),a=e("../../common/Constants"),c=e("../../common/GlobalApp"),l=e("../../network/NetworkClient"),{ccclass:u,property:d}=cc._decorator;let h=r=class extends i.default{constructor(){super(...arguments),this.scrollViewMail=null,this.mailItem=null,this.btnSelectAll=null,this.btnDelete=null,this.mailListLength=20,this.mailList=[]}static getInstance(){return this.instance}static show(){null==this.instance||null==this.instance.node?c.default.getInstance().loadPrefabByMainBundle("res/prefabs/dialogs/MailBoxDialog",(e,t)=>{if(null!=e)return void c.default.getInstance().alertDialog.showMessage(e);let n=cc.instantiate(t);n.parent=c.default.getInstance().dialogRootNode,this.instance=n.getComponent(r),this.instance.node.zIndex=1e3,this.instance.show()}):(this.instance.node.zIndex=1e3,this.instance.show())}show(){super.show(),this.btnSelectAll.getComponent(cc.Toggle).interactable=!1,this.btnDelete.getComponent(cc.Button).interactable=!1,this.getListMail(this.mailListLength)}start(){this.btnSelectAll.getComponent(cc.Toggle).node.on("toggle",()=>{const e=this.btnSelectAll.getComponent(cc.Toggle).isChecked;this.scrollViewMail.content.children.forEach(t=>t.getComponentInChildren(cc.Toggle).isChecked=e)}),this.btnDelete.getComponent(cc.Button).node.on("click",()=>{this.scrollViewMail.content.children.forEach((e,t)=>{e.getComponentInChildren(cc.Toggle).isChecked&&this.deleteMail(this.mailList[t])})})}getListMail(e){l.default.getInstance().rpcCall(s.default.Network.RPC_ID.LIST_NOTIFICATION,{limit:e,type:a.Notification.Enum.MAIL_BOX}).then(e=>{cc.log("LIST_NOTIFICATION data ",e),this.setListMail(e.payload.notifications)},e=>{this.setListMail([]),cc.log("LIST_NOTIFICATION error ",e)})}readMail(e){l.default.getInstance().rpcCall(s.default.Network.RPC_ID.READ_NOTIFICATION,e).then(e=>{cc.log("READ_NOTIFICATION data ",e)},t=>{cc.log("READ_NOTIFICATION error ",t,e)})}deleteMail(e){l.default.getInstance().rpcCall(s.default.Network.RPC_ID.DELETE_NOTIFICATION,e).then(e=>{cc.log("DELETE_NOTIFICATION data ",e),this.getListMail(this.mailListLength)},e=>{cc.log("DELETE_NOTIFICATION error ",e)})}deleteAllMail(){l.default.getInstance().rpcCall(s.default.Network.RPC_ID.DELETE_ALL_NOTIFICATION,null).then(e=>{cc.log("DELETE_ALL_NOTIFICATION data ",e),this.getListMail(this.mailListLength)},e=>{cc.log("DELETE_ALL_NOTIFICATION error ",e)})}readAllMail(){l.default.getInstance().rpcCall(s.default.Network.RPC_ID.READ_ALL_NOTIFICATION,null).then(e=>{cc.log("READ_ALL_NOTIFICATION data ",e),this.getListMail(this.mailListLength)},e=>{cc.log("READ_ALL_NOTIFICATION error ",e)})}setListMail(e){this.mailList=e,this.scrollViewMail.content.children.forEach(e=>e.active=!1);for(let t=0;t<e.length;t++){let n=this.scrollViewMail.content.children[t];n||(n=cc.instantiate(this.mailItem),this.scrollViewMail.content.addChild(n)),n.active=!0;let r=n.getComponentsInChildren(cc.Label);r[0].string=e[t].title,r[1].string=e[t].content;let o=new Date(1970,0,1);o.setSeconds(e[t].createTimeUnix||16631229599);let i=o.getHours(),s=o.getMinutes(),a=o.getDate(),c=o.getMonth()+1,l=o.getFullYear();r[2].string=`${i<10?"0"+i:i}:${s<10?"0"+s:s}\n${a<10?"0"+a:a}/${c<10?"0"+c:c}/${l}`,n.getComponentInChildren(cc.Sprite).node.opacity=e[t].read?255:150;let u=n.getComponentInChildren(cc.Toggle);u.isChecked=!1,u.node.off("toggle"),u.node.on("toggle",()=>{this.btnDelete.getComponent(cc.Button).interactable=this.scrollViewMail.content.children.some(e=>e.getComponentInChildren(cc.Toggle).isChecked),this.btnSelectAll.getComponent(cc.Toggle).isChecked=this.scrollViewMail.content.children.every(e=>e.getComponentInChildren(cc.Toggle).isChecked)}),n.off("click"),n.on("click",()=>{this.readMail(e[t])})}this.btnSelectAll.getComponent(cc.Toggle).interactable=e.length>0}};h.instance=null,o([d(cc.ScrollView)],h.prototype,"scrollViewMail",void 0),o([d(cc.Node)],h.prototype,"mailItem",void 0),o([d(cc.Button)],h.prototype,"btnSelectAll",void 0),o([d(cc.Button)],h.prototype,"btnDelete",void 0),h=r=o([u],h),n.default=h,cc._RF.pop()},{"../../common/BaseDialog":"BaseDialog","../../common/ConfigClient":"ConfigClient","../../common/Constants":"Constants","../../common/GlobalApp":"GlobalApp","../../network/NetworkClient":"NetworkClient"}],NetworkClient:[function(e,t,n){"use strict";cc._RF.push(t,"47b184Bw25K7Ilh182bbJx8","NetworkClient");var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function s(e){try{c(r.next(e))}catch(t){i(t)}}function a(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(n,"__esModule",{value:!0});const o=e("../libs/nakama"),i=e("../common/ConfigClient"),s=e("../common/SPUtils"),a=e("../common/GlobalApp"),c=e("../common/Utils"),l=e("../chat/ChatPresenter");class u{constructor(){this.eventQueue=[],this.gameHandler={},this.eventQueueInterval=null,this.client=new o.Client(i.default.Network.serverKey,i.default.Network.nakamaIp,i.default.Network.nakamaPort,i.default.Network.useSSL,i.default.Network.timeout,!0)}static getInstance(){return null==this.instance&&(this.instance=new u),this.instance}parseErrorResponse(e){return r(this,void 0,void 0,function*(){let t=e;try{if(e&&e.body&&"function"==typeof e.body.getReader){const n=e.body.getReader(),{value:r}=yield n.read(),o=(new TextDecoder).decode(r);t=JSON.parse(o)}}catch(n){cc.log("Error parsing response body:",n)}return t})}initEventQueue(){this.eventQueueInterval=()=>{this.processEventQueue()},setInterval(this.eventQueueInterval,1e3)}processEventQueue(){for(;this.eventQueue.length>0;){if(!a.default.getInstance().gameCode)return;let e=this.gameHandler[a.default.getInstance().gameCode];if(!e)return;let t=this.eventQueue.shift();e.matchDataHandler(t)}}initSocket(e){this.socket=this.client.createSocket(i.default.Network.useSSL,!1),this.socket.connect(e,!0).then(()=>{cc.log("Socket connected"),this.connected=!0,this.socket.ondisconnect=e=>{cc.log("ondisconnect",e),setTimeout(()=>{this.isKickOff&&(s.default.setIsAutoLogin(!1),this.isKickOff=!1),a.default.getInstance().loadSceneByBundle(i.default.Bundle.BUNDLE_NAME.LOBBY,i.default.AppInfo.SCENE_NAME.LOGIN)},1e3)},this.initSocketChat(),this.initSocketNotifications(),this.initSocketMatchData(),this.initSocketMatchPresence()},e=>{cc.error("connect failed:",JSON.stringify(e)),a.default.getInstance().loadSceneByBundle(i.default.Bundle.BUNDLE_NAME.LOBBY,i.default.AppInfo.SCENE_NAME.LOGIN)})}initSocketChat(){this.socket.onchannelmessage=e=>{switch(cc.log("Received a message on channel:",e.channel_id),cc.log("Message content:",JSON.stringify(e.content)),e.channel_id){case l.default.getInstance().getCurrentChatRoomId():l.default.getInstance().handleChatData(e.content)}}}initSocketNotifications(){this.socket.onnotification=e=>{switch(cc.log("Received",e),e.code){case-1:this.getUsers([e.sender_id],[],[]).then(e=>{e.users[0]},()=>{});break;case 2:break;case-7:this.isKickOff=!0}}}initSocketMatchData(){this.socket.onmatchdata=e=>{let t=JSON.parse(String.fromCharCode(...e.data));e=Object.assign(Object.assign({},e),{data:t}),this.eventQueue.push(e)}}initSocketMatchPresence(){this.socket.onmatchpresence=e=>{cc.log("Received match presence update:",e)}}storeSession(e){s.default.setToken(e.token),s.default.seRefreshToken(e.refresh_token),cc.log("Session stored.",e)}getSessionFromStorage(){return cc.sys.localStorage.getItem("token")}loginGuest(e){try{return new Promise((t,n)=>{this.client.authenticateDevice(e,!0).then(e=>{cc.log("Authenticated successfully. User ID:",e.user_id),this.onAuthenSuccess(e),t(e)},e=>r(this,void 0,void 0,function*(){cc.error("authenticate failed:",JSON.stringify(e));const t=yield this.parseErrorResponse(e);n(t)}))})}catch(t){return cc.log("An error occurred while trying to authenticate user:",JSON.stringify(t)),Promise.reject(t)}}loginId(e,t){try{return new Promise((n,o)=>{this.client.authenticateEmail("",t,!1,e).then(e=>{cc.log("Authenticated successfully. User ID:",e.user_id),this.onAuthenSuccess(e),n(e)},e=>r(this,void 0,void 0,function*(){cc.error("authenticate failed:",JSON.stringify(e));const t=yield this.parseErrorResponse(e);o(t)}))})}catch(n){return cc.log("An error occurred while trying to authenticate user:",JSON.stringify(n)),Promise.reject(n)}}loginFB(e){return new Promise((t,n)=>{this.client.authenticateFacebook(e,!0,"",!0).then(e=>{cc.log("Authenticated Facebook successfully. User ID:",e.user_id),this.onAuthenSuccess(e),t(e)},e=>r(this,void 0,void 0,function*(){cc.error("authenticate failed:",JSON.stringify(e));const t=yield this.parseErrorResponse(e);n(t)}))})}restoreSession(){const e=s.default.getToken(),t=s.default.getRefreshToken();this.session=o.Session.restore(e,t),this.storeSession(this.session),this.initSocket(this.session)}onAuthenSuccess(e){this.session=e,this.storeSession(e),this.initSocket(e)}getAccount(){try{return new Promise((e,t)=>{this.client.getAccount(this.session).then(t=>{cc.log("User's wallet:",t.wallet),e(t)},e=>r(this,void 0,void 0,function*(){cc.error("get account failed:",JSON.stringify(e));const n=yield this.parseErrorResponse(e);t(n)}))})}catch(e){return cc.log("An error occurred while trying to get account:",JSON.stringify(e)),Promise.reject(e)}}updateAccount(e){this.client.updateAccount(this.session,e);try{return new Promise((t,n)=>{this.client.updateAccount(this.session,e).then(e=>{cc.log("update account data:",e),t(e)},e=>r(this,void 0,void 0,function*(){cc.error("update account failed:",JSON.stringify(e));const t=yield this.parseErrorResponse(e);n(t)}))})}catch(t){return cc.log("An error occurred while trying to update account:",JSON.stringify(t)),Promise.reject(t)}}getUsers(e,t,n){try{return new Promise((o,i)=>{this.client.getUsers(this.session,e,t,n).then(e=>{cc.log("Users:",JSON.stringify(e)),o(e)},e=>r(this,void 0,void 0,function*(){cc.error("get users failed:",JSON.stringify(e));const t=yield this.parseErrorResponse(e);i(t)}))})}catch(o){return cc.log("An error occurred while trying to get users:",JSON.stringify(o)),Promise.reject(o)}}listLeaderboardRecords(e,t){try{return new Promise((n,o)=>{this.client.listLeaderboardRecords(this.session,e,null,t).then(e=>{cc.log("Records:",JSON.stringify(e)),n(e)},e=>r(this,void 0,void 0,function*(){cc.error("get listLeaderboardRecords failed:",JSON.stringify(e));const t=yield this.parseErrorResponse(e);o(t)}))})}catch(n){return cc.log("An error occurred while trying to get listLeaderboardRecords:",JSON.stringify(n)),Promise.reject(n)}}joinChat(e,t,n){try{return new Promise((r,o)=>{this.socket.joinChat(e,t,n,!1).then(e=>{cc.log("Now connected to channel id: ",e),r(e)},e=>{cc.error("join channel failed:",JSON.stringify(e)),o(e)})})}catch(r){return cc.log("An error occurred while trying to join chat:",JSON.stringify(r)),Promise.reject(r)}}leaveChat(e){return this.socket.leaveChat(e)}sendChat(e,t){this.socket.writeChatMessage(e,t).then(e=>{cc.log("send chat ack:",JSON.stringify(e))}).catch(e=>{cc.error("send chat failed:",JSON.stringify(e))})}listMessages(e,t,n){try{return new Promise((o,i)=>{this.client.listChannelMessages(this.session,e,t,!1,n).then(e=>{cc.log("Result:",e),o(e)},e=>r(this,void 0,void 0,function*(){cc.error("matchmaker add failed:",JSON.stringify(e));const t=yield this.parseErrorResponse(e);i(t)}))})}catch(o){return cc.log("An error occurred while trying to list messages:",JSON.stringify(o)),Promise.reject(o)}}listNotifications(e){this.client.listNotifications(this.session,100,e).then(e=>{0!=e.notifications.length&&cc.log("Notifications: ",e)},e=>{cc.error("list notifications failed:",JSON.stringify(e))})}deleteNotifications(e){this.client.deleteNotifications(this.session,e)}joinMatch(e,t,n){try{return new Promise((r,o)=>{this.socket.joinMatch(e,t,n).then(e=>{cc.log("joined match:",JSON.stringify(e)),r(e)},e=>{cc.error("join match failed:",JSON.stringify(e)),o(e)})})}catch(r){return cc.log("An error occurred while trying to join match:",JSON.stringify(r)),Promise.reject(r)}}leaveMatch(e){return new Promise((t,n)=>{this.socket.leaveMatch(e).then(e=>{t(e),this.eventQueue=[]}).catch(e=>{n(e)})})}rpcCall(e,t){const n=c.default.getKeyByValue(i.default.Network.RPC_ID,e);cc.log("SEND:",n);try{return new Promise((o,i)=>{this.client.rpc(this.session,e,t).then(e=>{cc.log("RECEIVE:",n),cc.log(JSON.stringify(e)),o(e)},e=>r(this,void 0,void 0,function*(){cc.error("RECEIVE:",n),cc.error(JSON.stringify(e));const t=yield this.parseErrorResponse(e);i(t)}))})}catch(o){return cc.log("An error occurred while rpc call:",JSON.stringify(o)),Promise.reject(o)}}sendMatchState(e,t,n){try{return new Promise((r,o)=>{console.log("SEND MATCH STATE:",e,t,JSON.stringify(n)),this.socket.sendMatchState(e,t,JSON.stringify(n)).then(function(e){r(e)},function(e){o(e)})})}catch(r){return cc.log("An error occurred while rpc call:",JSON.stringify(r)),Promise.reject(r)}}validatePurchaseGoogle(e){try{return new Promise((t,n)=>{this.client.validatePurchaseGoogle(this.session,e).then(e=>{t(e)},e=>r(this,void 0,void 0,function*(){cc.log(e);const t=yield this.parseErrorResponse(e);n(t)}))})}catch(t){return cc.log("An error occurred while rpc call:",JSON.stringify(t)),Promise.reject(t)}}subscribeEventHandler(e,t){this.gameHandler[e]=t}sessionLogout(){try{return new Promise((e,t)=>{this.client.sessionLogout(this.session,null,null).then(t=>{clearInterval(this.eventQueueInterval),this.eventQueueInterval=null,e(t)},e=>r(this,void 0,void 0,function*(){cc.log(e);const n=yield this.parseErrorResponse(e);t(n)}))})}catch(e){return cc.log("An error occurred while rpc call:",JSON.stringify(e)),Promise.reject(e)}}}n.default=u,cc._RF.pop()},{"../chat/ChatPresenter":"ChatPresenter","../common/ConfigClient":"ConfigClient","../common/GlobalApp":"GlobalApp","../common/SPUtils":"SPUtils","../common/Utils":"Utils","../libs/nakama":"nakama"}],NodeResizer:[function(e,t,n){"use strict";cc._RF.push(t,"a9badeigZ1HQZ1MC7rp6ayX","NodeResizer");var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});const{ccclass:o,property:i}=cc._decorator;let s=class extends cc.Component{start(){this.node.setContentSize(cc.winSize)}};s=r([o],s),n.default=s,cc._RF.pop()},{}],OneSignalExample:[function(e,t,n){"use strict";cc._RF.push(t,"6b486I2zSJCZoZoKNU4CWew","OneSignalExample"),Object.defineProperty(n,"__esModule",{value:!0});const r=e("./Utils");class o{constructor(){this.initialized=!1,this.config=null}static getInstance(){return this.instance||(this.instance=new o),this.instance}initialize(e){if(this.initialized)console.log("OneSignal already initialized");else{if(this.config=e,this.setupNotificationListener(),cc.sys.isNative)return r.default.isOneSignalInitialized()?(console.log("OneSignal is already initialized by the native layer"),this.initialized=!0,this.config.enablePush&&this.requestPushPermission(),void(void 0!==this.config.requirePrivacyConsent&&r.default.setOneSignalPrivacyConsent(!this.config.requirePrivacyConsent))):void console.log("OneSignal could not be initialized from JavaScript");console.log("OneSignal is only available on native platforms")}}setupNotificationListener(){cc.systemEvent.on("onesignal-notification-clicked",this.onNotificationClicked,this)}onNotificationClicked(e){console.log("Notification clicked:",e.title),console.log("Body:",e.body),console.log("Additional data:",e.additionalData),this.handleNotificationAction(e)}handleNotificationAction(e){e.additionalData&&(e.additionalData.screen&&console.log("Should navigate to screen:",e.additionalData.screen),e.additionalData.offer&&console.log("Special offer received:",e.additionalData.offer),e.additionalData.gameEvent&&console.log("Game event notification:",e.additionalData.gameEvent))}setExternalUserId(e){cc.sys.isNative&&(console.log("Setting OneSignal external user ID:",e),r.default.setOneSignalExternalUserId(e))}addTag(e,t){cc.sys.isNative&&(console.log("Adding OneSignal tag:",e,"=",t),r.default.setOneSignalUserTag(e,t))}removeTag(e){cc.sys.isNative&&(console.log("Removing OneSignal tag:",e),r.default.removeOneSignalUserTag(e))}getUserId(){return cc.sys.isNative?r.default.getOneSignalUserId():""}getPushSubscriptionId(){return cc.sys.isNative?r.default.getOneSignalPushSubscriptionId():""}requestPushPermission(){cc.sys.isNative&&(console.log("Requesting OneSignal push permission"),r.default.requestOneSignalPushPermission())}hasPushPermission(){return!!cc.sys.isNative&&r.default.hasOneSignalPushPermission()}setPrivacyConsent(e){cc.sys.isNative&&(console.log("Setting OneSignal privacy consent:",e),r.default.setOneSignalPrivacyConsent(e))}static example(){const e=o.getInstance();e.initialize({appId:"YOUR_ONESIGNAL_APP_ID",enablePush:!0,requirePrivacyConsent:!1}),e.setExternalUserId("user_123456"),e.addTag("level","10"),e.addTag("coins","5000"),e.addTag("vip","true");const t=e.getUserId();console.log("OneSignal User ID:",t),e.requestPushPermission()}}n.default=o,o.instance=null,cc._RF.pop()},{"./Utils":"Utils"}],OptionDialog:[function(e,t,n){"use strict";cc._RF.push(t,"af0ce0h1CRD7rM0Raw9eGUL","OptionDialog");var r,o=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0}),n.DialogPosition=void 0;const i=e("../../common/Constants"),s=e("../../common/GlobalApp"),a=e("../banner/BannerDialog"),c=e("../setting/SettingDialog"),{ccclass:l,property:u}=cc._decorator;var d;(function(e){e[e.LEFT=0]="LEFT",e[e.RIGHT=1]="RIGHT"})(d=n.DialogPosition||(n.DialogPosition={}));let h=r=class extends cc.Component{constructor(){super(...arguments),this.dialog=null,this.gameController=null}static getInstance(){return this.instance}static show(e,t=d.RIGHT){null==this.instance||null==this.instance.node?s.default.getInstance().loadPrefabByMainBundle("res/prefabs/dialogs/OptionDialog",(n,o)=>{if(null!=n)return void s.default.getInstance().alertDialog.showMessage(n);let i=cc.instantiate(o);i.parent=s.default.getInstance().dialogRootNode,this.instance=i.getComponent(r),this.instance.node.zIndex=1e3,this.instance.show(e,t)}):(this.instance.node.zIndex=1e3,this.instance.show(e,t))}show(e,t){this.gameController=e;let n=this.dialog.getComponent(cc.Widget),r=this.dialog.children;t===d.LEFT?(this.dialog.anchorX=0,n.isAlignLeft=!0,n.isAlignRight=!1,n.left=45,n.updateAlignment(),r.forEach(e=>{e.x=this.dialog.width/2})):(this.dialog.anchorX=1,n.isAlignLeft=!1,n.isAlignRight=!0,n.right=45,n.updateAlignment(),r.forEach(e=>{e.x=-this.dialog.width/2})),this.node.active=!0,this.dialog.setScale(0),cc.tween(this.dialog).to(.2,{scale:1},{easing:"backOut"}).start()}close(){cc.tween(this.dialog).to(.2,{scale:0},{easing:"backIn"}).call(()=>{this.node.active=!1}).start()}actionRule(){var e;this.close(),null===(e=this.gameController)||void 0===e||e.onClickRule()}actionBack(){var e;this.close(),s.default.getInstance().gameCode!==i.Game.Enum.SIXIANG&&s.default.getInstance().gameCode!==i.Game.Enum.TARZAN&&s.default.getInstance().gameCode!==i.Game.Enum.JUICY_GARDEN&&s.default.getInstance().gameCode!==i.Game.Enum.INCA&&s.default.getInstance().gameCode!==i.Game.Enum.NOEL&&s.default.getInstance().gameCode!==i.Game.Enum.FRUIT||a.BannerData.setBannerData(i.Banner.ShowType.LEFT_MATCH,!0),null===(e=this.gameController)||void 0===e||e.onQuit()}actionSetting(){this.close(),c.default.show()}actionChangeMatch(){var e,t;this.close(),(null===(e=this.gameController)||void 0===e?void 0:e.onChangeMatch)&&(null===(t=this.gameController)||void 0===t||t.onChangeMatch())}};h.instance=null,o([u(cc.Node)],h.prototype,"dialog",void 0),h=r=o([l],h),n.default=h,cc._RF.pop()},{"../../common/Constants":"Constants","../../common/GlobalApp":"GlobalApp","../banner/BannerDialog":"BannerDialog","../setting/SettingDialog":"SettingDialog"}],PlayerCasino:[function(e,t,n){"use strict";cc._RF.push(t,"bd997sdxWxIgqD+4BJKHvAX","PlayerCasino");var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});const o=e("../../common/GlobalApp"),i=e("../../common/Utils"),s=e("../../dialogs/playerinfo/PlayerInfoDialog"),{ccclass:a,property:c}=cc._decorator;let l=class extends cc.Component{constructor(){super(...arguments),this.avatar=null,this.border=null,this.lbName=null,this.lbChip=null,this.animDraw=null,this.animLose=null,this.animWin=null,this.fontPlus=null,this.fontSub=null,this.isArranging=!1,this._id="",this._user_name="",this._wallet=0,this._avatar_id=0,this._vipLevel=0,this.sid=""}get id(){return this._id}set id(e){this._id=e}get user_name(){return this._user_name}set user_name(e){this._user_name=e}get wallet(){return this._wallet}set wallet(e){this._wallet=e}get avatar_id(){return this._avatar_id}set avatar_id(e){this._avatar_id=e}get vipLevel(){return this._vipLevel}set vipLevel(e){this._vipLevel=e}setData(e){this.id=e.id||"",this.user_name=e.user_name||"",this.wallet=e.wallet||0,this.avatar_id=e.avatar_id||0,this.vipLevel=e.vipLevel||0,this.sid=e.sId||"",this.avatar.spriteFrame=o.default.getInstance().getAvatarById(this.avatar_id.toString()),this.border.spriteFrame=o.default.getInstance().getAvatarBorderByVip(this.vipLevel),this.setName(e.user_name||""),this.lbChip.string=i.default.formatBetNumber(e.wallet||0,100)}getInfo(){return{id:this.id,user_name:this.user_name,wallet:this.wallet,avatar_id:this.avatar_id,vipLevel:this.vipLevel,sid:this.sid}}effLbName(){if(this.lbName.node.stopAllActions(),this.lbName.node.position=cc.v3(0,0),this.lbName.node.width>this.lbName.node.parent.width-10){let e=(this.lbName.node.width-this.lbName.node.parent.width)/2,t=e/30,n=cc.moveTo(t,e,0),r=cc.moveTo(t,-e,0);if(t<1&&(t=1),e<3)return;this.lbName.node.anchorX=.5,this.lbName.node.x=-e,this.lbName.node.runAction(cc.repeatForever(cc.sequence(cc.delayTime(1.5),n,cc.delayTime(1.5),r)))}}setName(e){null!==this.lbName&&(this.lbName.string=e),this.scheduleOnce(()=>{this.effLbName()},.1)}getId(){return this.id}showEffectWinLose(e){let t=()=>{};0===e?(this.animDraw.node.active=!0,this.animDraw.animation="animation",t=()=>{this.scheduleOnce(()=>{this.animDraw.node.active=!1},2)}):1===e?(this.animWin.node.active=!0,this.animWin.animation="win",t=()=>{this.scheduleOnce(()=>{this.animWin.node.active=!1},2)}):(this.animLose.node.active=!0,this.animLose.animation="lose",t=()=>{this.scheduleOnce(()=>{this.animLose.node.active=!1},2)}),t()}showEffectFlyMoney2(e,t=50,n=50,r=0,o=0){if("number"!=typeof e||0==e)return;let s="",a=null;if(e>=0?(s="+",a=this.fontPlus):(s="-",a=this.fontSub),null==this.node)return;let c=new cc.Node("TextFly"),l=c.addComponent(cc.Label);l.string=s+i.default.formatMoney(Math.abs(e)),l.fontSize=t,l.font=a,c.position=cc.v3(r,o),this.node.addChild(c);let u=cc.moveBy(4,cc.v2(0,n)),d=cc.delayTime(u.getDuration()-.5),h=cc.fadeOut(u.getDuration()-d.getDuration()),f=cc.spawn(u,cc.sequence(d,h)),p=cc.sequence(f,cc.callFunc(()=>{null!==l.node&&l.node.destroy()}));l.node.runAction(p)}showEffectFlyMoney(e,t=50,n=50,r=0,o=0){if("number"!=typeof e||0==e)return;let s="",a=null;if(e>=0?(s="+",a=this.fontPlus):(s="-",a=this.fontSub),null==this.node)return;let c=new cc.Node("TextFly"),l=c.addComponent(cc.Label);l.string=s+i.default.formatMoney(Math.abs(e)),l.fontSize=t,l.font=a,c.position=this.node.position.add(cc.v3(r,o)),this.node.addChild(c);let u=cc.moveBy(4,cc.v2(0,n)),d=cc.delayTime(u.getDuration()-.5),h=cc.fadeOut(u.getDuration()-d.getDuration()),f=cc.spawn(u,cc.sequence(d,h)),p=cc.sequence(f,cc.callFunc(()=>{null!==l.node&&l.node.destroy()}));l.node.runAction(p)}updateWallet(e){this.lbChip.string=i.default.formatBetNumber(e,100),this.lbChip.node.runAction(cc.sequence(cc.scaleTo(.1,1.2),cc.scaleTo(.1,1)))}showPlayerInfo(){s.default.show(s.PlayerInfo.toPlayerInfo(this.id,this.user_name,this.wallet,this.avatar_id.toString(),this.vipLevel||0,this.sid||""))}};r([c(cc.Sprite)],l.prototype,"avatar",void 0),r([c(cc.Sprite)],l.prototype,"border",void 0),r([c(cc.Label)],l.prototype,"lbName",void 0),r([c(cc.Label)],l.prototype,"lbChip",void 0),r([c(sp.Skeleton)],l.prototype,"animDraw",void 0),r([c(sp.Skeleton)],l.prototype,"animLose",void 0),r([c(sp.Skeleton)],l.prototype,"animWin",void 0),r([c(cc.Font)],l.prototype,"fontPlus",void 0),r([c(cc.Font)],l.prototype,"fontSub",void 0),r([c],l.prototype,"isArranging",void 0),l=r([a],l),n.default=l,cc._RF.pop()},{"../../common/GlobalApp":"GlobalApp","../../common/Utils":"Utils","../../dialogs/playerinfo/PlayerInfoDialog":"PlayerInfoDialog"}],PlayerInfoDialog:[function(e,t,n){"use strict";cc._RF.push(t,"05e1bnz5IBKOondChtfSbfD","PlayerInfoDialog");var r,o=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0}),n.PlayerInfo=void 0;const i=e("../../common/GlobalApp"),s=e("../../common/Utils"),a=e("../../network/NetworkClient"),c=e("../../common/BaseDialog"),l=e("../../chat/ChatPresenter");class u{static toPlayerInfo(e,t,n,r,o,i){let s=new u;return s.id=e,s.name=t,s.chip=n,s.avatarId=r,s.vipLevel=o,s.sid=i,s}}n.PlayerInfo=u;const{ccclass:d,property:h}=cc._decorator;let f=r=class extends c.default{constructor(){super(...arguments),this.spAvatar=null,this.spAvatarBorder=null,this.spStars=null,this.frameStars=[],this.lbId=null,this.lbName=null,this.lbChip=null,this.iconScrollView=null,this.iconItem=null,this.iconFrames=[],this.playerInfo=null}static getInstance(){return this.instance}static show(e){null==this.instance||null==this.instance.node?i.default.getInstance().loadPrefabByMainBundle("res/prefabs/dialogs/PlayerInfoDialog",(t,n)=>{if(null!=t)return void i.default.getInstance().alertDialog.showMessage(t);let o=cc.instantiate(n);o.parent=i.default.getInstance().dialogRootNode,this.instance=o.getComponent(r),this.instance.node.zIndex=1e3,this.instance.showPlayerInfo(e)}):(this.instance.node.zIndex=1e3,this.instance.showPlayerInfo(e))}showPlayerInfo(e){this.show(),this.playerInfo=e,this.lbId.string="ID: "+e.sid,this.lbName.string=e.name.length>15?e.name.substr(0,15)+"...":e.name,this.lbChip.string=s.default.formatNumber(e.chip||0),this.spAvatar.spriteFrame=i.default.getInstance().getAvatarById(e.avatarId),this.spAvatarBorder.spriteFrame=i.default.getInstance().getAvatarBorderByVip(Number(e.vipLevel));let t=(e.vipLevel<=10?e.vipLevel:10)/2;for(let n=1;n<=5;n++)this.spStars.children[n-1].getComponent(cc.Sprite).spriteFrame=t>=n?this.frameStars[2]:t===n-.5?this.frameStars[1]:this.frameStars[0]}start(){this.initThrowIcons()}initThrowIcons(){this.iconItem.active=!1;for(let e=0;e<this.iconFrames.length;e++){let t=cc.instantiate(this.iconItem);t.parent=this.iconScrollView.content,t.getComponent(cc.Sprite).spriteFrame=this.iconFrames[e],t.on(cc.Node.EventType.TOUCH_END,()=>{this.actionThrowIcon(e)}),t.active=!0}}actionThrowIcon(e){let t={sender_id:i.default.getInstance().matchInfo.self.user_id,throw:{iconIndex:e,to_id:this.playerInfo.id}};a.default.getInstance().sendChat(l.default.getInstance().getCurrentChatRoomId(),t),this.close()}};f.instance=null,o([h(cc.Sprite)],f.prototype,"spAvatar",void 0),o([h(cc.Sprite)],f.prototype,"spAvatarBorder",void 0),o([h(cc.Node)],f.prototype,"spStars",void 0),o([h([cc.SpriteFrame])],f.prototype,"frameStars",void 0),o([h(cc.Label)],f.prototype,"lbId",void 0),o([h(cc.Label)],f.prototype,"lbName",void 0),o([h(cc.Label)],f.prototype,"lbChip",void 0),o([h(cc.ScrollView)],f.prototype,"iconScrollView",void 0),o([h(cc.Node)],f.prototype,"iconItem",void 0),o([h([cc.SpriteFrame])],f.prototype,"iconFrames",void 0),f=r=o([d],f),n.default=f,cc._RF.pop()},{"../../chat/ChatPresenter":"ChatPresenter","../../common/BaseDialog":"BaseDialog","../../common/GlobalApp":"GlobalApp","../../common/Utils":"Utils","../../network/NetworkClient":"NetworkClient"}],Processing:[function(e,t,n){"use strict";cc._RF.push(t,"9aee5NVwHRIPJ29cDzKqCB/","Processing");var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});const{ccclass:o,property:i}=cc._decorator;let s=class extends cc.Component{constructor(){super(...arguments),this.iconBorder=null,this.iconHeart=null,this.lbProcess=null,this.timeOutProcessing=null}start(){this.iconBorder.runAction(cc.repeatForever(cc.rotateBy(1,360))),this.iconHeart.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.35,0,1),cc.scaleTo(.35,1))))}show(e,t=15){this.node.active=e,this.lbProcess.string="",null!=this.timeOutProcessing&&this.unschedule(this.timeOutProcessing),t>0&&(this.timeOutProcessing=()=>{this.show(!1,t)},this.scheduleOnce(this.timeOutProcessing,t))}showWithMessage(e){this.show(!0,-1),this.lbProcess.string=e}};r([i(cc.Node)],s.prototype,"iconBorder",void 0),r([i(cc.Node)],s.prototype,"iconHeart",void 0),r([i(cc.Label)],s.prototype,"lbProcess",void 0),s=r([o],s),n.default=s,cc._RF.pop()},{}],ProfileDialog:[function(e,t,n){"use strict";cc._RF.push(t,"9714aUnFolNNpnLUJ/uKoUz","ProfileDialog");var r,o=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});const i=e("../../common/BaseDialog"),s=e("../../common/Broadcast"),a=e("../../common/ConfigClient"),c=e("../../common/Constants"),l=e("../../common/GlobalApp"),u=e("../../common/SPUtils"),d=e("../../common/User"),h=e("../../common/Utils"),f=e("../../language/LanguageController"),p=e("../../network/NetworkClient"),g=e("../sendgift/SendGiftDialog"),m=e("./ChangeNameDialog"),v=e("./ChangePasswordDialog"),b=e("./RegisterDialog"),{ccclass:w,property:y}=cc._decorator;let _=r=class extends i.default{constructor(){super(...arguments),this.spAvatar=null,this.spAvatarBorder=null,this.spStars=null,this.frameStars=[],this.lbDisplayName=null,this.lbChips=null,this.lbBank=null,this.btnChangePassWord=null,this.btnRegister=null,this.btnRename=null,this.lbRefCode=null,this.nodeConfirmRefCode=null,this.lbTimeLeftRefCode=null,this.edbRefCode=null,this.icDotRefCode=null,this.avatarScrollView=null,this.avatarItem=null,this.scheduleRefCode=null}static getInstance(){return this.instance}static show(){null==this.instance||null==this.instance.node?l.default.getInstance().loadPrefabByMainBundle("res/prefabs/dialogs/ProfileDialog",(e,t)=>{if(null!=e)return void l.default.getInstance().alertDialog.showMessage(e);let n=cc.instantiate(t);n.parent=l.default.getInstance().dialogRootNode,this.instance=n.getComponent(r),this.instance.node.zIndex=1e3,this.instance.show()}):(this.instance.node.zIndex=1e3,this.instance.show())}show(){super.show(),this.getUserProfile(),this.setListAvatar()}start(){s.Broadcast.register(s.Broadcast.AVATAR_CHANGED,()=>{this.spAvatar.spriteFrame=l.default.getInstance().getAvatarById(d.default.avatarId)},this),s.Broadcast.register(s.Broadcast.VIP_CHANGED,()=>{this.spAvatarBorder.spriteFrame=l.default.getInstance().getAvatarBorderByVip(d.default.vipLevel);let e=(d.default.vipLevel<=10?d.default.vipLevel:10)/2;for(let t=1;t<=5;t++)this.spStars.children[t-1].getComponent(cc.Sprite).spriteFrame=e>=t?this.frameStars[2]:e===t-.5?this.frameStars[1]:this.frameStars[0]},this),s.Broadcast.register(s.Broadcast.CHIP_CHANGED,()=>{h.default.runNumber(this.lbChips,d.default.accountChip,.3),h.default.runNumber(this.lbBank,d.default.bankChip,.3)},this),s.Broadcast.register(s.Broadcast.DISPLAY_NAME_CHANGED,()=>{let e=d.default.displayName;this.lbDisplayName.string=e.length>17?e.substring(0,14)+"...":e},this)}getUserProfile(){p.default.getInstance().rpcCall(a.default.Network.RPC_ID.GET_PROFILE,{}).then(e=>{d.default.init(e.payload),s.Broadcast.send(s.Broadcast.AVATAR_CHANGED),s.Broadcast.send(s.Broadcast.VIP_CHANGED),s.Broadcast.send(s.Broadcast.CHIP_CHANGED),s.Broadcast.send(s.Broadcast.DISPLAY_NAME_CHANGED),this.btnRename.active=this.btnChangePassWord.active=u.default.getLoginType()===c.Login.Enum.ID||u.default.getLoginType()===c.Login.Enum.GUEST&&!d.default.registrable,this.btnRegister.active=u.default.getLoginType()===c.Login.Enum.GUEST&&d.default.registrable,this.setRefCode()},e=>{cc.log("err when get PROFILE ",e)})}setRefCode(){if(this.unschedule(this.scheduleRefCode),0==d.default.remainTimeInputRefCode)return this.nodeConfirmRefCode.active=!1,this.lbRefCode.node.active=!0,void(this.lbRefCode.string=d.default.refCode);this.lbRefCode.node.active=!1,this.nodeConfirmRefCode.active=!0,this.edbRefCode.string="";let e=d.default.remainTimeInputRefCode;this.scheduleRefCode=()=>{e--;let t=Math.floor(e/86400);if(t>=1)return void(this.lbTimeLeftRefCode.string=`${f.default.getInstance().getString("txt_time_left")}: ${t} ${f.default.getInstance().getString("txt_day")}${t>1&&u.default.getLanguageCode()===c.Language.Enum.EN?"s":""}`);let n=Math.floor(e/3600),r=Math.floor(e%3600/60),o=Math.floor(e%60);this.lbTimeLeftRefCode.string=`Time left: ${n<10?"0"+n:n}:${r<10?"0"+r:r}:${o<10?"0"+o:o}`},this.schedule(this.scheduleRefCode,1,e,0)}actionSubmitRefCode(){this.edbRefCode.string?(l.default.getInstance().showProcessing(!0),p.default.getInstance().rpcCall(a.default.Network.RPC_ID.UPDATE_PROFILE,{refCode:this.edbRefCode.string.trim()}).then(e=>{l.default.getInstance().showProcessing(!1),l.default.getInstance().alertDialog.showMessage(f.default.getInstance().getString("success_ref_code")),d.default.init(e.payload),this.setRefCode()},e=>{cc.log("err when update PROFILE ",e),l.default.getInstance().showProcessing(!1),l.default.getInstance().alertDialog.showMessage(f.default.getInstance().getString("error_ref_code"))})):l.default.getInstance().alertDialog.showMessage(f.default.getInstance().getString("enter_ref_code"))}setListAvatar(){this.avatarScrollView.content.children.forEach(e=>e.active=!1),l.default.getInstance().avatarAtlas.getSpriteFrames().forEach((e,t)=>{let n=this.avatarScrollView.content.children[t];n||(n=cc.instantiate(this.avatarItem),this.avatarScrollView.content.addChild(n)),n.active=!0,n.getComponentInChildren(cc.Sprite).spriteFrame=e,n.off("click"),n.on("click",()=>{this.sendChangeAvatar(e)})}),this.avatarScrollView.scrollToLeft()}sendChangeAvatar(e){p.default.getInstance().rpcCall(a.default.Network.RPC_ID.UPDATE_PROFILE,{avatarId:e.name}).then(e=>{d.default.init(e.payload),s.Broadcast.send(s.Broadcast.AVATAR_CHANGED)},e=>{cc.log("err when change avatar ",e)})}actionChangeName(){m.default.show()}actionSendGift(){g.default.show()}actionChangePassword(){v.default.show()}actionRegister(){b.default.show()}};_.instance=null,o([y(cc.Sprite)],_.prototype,"spAvatar",void 0),o([y(cc.Sprite)],_.prototype,"spAvatarBorder",void 0),o([y(cc.Node)],_.prototype,"spStars",void 0),o([y([cc.SpriteFrame])],_.prototype,"frameStars",void 0),o([y(cc.Label)],_.prototype,"lbDisplayName",void 0),o([y(cc.Label)],_.prototype,"lbChips",void 0),o([y(cc.Label)],_.prototype,"lbBank",void 0),o([y(cc.Node)],_.prototype,"btnChangePassWord",void 0),o([y(cc.Node)],_.prototype,"btnRegister",void 0),o([y(cc.Node)],_.prototype,"btnRename",void 0),o([y(cc.Label)],_.prototype,"lbRefCode",void 0),o([y(cc.Node)],_.prototype,"nodeConfirmRefCode",void 0),o([y(cc.Label)],_.prototype,"lbTimeLeftRefCode",void 0),o([y(cc.EditBox)],_.prototype,"edbRefCode",void 0),o([y(cc.Node)],_.prototype,"icDotRefCode",void 0),o([y(cc.ScrollView)],_.prototype,"avatarScrollView",void 0),o([y(cc.Node)],_.prototype,"avatarItem",void 0),_=r=o([w],_),n.default=_,cc._RF.pop()},{"../../common/BaseDialog":"BaseDialog","../../common/Broadcast":"Broadcast","../../common/ConfigClient":"ConfigClient","../../common/Constants":"Constants","../../common/GlobalApp":"GlobalApp","../../common/SPUtils":"SPUtils","../../common/User":"User","../../common/Utils":"Utils","../../language/LanguageController":"LanguageController","../../network/NetworkClient":"NetworkClient","../sendgift/SendGiftDialog":"SendGiftDialog","./ChangeNameDialog":"ChangeNameDialog","./ChangePasswordDialog":"ChangePasswordDialog","./RegisterDialog":"RegisterDialog"}],QuickChatDialog:[function(e,t,n){"use strict";cc._RF.push(t,"4d20eMbJGpFKJ/KLRVUC+sh","QuickChatDialog");var r,o=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});const i=e("../../common/BaseDialog"),s=e("../../common/ConfigClient"),a=e("../../common/GlobalApp"),c=e("../../language/LanguageController"),l=e("../../network/HttpClient"),u=e("../../network/NetworkClient"),{ccclass:d,property:h}=cc._decorator;let f=r=class extends i.default{constructor(){super(...arguments),this.tabScrollView=null,this.tabItem=null,this.libraryScrollView=null,this.libraryItem=null,this.chatInGameScrollView=null,this.chatInGameItem=null,this.btnChange=null,this.btnConfirm=null,this.btnCancel=null,this.libraryChat=null,this.currentChatInGameKeys=[]}static getInstance(){return this.instance}static show(){null==this.instance||null==this.instance.node?a.default.getInstance().loadPrefabByMainBundle("res/prefabs/dialogs/QuickChatDialog",(e,t)=>{if(null!=e)return void a.default.getInstance().alertDialog.showMessage(e);let n=cc.instantiate(t);n.parent=a.default.getInstance().dialogRootNode,this.instance=n.getComponent(r),this.instance.node.zIndex=1e3,this.instance.show()}):(this.instance.node.zIndex=1e3,this.instance.show())}show(){super.show(),this.getQuickChat(),this.btnChange.active=!0,this.btnConfirm.active=!1,this.btnCancel.active=!1}getQuickChat(){u.default.getInstance().rpcCall(s.default.Network.RPC_ID.GET_QUICKCHAT,{}).then(e=>{l.default.get(s.default.Api.quickChatUrl,{}).then(t=>{cc.log(t),this.libraryChat=Object.assign(t,{currentTexts:e.payload.texts||[]});const n=[...t.cats].reverse();this.generateListTab(n),this.currentChatInGameKeys=(this.libraryChat.currentTexts.length>0?this.libraryChat.currentTexts:this.libraryChat.default).filter(e=>e),this.generateListChatInGame(this.currentChatInGameKeys)},()=>{})},e=>{console.log("err when get quick chat ",e)})}generateListTab(e){this.tabScrollView.content.children.forEach(e=>e.active=!1),e.forEach((t,n)=>{let r=this.tabScrollView.content.children[n];r||(r=cc.instantiate(this.tabItem),this.tabScrollView.content.addChild(r)),r.active=!0;let o=r.getComponentsInChildren(cc.Label);o[0].string=o[1].string=t.name,r.off("toggle"),r.on("toggle",()=>{this.generateListChat(t.texts)}),n===e.length-1&&(r.emit("toggle"),r.getComponent(cc.Toggle).check())})}generateListChat(e){this.libraryScrollView.content.children.forEach(e=>{e.active=!1,e.getComponent(cc.Toggle).isChecked=!1}),e&&e.forEach((e,t)=>{let n=this.libraryScrollView.content.children[t];n||(n=cc.instantiate(this.libraryItem),this.libraryScrollView.content.addChild(n)),n.active=!0,n.getComponentInChildren(cc.Label).string=this.libraryChat.texts[e]||"";let r=n.getComponentInChildren(cc.Button).node;r.off("click"),r.on("click",()=>{this.addChatToInGame(e)})})}generateListChatInGame(e,t=!1){this.chatInGameScrollView.content.children.forEach(e=>{e.active=!1,e.getComponentInChildren(cc.Button).node.active=t}),e.forEach((e,t)=>{let n=this.chatInGameScrollView.content.children[t];n||(n=cc.instantiate(this.chatInGameItem),this.chatInGameScrollView.content.addChild(n)),n.active=!0,n.getComponentInChildren(cc.Label).string=this.libraryChat.texts[e]||"";let r=n.getComponentInChildren(cc.Button).node;r.off("click"),r.on("click",()=>{this.deleteChatInGameItem(e)})})}addChatToInGame(e){this.actionChange(),-1===this.currentChatInGameKeys.indexOf(e)&&(this.currentChatInGameKeys.unshift(e),this.generateListChatInGame(this.currentChatInGameKeys,!0))}deleteChatInGameItem(e){const t=this.currentChatInGameKeys.indexOf(e);t>-1&&this.currentChatInGameKeys.splice(t,1),this.generateListChatInGame(this.currentChatInGameKeys,!0)}actionChange(){this.btnChange.active=!1,this.btnConfirm.active=!0,this.btnCancel.active=!0,this.chatInGameScrollView.content.children.forEach(e=>e.getComponentInChildren(cc.Button).node.active=!0)}actionCancel(){this.btnChange.active=!0,this.btnConfirm.active=!1,this.btnCancel.active=!1,this.currentChatInGameKeys=(this.libraryChat.currentTexts.length>0?this.libraryChat.currentTexts:this.libraryChat.default).filter(e=>e),this.generateListChatInGame(this.currentChatInGameKeys)}actionConfirm(){u.default.getInstance().rpcCall(s.default.Network.RPC_ID.UPDATE_QUICKCHAT,{texts:this.currentChatInGameKeys}).then(()=>{a.default.getInstance().alertDialog.showMessage(c.default.getInstance().getString("quick_chat_successfully")),this.generateListChatInGame(this.currentChatInGameKeys)},()=>{a.default.getInstance().alertDialog.showMessage(c.default.getInstance().getString("quick_chat_failed"))})}};f.instance=null,o([h(cc.ScrollView)],f.prototype,"tabScrollView",void 0),o([h(cc.Node)],f.prototype,"tabItem",void 0),o([h(cc.ScrollView)],f.prototype,"libraryScrollView",void 0),o([h(cc.Node)],f.prototype,"libraryItem",void 0),o([h(cc.ScrollView)],f.prototype,"chatInGameScrollView",void 0),o([h(cc.Node)],f.prototype,"chatInGameItem",void 0),o([h(cc.Node)],f.prototype,"btnChange",void 0),o([h(cc.Node)],f.prototype,"btnConfirm",void 0),o([h(cc.Node)],f.prototype,"btnCancel",void 0),f=r=o([d],f),n.default=f,cc._RF.pop()},{"../../common/BaseDialog":"BaseDialog","../../common/ConfigClient":"ConfigClient","../../common/GlobalApp":"GlobalApp","../../language/LanguageController":"LanguageController","../../network/HttpClient":"HttpClient","../../network/NetworkClient":"NetworkClient"}],RegisterDialog:[function(e,t,n){"use strict";cc._RF.push(t,"64d64If/qlN5YmpVnzmuHWs","RegisterDialog");var r,o=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});const i=e("../../common/BaseDialog"),s=e("../../common/ConfigClient"),a=e("../../common/GlobalApp"),c=e("../../language/LanguageController"),l=e("../../network/NetworkClient"),u=e("./ProfileDialog"),{ccclass:d,property:h}=cc._decorator;let f=r=class extends i.default{constructor(){super(...arguments),this.edbUsername=null,this.edbPassword=null,this.edbRePassword=null}static getInstance(){return this.instance}static show(){null==this.instance||null==this.instance.node?a.default.getInstance().loadPrefabByMainBundle("res/prefabs/dialogs/RegisterDialog",(e,t)=>{if(null!=e)return void a.default.getInstance().alertDialog.showMessage(e);let n=cc.instantiate(t);n.parent=a.default.getInstance().dialogRootNode,this.instance=n.getComponent(r),this.instance.node.zIndex=1e3,this.instance.show()}):(this.instance.node.zIndex=1e3,this.instance.show())}show(){super.show(),this.edbUsername.string="",this.edbPassword.string="",this.edbRePassword.string=""}actionRegister(){this.edbUsername.string.trim()?this.edbPassword.string.trim()?this.edbRePassword.string.trim()?this.edbPassword.string.trim()===this.edbRePassword.string.trim()?(a.default.getInstance().showProcessing(!0),l.default.getInstance().rpcCall(s.default.Network.RPC_ID.LINK_USERNAME,{user_name:this.edbUsername.string.trim(),password:this.edbPassword.string.trim()}).then(()=>{var e;a.default.getInstance().showProcessing(!1),a.default.getInstance().alertDialog.showMessage(c.default.getInstance().getString("register_success")),null===(e=u.default.getInstance())||void 0===e||e.getUserProfile(),this.close()},e=>{a.default.getInstance().showProcessing(!1),e.json().then(e=>{cc.log("err when register",e),a.default.getInstance().alertDialog.showMessage(c.default.getInstance().getString("register_error")+"\n"+e.message)})})):a.default.getInstance().alertDialog.showMessage(c.default.getInstance().getString("password_not_match")):a.default.getInstance().alertDialog.showMessage(c.default.getInstance().getString("plz_reenter_password")):a.default.getInstance().alertDialog.showMessage(c.default.getInstance().getString("plz_enter_password")):a.default.getInstance().alertDialog.showMessage(c.default.getInstance().getString("plz_enter_username"))}};f.instance=null,o([h(cc.EditBox)],f.prototype,"edbUsername",void 0),o([h(cc.EditBox)],f.prototype,"edbPassword",void 0),o([h(cc.EditBox)],f.prototype,"edbRePassword",void 0),f=r=o([d],f),n.default=f,cc._RF.pop()},{"../../common/BaseDialog":"BaseDialog","../../common/ConfigClient":"ConfigClient","../../common/GlobalApp":"GlobalApp","../../language/LanguageController":"LanguageController","../../network/NetworkClient":"NetworkClient","./ProfileDialog":"ProfileDialog"}],SPUtils:[function(e,t,n){"use strict";cc._RF.push(t,"dcde3FyGrFJaZMgIZgeoRqH","SPUtils"),Object.defineProperty(n,"__esModule",{value:!0});const r=e("./Constants");n.default=class{static encode(e,t){var n="";e.toString();for(var r=0;r<e.length;r++){var o=e.charCodeAt(r)^t;n+=String.fromCharCode(o)}return n}static get(e,t=""){var n=this.encode(e,98425846).toString(),r=cc.sys.localStorage.getItem(n);return r?r=this.encode(r,98425846).toString():t}static set(e,t){t=t.toString();var n=""+this.encode(e,98425846),r=""+this.encode(t,98425846);cc.sys.localStorage.setItem(n,r)}static setUserName(e){this.set("loginUserName",e)}static getUserName(){return this.get("loginUserName","")}static setUserPassword(e){this.set("loginPassword",e)}static getUserPassword(){return this.get("loginPassword","")}static setLoginType(e){this.set("loginType",e+"")}static getLoginType(){return r.Login.valueToEnum(this.get("loginType","0"))}static setIsAutoLogin(e){this.set("isAutoLogin",e+"")}static getIsAutoLogin(){return"true"===this.get("isAutoLogin","true")}static setDeviceId(e){this.set("deviceId",e)}static getDeviceId(){return this.get("deviceId","")}static setLanguageCode(e){this.set("languageCode",e)}static getLanguageCode(){return this.get("languageCode")}static setSound(e){this.set("sound",JSON.stringify(e))}static getSound(){return"true"===this.get("sound")}static setMusic(e){this.set("music",JSON.stringify(e))}static getMusic(){return"true"===this.get("music")}static setVibration(e){this.set("vibration",JSON.stringify(e))}static getVibration(){return"true"===this.get("vibration")}static setToken(e){this.set("token",e)}static getToken(){return this.get("token","")}static seRefreshToken(e){this.set("refreshToken",e)}static getRefreshToken(){return this.get("refreshToken","")}},cc._RF.pop()},{"./Constants":"Constants"}],SendGiftDialog:[function(e,t,n){"use strict";cc._RF.push(t,"ac25fS7jGNEOavcbVyxihhH","SendGiftDialog");var r,o=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});const i=e("../../common/BaseDialog"),s=e("../../common/Broadcast"),a=e("../../common/ConfigClient"),c=e("../../common/Constants"),l=e("../../common/GlobalApp"),u=e("../../common/User"),d=e("../../common/Utils"),h=e("../../language/LanguageController"),f=e("../../network/NetworkClient"),{ccclass:p,property:g}=cc._decorator;let m=r=class extends i.default{constructor(){super(...arguments),this.lbChip=null,this.tabs=null,this.tabContents=null,this.lbFee=null,this.edbIdFriend=null,this.edbChips=null,this.historyScrollView=null,this.historyItem=null,this.sprBgItemHistory=null,this.feeSendGift=0,this.pageSize=20}static getInstance(){return this.instance}static show(){null==this.instance||null==this.instance.node?l.default.getInstance().loadPrefabByMainBundle("res/prefabs/dialogs/SendGiftDialog",(e,t)=>{if(null!=e)return void l.default.getInstance().alertDialog.showMessage(e);let n=cc.instantiate(t);n.parent=l.default.getInstance().dialogRootNode,this.instance=n.getComponent(r),this.instance.node.zIndex=1e3,this.instance.show()}):(this.instance.node.zIndex=1e3,this.instance.show())}show(){super.show(),this.tabs.children[1].getComponent(cc.Toggle).check(),this.tabChanged(1),this.getUserProfile(),this.getFeeSendGift()}start(){for(let e=0;e<this.tabs.children.length;e++)this.tabs.children[e].on("toggle",()=>{this.tabChanged(e)});s.Broadcast.register(s.Broadcast.CHIP_CHANGED,()=>{d.default.runNumber(this.lbChip,u.default.accountChip,.3)},this)}tabChanged(e){for(let t=0;t<this.tabContents.children.length;t++)this.tabContents.children[t].active=t===e;switch(e){case 0:this.getHistory();break;case 1:this.setFeeSendGift(0)}}setFeeSendGift(e){this.lbFee.string=`${100*e}%`}edbChipsDidBegan(){this.edbChips.string=this.edbChips.string?Number(this.edbChips.string)+"":""}edbChipsDidEnded(){this.edbChips.string=this.edbChips.string.split(/[.-]/).join("");const e=Number(this.edbChips.string);e>u.default.accountChip&&(this.edbChips.string=u.default.accountChip+""),this.edbChips.string=this.edbChips.string?d.default.formatNumberToString(e):""}actionSendGift(){let e="";""===this.edbIdFriend.string?e="Invalid friend id":Number(this.edbChips.string)<=0?e="Chips invalid":Number(this.edbChips.string)>u.default.accountChip*(1-this.feeSendGift)&&(e=h.default.getInstance().getString("not_enought_gold")),e?l.default.getInstance().alertDialog.showMessage(e):f.default.getInstance().rpcCall(a.default.Network.RPC_ID.SEND_GIFT,{chipsInBank:Number(this.edbChips.string),recipientId:this.edbIdFriend.string}).then(()=>{this.edbIdFriend.string="",this.edbChips.string="",l.default.getInstance().alertDialog.showMessage("Send gift successfully!"),this.getUserProfile()},()=>{l.default.getInstance().alertDialog.showMessage("Error when send gift!")})}getUserProfile(){f.default.getInstance().rpcCall(a.default.Network.RPC_ID.GET_PROFILE,{}).then(e=>{u.default.init(e.payload),s.Broadcast.send(s.Broadcast.CHIP_CHANGED)},e=>{cc.log("err when get PROFILE ",e)})}getHistory(){f.default.getInstance().rpcCall(a.default.Network.RPC_ID.WALLET_TRANSACTION,{limit:this.pageSize,meta_action:"bank_topup",meta_bank_action:c.MetaBank.Enum.SEND_GIFT}).then(e=>{this.setHistory(e.payload.transactions)},e=>{cc.log("err when load history sendgift",e)})}setHistory(e){this.historyScrollView.content.children.forEach(e=>{e.active=!1}),e.forEach((e,t)=>{let n=this.historyScrollView.content.children[t];n||(n=cc.instantiate(this.historyItem),this.historyScrollView.content.addChild(n)),n.active=!0,n.getComponentInChildren(cc.Sprite).spriteFrame=t%2==0?this.sprBgItemHistory:null;let r=n.getComponentsInChildren(cc.Label),o=new Date(1970,0,1);o.setSeconds(e.createdTime),r[0].string=o+"",r[1].string=e.metadata.bank_action,r[2].string=d.default.formatNumberToString(e.changeset.chips)})}getFeeSendGift(){f.default.getInstance().rpcCall(a.default.Network.RPC_ID.SEND_GIFT_FEE,{}).then(e=>{this.feeSendGift=e.payload.percentFee,this.lbFee.string=`${this.feeSendGift}%`},e=>{cc.log("err when get fee send gift",e)})}};m.instance=null,o([g(cc.Label)],m.prototype,"lbChip",void 0),o([g(cc.Node)],m.prototype,"tabs",void 0),o([g(cc.Node)],m.prototype,"tabContents",void 0),o([g(cc.Label)],m.prototype,"lbFee",void 0),o([g(cc.EditBox)],m.prototype,"edbIdFriend",void 0),o([g(cc.EditBox)],m.prototype,"edbChips",void 0),o([g(cc.ScrollView)],m.prototype,"historyScrollView",void 0),o([g(cc.Node)],m.prototype,"historyItem",void 0),o([g(cc.SpriteFrame)],m.prototype,"sprBgItemHistory",void 0),m=r=o([p],m),n.default=m,cc._RF.pop()},{"../../common/BaseDialog":"BaseDialog","../../common/Broadcast":"Broadcast","../../common/ConfigClient":"ConfigClient","../../common/Constants":"Constants","../../common/GlobalApp":"GlobalApp","../../common/User":"User","../../common/Utils":"Utils","../../language/LanguageController":"LanguageController","../../network/NetworkClient":"NetworkClient"}],SettingDialog:[function(e,t,n){"use strict";cc._RF.push(t,"0fc36ajmNVO76sP6uhPvlON","SettingDialog");var r,o=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});const i=e("../../common/BaseDialog"),s=e("../../common/Broadcast"),a=e("../../common/ConfigClient"),c=e("../../common/Dropdown"),l=e("../../common/GlobalApp"),u=e("../../common/SPUtils"),d=e("../../common/User"),h=e("../../common/Utils"),f=e("../../language/LanguageController"),p=e("../../network/NetworkClient"),g=e("../quickchat/QuickChatDialog"),{ccclass:m,property:v}=cc._decorator;let b=r=class extends i.default{constructor(){super(...arguments),this.toggleSound=null,this.toggleMusic=null,this.toggleVibration=null,this.lbVersion=null,this.dropdownLanguage=null}static getInstance(){return this.instance}start(){this.toggleSound.node.on("toggle",()=>{u.default.setSound(this.toggleSound.isChecked),s.Broadcast.send(s.Broadcast.AUDIO_CHANGED)}),this.toggleMusic.node.on("toggle",()=>{u.default.setMusic(this.toggleMusic.isChecked),s.Broadcast.send(s.Broadcast.AUDIO_CHANGED)}),this.toggleVibration.node.on("toggle",()=>{u.default.setVibration(this.toggleVibration.isChecked),s.Broadcast.send(s.Broadcast.VIBRATION_CHANGED)}),s.Broadcast.register(s.Broadcast.AUDIO_CHANGED,()=>{this.sendUpdateProfile()},this),s.Broadcast.register(s.Broadcast.VIBRATION_CHANGED,()=>{this.sendUpdateProfile(),cc.sys.isNative&&u.default.getVibration()&&h.default.vibrator()},this),this.dropdownLanguage.setOptions(d.default.langAvailables.map(e=>e.displayName)),this.dropdownLanguage.setOnValueChange(e=>{f.default.getInstance().setLanguage(d.default.langAvailables[e].isoCode),this.sendUpdateProfile()}),this.dropdownLanguage.setValue(d.default.langAvailables.findIndex(e=>e.isoCode===u.default.getLanguageCode())||0)}static show(){null==this.instance||null==this.instance.node?l.default.getInstance().loadPrefabByMainBundle("res/prefabs/dialogs/SettingDialog",(e,t)=>{if(null!=e)return void l.default.getInstance().alertDialog.showMessage(e);let n=cc.instantiate(t);n.parent=l.default.getInstance().dialogRootNode,this.instance=n.getComponent(r),this.instance.node.zIndex=1e3,this.instance.show()}):(this.instance.node.zIndex=1e3,this.instance.show())}show(){super.show(),this.lbVersion.string=a.default.Bundle.version,this.toggleSound.isChecked=u.default.getSound(),this.toggleMusic.isChecked=u.default.getMusic(),this.toggleVibration.isChecked=u.default.getVibration()}actionQuickChat(){g.default.show()}actionFeedback(){}actionDeleteAccount(){}actionHelp(){const e=d.default.linkFanpageFb.split("https://www.facebook.com/")[1];cc.sys.isNative||""===e||window.open(d.default.linkFanpageFb)}actionGroup(){cc.sys.isBrowser?window.open(d.default.linkGroup):h.default.openGroup()}actionFanpage(){cc.sys.isBrowser?window.open(d.default.linkFanpageFb):h.default.openFanpage()}actionLogout(){this.close(),p.default.getInstance().sessionLogout().then(()=>{u.default.setIsAutoLogin(!1),u.default.setUserName(""),u.default.setUserPassword(""),d.default.clear(),l.default.getInstance().hotNews.stopHotNews(),l.default.getInstance().loadSceneByBundle(a.default.Bundle.BUNDLE_NAME.LOBBY,a.default.AppInfo.SCENE_NAME.LOGIN)},()=>{})}sendUpdateProfile(){p.default.getInstance().rpcCall(a.default.Network.RPC_ID.UPDATE_PROFILE,{sound:u.default.getSound(),music:u.default.getMusic(),vibration:u.default.getVibration(),language:u.default.getLanguageCode()}).then(e=>{d.default.init(e.payload)},()=>{})}};b.instance=null,o([v(cc.Toggle)],b.prototype,"toggleSound",void 0),o([v(cc.Toggle)],b.prototype,"toggleMusic",void 0),o([v(cc.Toggle)],b.prototype,"toggleVibration",void 0),o([v(cc.Label)],b.prototype,"lbVersion",void 0),o([v(c.default)],b.prototype,"dropdownLanguage",void 0),b=r=o([m],b),n.default=b,cc._RF.pop()},{"../../common/BaseDialog":"BaseDialog","../../common/Broadcast":"Broadcast","../../common/ConfigClient":"ConfigClient","../../common/Dropdown":"Dropdown","../../common/GlobalApp":"GlobalApp","../../common/SPUtils":"SPUtils","../../common/User":"User","../../common/Utils":"Utils","../../language/LanguageController":"LanguageController","../../network/NetworkClient":"NetworkClient","../quickchat/QuickChatDialog":"QuickChatDialog"}],ShopDialog:[function(e,t,n){"use strict";cc._RF.push(t,"23f395bPrxPtp86XI9Uhcca","ShopDialog");var r,o=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0}),n.ShopDealCategory=n.ShopDealChanel=n.ShopDealItem=n.ShopDealCategoryEnum=void 0;const i=e("../../common/BaseDialog"),s=e("../../common/Broadcast"),a=e("../../common/ConfigClient"),c=e("../../common/GlobalApp"),l=e("../../common/Utils"),u=e("../../network/NetworkClient"),d=e("../banner/BannerDialog"),{ccclass:h,property:f}=cc._decorator;var p;(function(e){e.SMS="sms",e.WALLET="wallet",e.IAP="iap"})(p=n.ShopDealCategoryEnum||(n.ShopDealCategoryEnum={}));class g{static toShopDealItem(e){let t=new g;return t.id=e.id,t.chips=Number(e.chips),t.amountChips=Number(e.amountChips),t.bonus=Number(e.bonus),t.price=Number(e.price),t.name=e.name,t.currency=e.currency,t.percent=e.percent,t.chipPerUnit=Number(e.chipPerUnit),t}static toShopDealItems(e){return e.map(e=>this.toShopDealItem(e))}}n.ShopDealItem=g;class m{static toShopDealChanel(e,t){let n=new m;return n.name=e,n.dealItems=t,n}static toShopDealChanels(e){return Object.keys(e).filter(e=>"best"!==e).map(t=>this.toShopDealChanel(t,g.toShopDealItems(e[t])))}}n.ShopDealChanel=m;class v{static toShopDealCategories(e){let t=m.toShopDealChanels(e),n=[],r={};return t.forEach(e=>{if("best"!==e.name)switch(e.name){case"sms":if(!r[p.SMS]){let e=new v;e.name=p.SMS,e.displayName="SMS",e.deals=[],r[p.SMS]=e,n.push(e)}r[p.SMS].deals.push(e);break;case"iaps":if(!r[p.IAP]){let e=new v;e.name=p.IAP,e.displayName="IAP",e.deals=[],r[p.IAP]=e,n.push(e)}r[p.IAP].deals.push(e);break;default:if(!r[p.WALLET]){let e=new v;e.name=p.WALLET,e.displayName="Wallet",e.deals=[],r[p.WALLET]=e,n.push(e)}r[p.WALLET].deals.push(e)}}),n}}n.ShopDealCategory=v;let b=r=class extends i.default{constructor(){super(...arguments),this.categoryScrollView=null,this.categoryItem=null,this.chanelScrollView=null,this.chanelItem=null,this.dealScrollView=null,this.dealItem=null,this.chipIcons=[],this.bestDeal=null,this.category=null}static getInstance(){return this.instance}static show(e=null){null==this.instance||null==this.instance.node?c.default.getInstance().loadPrefabByMainBundle("res/prefabs/dialogs/ShopDialog",(t,n)=>{if(null!=t)return void c.default.getInstance().alertDialog.showMessage(t);let o=cc.instantiate(n);o.parent=c.default.getInstance().dialogRootNode,this.instance=o.getComponent(r),this.instance.node.zIndex=1e3,this.instance.showShop(e)}):(this.instance.node.zIndex=1e3,this.instance.showShop(e))}showShop(e){super.show(),d.default.show(),this.category=e,this.getListDeal()}setListDealCategory(e){cc.log("dealCategorys",e),this.categoryScrollView.content.children.forEach(e=>{e.active=!1}),e.forEach((e,t)=>{let n=this.categoryScrollView.content.children[t];n||(n=cc.instantiate(this.categoryItem),this.categoryScrollView.content.addChild(n)),n.active=!0,n.getComponentsInChildren(cc.Label).forEach(t=>{t.string=e.displayName}),n.off("toggle"),n.on("toggle",()=>{this.setListDealChanel(e)}),(this.category&&e.name===this.category||!this.category&&0==t)&&(n.getComponent(cc.Toggle).check(),this.setListDealChanel(e))})}setListDealChanel(e){this.chanelScrollView.content.children.forEach(e=>{e.active=!1}),e.name==p.WALLET?e.deals.reverse().forEach((t,n)=>{let r=this.chanelScrollView.content.children[n];r||(r=cc.instantiate(this.chanelItem),this.chanelScrollView.content.addChild(r)),r.active=!0,r.getComponentsInChildren(cc.Label).forEach(e=>{e.string=t.name}),r.off("toggle"),r.on("toggle",()=>{this.setListDeal(e.name,t.dealItems)}),n==e.deals.length-1&&(r.getComponent(cc.Toggle).check(),this.setListDeal(e.name,t.dealItems))}):this.setListDeal(e.name,e.deals.flatMap(e=>e.dealItems))}setListDeal(e,t){this.dealScrollView.content.children.forEach(e=>{e.active=!1}),t.forEach((t,n)=>{let r=this.dealScrollView.content.children[n];r||(r=cc.instantiate(this.dealItem),this.dealScrollView.content.addChild(r)),r.active=!0;let o=this.chipIcons[n]?this.chipIcons[n]:this.chipIcons[this.chipIcons.length-1];r.getComponentInChildren(cc.Sprite).spriteFrame=o;let i=r.getComponentsInChildren(cc.Label);i[0].string=`${l.default.formatWalletNumber(t.chips)} CHIPS`,i[1].string=`1 ${t.currency} = ${t.chipPerUnit} Chips`,i[2].string=t.percent+"%",i[3].string=t.price+"";let s=r.getComponentInChildren(cc.Button);s.node.off("click"),s.node.on("click",()=>{e===p.IAP&&cc.sys.isNative&&l.default.buyItem(t.id,e=>{u.default.getInstance().validatePurchaseGoogle(JSON.stringify({json:e})).then(e=>{cc.log("validatePurchaseGoogle success",JSON.stringify(e)),this.getUserProfile()},e=>{cc.log("validatePurchaseGoogle error",e)})})})})}setBestDeal(e){let t=this.bestDeal.getComponentsInChildren(cc.Label);t[0].string=`${l.default.formatWalletNumber(e.chips)}`,t[1].string=e.price+""}getListDeal(){u.default.getInstance().rpcCall(a.default.Network.RPC_ID.LIST_DEAL,{}).then(e=>{this.setListDealCategory(v.toShopDealCategories(e.payload)),this.setBestDeal(g.toShopDealItem(e.payload.best))},e=>{cc.log("err when get PROFILE ",e)})}getUserProfile(){u.default.getInstance().rpcCall(a.default.Network.RPC_ID.GET_PROFILE,{}).then(e=>{cc.log("data",e),s.Broadcast.send(s.Broadcast.CHIP_CHANGED)},e=>{cc.log("err when get PROFILE ",e)})}};b.instance=null,o([f(cc.ScrollView)],b.prototype,"categoryScrollView",void 0),o([f(cc.Node)],b.prototype,"categoryItem",void 0),o([f(cc.ScrollView)],b.prototype,"chanelScrollView",void 0),o([f(cc.Node)],b.prototype,"chanelItem",void 0),o([f(cc.ScrollView)],b.prototype,"dealScrollView",void 0),o([f(cc.Node)],b.prototype,"dealItem",void 0),o([f([cc.SpriteFrame])],b.prototype,"chipIcons",void 0),o([f(cc.Node)],b.prototype,"bestDeal",void 0),b=r=o([h],b),n.default=b,cc._RF.pop()},{"../../common/BaseDialog":"BaseDialog","../../common/Broadcast":"Broadcast","../../common/ConfigClient":"ConfigClient","../../common/GlobalApp":"GlobalApp","../../common/Utils":"Utils","../../network/NetworkClient":"NetworkClient","../banner/BannerDialog":"BannerDialog"}],TableList:[function(e,t,n){"use strict";cc._RF.push(t,"99ca8akRyVHtpHVNzAGdug7","TableList");var r,o=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0}),n.Bet=void 0;const i=e("../common/ConfigClient"),s=e("../common/Constants"),a=e("../common/GlobalApp"),c=e("../common/User"),l=e("../common/Utils"),u=e("../dialogs/banner/BannerDialog"),d=e("../language/LanguageController"),h=e("../network/NetworkClient"),f=e("./CreateTableDialog"),p=e("./EnterPasswordDialog"),g=e("./GameList");class m{static toBet(e){let t=new m;return t.id=Number(e.id),t.enable=e.enable,t.markUnit=e.markUnit,t.gameId=Number(e.gameId),t.xJoin=e.xJoin,t.agJoin=Number(e.agJoin),t.xPlayNow=e.xPlayNow,t.agPlayNow=Number(e.agPlayNow),t.xLeave=e.xLeave,t.agLeave=Number(e.agLeave),t.xFee=e.xFee,t.agFee=Number(e.agFee),t.newFee=e.newFee,t.countPlaying=Number(e.countPlaying),t.minVip=Number(e.minVip),t.maxVip=Number(e.maxVip),t.betDisableType=e.betDisableType,t}static toBets(e){let t=[];return e.forEach(e=>t.push(m.toBet(e))),t}}n.Bet=m;const{ccclass:v,property:b}=cc._decorator;let w=r=class extends cc.Component{constructor(){super(...arguments),this.tabs=[],this.tabContents=[],this.lbGameName=null,this.lbChips=null,this.edbFindMatch=null,this.scrollViewBet=null,this.itemBet=null,this.btnNextBet=null,this.btnPrevBet=null,this.btnBestChoose=null,this.scrollViewTable=null,this.itemTable=null,this.scrollViewBetTable=null,this.itemBetTable=null,this.btnNextBetTable=null,this.changeTabDistanceTime=1,this.changeTabLastTime=0,this.bets=[]}static getInstance(){return this.instance}onLoad(){r.instance=this}start(){this.lbGameName.string=s.Game.Info[this.gameCode].gameName,this.tabs.forEach((e,t)=>e.node.on("toggle",()=>{this.changeTab(null,t)})),this.tabs[1].check(),this.tabs[1].node.emit("toggle"),this.getUserProfile(),u.default.show()}setGameCode(e){this.gameCode=e}changeTab(e,t){this.btnNextBet.active=!1,this.btnPrevBet.active=!1,this.tabContents.forEach((e,n)=>e.active=n===t),this.getListBet()}getUserProfile(){h.default.getInstance().rpcCall(i.default.Network.RPC_ID.GET_PROFILE,{}).then(e=>{c.default.init(e.payload),this.lbChips.string=l.default.formatNumberToString(c.default.accountChip)},e=>{cc.log("err when get PROFILE ",e)})}getListBet(){a.default.getInstance().showProcessing(!0),h.default.getInstance().rpcCall(i.default.Network.RPC_ID.LIST_BET,{code:this.gameCode}).then(e=>{a.default.getInstance().showProcessing(!1),e.payload.bets&&(this.bets=m.toBets(e.payload.bets),this.bets.sort((e,t)=>Number(e.markUnit)-Number(t.markUnit)),this.setListBet(this.bets),this.setBestChoose(m.toBet(e.payload.bestChoice)))},e=>{cc.log("err when get list bet",e),a.default.getInstance().showProcessing(!1)})}setListBet(e){this.btnPrevBet.active=!1,this.scrollViewBet.content.children.forEach(e=>e.active=!1);for(let n=0;n<e.length;n++){let t=this.scrollViewBet.content.children[n];t||(t=cc.instantiate(this.itemBet),this.scrollViewBet.content.addChild(t)),t.active=!0;let r=t.getComponentsInChildren(cc.Label);r[0].string=l.default.formatBetNumber(e[n].markUnit||0).toString().toLowerCase(),r[1].string=e[n].countPlaying+"";const o=e[n].enable||e[n].betDisableType<s.Game.BetDisableType.BELOW_MIN_VIP;t.getComponent(cc.Button).interactable=o,r[0].setMaterial(0,cc.MaterialVariant.create(cc.Material.getBuiltinMaterial(o?"2d-sprite":"2d-gray-sprite"),r[0])),t.off("click"),t.on("click",()=>{this.actionChooseBet(e[n])})}this.scrollViewBet.scrollToLeft(.5),this.scrollViewBetTable.content.children.forEach(e=>e.active=!1);let t=[...e].reverse();for(let n=0;n<t.length;n++){let e=this.scrollViewBetTable.content.children[n];e||(e=cc.instantiate(this.itemBetTable),this.scrollViewBetTable.content.addChild(e)),e.active=!0;let r=e.getComponentsInChildren(cc.Label);r[0].string=l.default.formatNumberToString(t[n].markUnit),r[0].spacingX=t[n].markUnit<1e7?-8:-6,r[1].string=l.default.formatNumberToString(t[n].markUnit),r[1].spacingX=t[n].markUnit<1e7?-6:-4,e.off("toggle"),e.on("toggle",()=>{this.getListTableByBet(t[n])}),n===t.length-1&&(e.getComponent(cc.Toggle).check(),e.emit("toggle"))}this.scrollViewBetTable.scrollToLeft(.5)}setBestChoose(e){let t=this.btnBestChoose.getComponentsInChildren(cc.Label);t[0].string=l.default.formatBetNumber(e.markUnit||0).toString().toLowerCase(),t[1].string=e.countPlaying+"";const n=e.enable||e.betDisableType<s.Game.BetDisableType.BELOW_MIN_VIP;this.btnBestChoose.getComponent(cc.Button).interactable=n,t[0].setMaterial(0,cc.MaterialVariant.create(cc.Material.getBuiltinMaterial(n?"2d-sprite":"2d-gray-sprite"),t[0])),this.btnBestChoose.off("click"),this.btnBestChoose.on("click",()=>{this.actionChooseBet(e)})}getListTableByBet(e){h.default.getInstance().rpcCall(i.default.Network.RPC_ID.FIND_MATCH,{mark_unit:e.markUnit,game_code:this.gameCode}).then(e=>{var t;this.scrollViewTable.content.children.forEach(e=>e.active=!1);let n=e.payload.matches;if(n)for(let r=0;r<n.length;r++){let e=this.scrollViewTable.content.children[r];e||(e=cc.instantiate(this.itemTable),this.scrollViewTable.content.addChild(e)),e.active=!0;const o=n[r].maxSize,i=n[r].size;let s=e.getComponentInChildren(cc.Layout).node;s.children.forEach(e=>e.active=!1);for(let t=0;t<o;t++){let e=s.children[t];e||(e=cc.instantiate(s.children[0]),s.addChild(e)),e.active=!0,e.getComponent(cc.Toggle).isChecked=t<i}let u=e.getComponentsInChildren(cc.Label);u[0].string=l.default.formatBetNumber(n[r].markUnit),u[1].string=(null===(t=n[r].profiles)||void 0===t?void 0:t.map(e=>e.userName).join(","))+"  ",u[2].string=n[r].tableId;let h=e.getChildByName("btnJoin");h.getComponent(cc.Button).interactable=i<o,h.getComponentInChildren(cc.Label).string=d.default.getInstance().getString(i<o?"txt_join_now":"txt_full"),h.off("click"),h.on("click",()=>{c.default.accountChip<n[r].markUnit?a.default.getInstance().alertDialog.showMessage(d.default.getInstance().getString("txt_not_enough_money_gl")):n[r].open?this.joinMatch(n[r].matchId):p.default.show(e=>{this.joinMatch(n[r].matchId,null,{passowrd:e})})})}},e=>{cc.log("err when find match",e)})}actionFindMatch(){const e=Number(this.edbFindMatch.string.trim());isNaN(e)||0===e?a.default.getInstance().alertDialog.showMessage(d.default.getInstance().getString("enter_find_match")):(a.default.getInstance().showProcessing(!0),h.default.getInstance().rpcCall(i.default.Network.RPC_ID.FIND_MATCH,{table_id:e,game_code:this.gameCode}).then(e=>{var t;if(a.default.getInstance().showProcessing(!1),(null===(t=e.payload.matches)||void 0===t?void 0:t.length)>0){const t=e.payload.matches[0];if(c.default.accountChip<Number(t.markUnit))return void a.default.getInstance().alertDialog.showMessage(d.default.getInstance().getString("txt_not_enough_money_gl"));t.open?this.joinMatch(t.matchId):p.default.show(e=>{this.joinMatch(t.matchId,null,{passowrd:e})})}else this.edbFindMatch.string="",a.default.getInstance().alertDialog.showMessage(d.default.getInstance().getString("find_match_error"))},e=>{cc.log("err when find match",e),a.default.getInstance().showProcessing(!1),this.edbFindMatch.string="",a.default.getInstance().alertDialog.showMessage(d.default.getInstance().getString("find_match_error"))}))}actionChooseBet(e){c.default.accountChip<e.agJoin?a.default.getInstance().alertDialog.showMessage(d.default.getInstance().getString("txt_not_enough_money_gl")):(a.default.getInstance().showProcessing(!0),h.default.getInstance().rpcCall(i.default.Network.RPC_ID.FIND_MATCH,{mark_unit:e.markUnit,game_code:this.gameCode,with_non_open:!1,create:!0}).then(e=>{let t=e.payload.matches[0];a.default.getInstance().showProcessing(!0),h.default.getInstance().joinMatch(t.matchId).then(e=>{a.default.getInstance().openGame(this.gameCode,()=>{a.default.getInstance().showProcessing(!1),a.default.getInstance().matchInfo=e})},e=>{cc.log("err when join match",e),a.default.getInstance().showProcessing(!1)})},t=>{cc.log("err when find match",t),a.default.getInstance().showProcessing(!1),this.createMatch(e.markUnit)}))}onScrollBet(){let e=Math.abs(this.scrollViewBet.getScrollOffset().x),t=this.scrollViewBet.getMaxScrollOffset().x;this.btnNextBet.active=e<t-1,this.btnPrevBet.active=e>=t-1}onScrollBetToEnd(){let e=this.scrollViewBet.getMaxScrollOffset();this.scrollViewBet.scrollToOffset(cc.v2(e.x,0),.1)}onScrollBetToStart(){this.scrollViewBet.scrollToOffset(cc.v2(0,0),.1)}onScrollBetTable(){let e=Math.abs(this.scrollViewBetTable.getScrollOffset().x),t=this.scrollViewBetTable.getMaxScrollOffset().x;this.btnNextBetTable.active=e<t-1}onScrollBetTableToEnd(){let e=this.scrollViewBetTable.getMaxScrollOffset();this.scrollViewBetTable.scrollToOffset(cc.v2(e.x,0),.1)}actionRefreshTables(){const e=this.scrollViewBetTable.content.children.findIndex(e=>e.getComponent(cc.Toggle).isChecked);this.getListTableByBet(this.bets[this.bets.length-1-e])}actionCreateTable(){f.default.show(this.gameCode,this.bets)}actionBack(){if(cc.sys.isBrowser&&i.default.AppInfo.WEB_NATIVE)window.location.href="/";else{const e=this.gameCode;a.default.getInstance().loadSceneByBundle(i.default.Bundle.BUNDLE_NAME.LOBBY,i.default.AppInfo.SCENE_NAME.GAMELIST,()=>{var t;null===(t=g.default.getInstance())||void 0===t||t.setGameTypeByGameCode(e)})}}actionQuickStart(){a.default.getInstance().showProcessing(!0),h.default.getInstance().rpcCall(i.default.Network.RPC_ID.QUICK_MATCH,{game_code:this.gameCode}).then(e=>{if(!e.payload.matches||0===e.payload.matches.length)return a.default.getInstance().showProcessing(!1),void a.default.getInstance().alertDialog.showMessage("find_match_error");const t=e.payload.matches[0].matchId;h.default.getInstance().joinMatch(t).then(e=>{a.default.getInstance().showProcessing(!1),a.default.getInstance().openGame(this.gameCode,()=>{a.default.getInstance().matchInfo=e})},e=>{cc.log("err when join match",e),a.default.getInstance().showProcessing(!1),a.default.getInstance().alertDialog.showMessage("find_match_error")})},e=>{cc.log("err when QUICK_MATCH ",e),a.default.getInstance().showProcessing(!1),a.default.getInstance().alertDialog.showMessage("find_match_error")})}createMatch(e){a.default.getInstance().showProcessing(!0),h.default.getInstance().rpcCall(i.default.Network.RPC_ID.CREATE_MATCH,{mark_unit:e,game_code:this.gameCode}).then(e=>{let t=e.payload.matchId;h.default.getInstance().joinMatch(t).then(e=>{a.default.getInstance().showProcessing(!1),a.default.getInstance().openGame(this.gameCode,()=>{a.default.getInstance().matchInfo=e})},e=>{cc.log("err when join match",e),a.default.getInstance().showProcessing(!1)})},e=>{cc.log("err when create match",e),a.default.getInstance().showProcessing(!1)})}joinMatch(e,t=null,n=null){a.default.getInstance().showProcessing(!0),h.default.getInstance().joinMatch(e,t,n).then(e=>{a.default.getInstance().showProcessing(!1),a.default.getInstance().openGame(this.gameCode,()=>{a.default.getInstance().matchInfo=e})},e=>{cc.log("err when join match",e),a.default.getInstance().showProcessing(!1),a.default.getInstance().alertDialog.showMessage(JSON.stringify(e.message))})}};w.instance=null,o([b(cc.Toggle)],w.prototype,"tabs",void 0),o([b([cc.Node])],w.prototype,"tabContents",void 0),o([b(cc.Label)],w.prototype,"lbGameName",void 0),o([b(cc.Label)],w.prototype,"lbChips",void 0),o([b(cc.EditBox)],w.prototype,"edbFindMatch",void 0),o([b(cc.ScrollView)],w.prototype,"scrollViewBet",void 0),o([b(cc.Node)],w.prototype,"itemBet",void 0),o([b(cc.Node)],w.prototype,"btnNextBet",void 0),o([b(cc.Node)],w.prototype,"btnPrevBet",void 0),o([b(cc.Node)],w.prototype,"btnBestChoose",void 0),o([b(cc.ScrollView)],w.prototype,"scrollViewTable",void 0),o([b(cc.Node)],w.prototype,"itemTable",void 0),o([b(cc.ScrollView)],w.prototype,"scrollViewBetTable",void 0),o([b(cc.Node)],w.prototype,"itemBetTable",void 0),o([b(cc.Node)],w.prototype,"btnNextBetTable",void 0),w=r=o([v],w),n.default=w,cc._RF.pop()},{"../common/ConfigClient":"ConfigClient","../common/Constants":"Constants","../common/GlobalApp":"GlobalApp","../common/User":"User","../common/Utils":"Utils","../dialogs/banner/BannerDialog":"BannerDialog","../language/LanguageController":"LanguageController","../network/NetworkClient":"NetworkClient","./CreateTableDialog":"CreateTableDialog","./EnterPasswordDialog":"EnterPasswordDialog","./GameList":"GameList"}],Toast:[function(e,t,n){"use strict";cc._RF.push(t,"aa619qqGSZC4rHfK3WtYvN9","Toast");var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});const{ccclass:o,property:i}=cc._decorator;let s=class extends cc.Component{constructor(){super(...arguments),this.lbMessage=null}showToast(e){this.lbMessage.string=e,this.node.scale=0,this.node.active=!0,cc.tween(this.node).to(.4,{scale:1}).delay(1).to(.6,{opacity:0}).call(()=>{this.node.active=!1}).start()}};r([i(cc.Label)],s.prototype,"lbMessage",void 0),s=r([o],s),n.default=s,cc._RF.pop()},{}],User:[function(e,t,n){"use strict";cc._RF.push(t,"c0567EEx6BJdIhyWQaWu5mw","User"),Object.defineProperty(n,"__esModule",{value:!0}),n.User=void 0;const r=e("./Constants");class o{static init(e){o.userId=null==e?void 0:e.userId,o.userName=null==e?void 0:e.userName,o.displayName=null==e?void 0:e.displayName,o.avatarUrl=null==e?void 0:e.avatarUrl,o.status=null==e?void 0:e.status,o.accountChip=Number(null==e?void 0:e.accountChip),o.bankChip=Number(null==e?void 0:e.bankChip),o.refCode=null==e?void 0:e.refCode,o.langTag=null==e?void 0:e.langTag,o.linkGroup=null==e?void 0:e.linkGroup,o.linkFanpageFb=null==e?void 0:e.linkFanpageFb,o.appConfig=null==e?void 0:e.appConfig,o.avatarId=null==e?void 0:e.avatarId,o.registrable=null==e?void 0:e.registrable,o.vipLevel=Number(null==e?void 0:e.vipLevel),o.lastOnlineTimeUnix=null==e?void 0:e.lastOnlineTimeUnix,o.createTimeUnix=null==e?void 0:e.createTimeUnix,o.remainTimeInputRefCode=Number(null==e?void 0:e.remainTimeInputRefCode),o.langAvailables=[],null==e||e.langAvailables.forEach(e=>{o.langAvailables.push({isoCode:r.Language.valueToEnum(e.isoCode),displayName:e.displayName,sourceUrl:e.sourceUrl})}),o.playingMatch={code:r.Game.valueToEnum(null==e?void 0:e.playingMatch.code),matchId:null==e?void 0:e.playingMatch.matchId,leaveTime:null==e?void 0:e.playingMatch.leaveTime,mcb:Number(null==e?void 0:e.playingMatch.mcb),bet:Number(null==e?void 0:e.playingMatch.bet)},o.deviceId=null==e?void 0:e.deviceId,o.lastDeviceId=null==e?void 0:e.lastDeviceId,o.refGame=null==e?void 0:e.refGame,o.currentIp=null==e?void 0:e.currentIp,o.vipPoint=Number(null==e?void 0:e.vipPoint),o.isOnline=Boolean(null==e?void 0:e.isOnline),o.isBanned=null==e?void 0:e.isBanned,o.lastLoginUnix=null==e?void 0:e.lastLoginUnix,o.userSid=null==e?void 0:e.userSid}static clear(){this.userId="",this.userName="",this.displayName="",this.avatarUrl="",this.status="",this.accountChip=0,this.bankChip=0,this.refCode="",this.langTag="",this.linkGroup="",this.linkFanpageFb="",this.appConfig="",this.avatarId="",this.registrable=!1,this.vipLevel=0,this.lastOnlineTimeUnix="",this.createTimeUnix="",this.remainTimeInputRefCode=0,this.langAvailables=null,this.playingMatch=null,this.deviceId="",this.lastDeviceId="",this.refGame="",this.currentIp="",this.vipPoint=0,this.isOnline=!1,this.isBanned="",this.lastLoginUnix="",this.userSid=""}}n.User=o,n.default=o,cc._RF.pop()},{"./Constants":"Constants"}],Utils:[function(e,t,n){"use strict";cc._RF.push(t,"186f7AgooNAUIbpDYqmWRi9","Utils"),Object.defineProperty(n,"__esModule",{value:!0});class r{static randomString(e){for(var t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=n.length,o=0;o<e;o++)t+=n.charAt(Math.floor(Math.random()*r));return t}static formatNumber(e){return e.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")}static formatMoney(e){let t=e<0,n="",o=Math.abs(e);if(e=Math.abs(e),o>=1e9)o/=1e9,n="B";else{if(!(o>=1e6))return(1==t?"-":"")+r.formatNumber(e);o/=1e6,n="M"}let i=e.toString()+"0",s=o.toString()+"a",a=0;for(let r=0;r<i.length;r++)if(i[r]!==s[r]){a=r;break}return(1==t?"-":"")+Math.floor(o)+("0"===i.toString()[a]&&"0"===i.toString()[a+1]?"":",")+("0"===i.toString()[a]&&"0"===i.toString()[a+1]?"":i.toString()[a])+("0"===i.toString()[a+1]?"":i.toString()[a+1])+n.toUpperCase()}static formatMoneyChip(e){let t="",n=Math.abs(e);if(n>=1e9)n/=1e9,t="B";else if(n>=1e6)n/=1e6,t="M";else{if(!(n>=1e3))return this.formatNumber(e);n/=1e3,t="K"}let r=e.toString()+"0",o=n.toString()+"a",i=0;for(let s=0;s<r.length;s++)if(r[s]!==o[s]){i=s;break}return(e<0?"-":"")+Math.floor(n)+("0"===r.toString()[i]&&"0"===r.toString()[i+1]?"":",")+("0"===r.toString()[i]&&"0"===r.toString()[i+1]?"":r.toString()[i])+("0"===r.toString()[i+1]?"":r.toString()[i+1])+t}static formatBetNumber(e,t=100){if(!e)return"0";let n=0;for(;e>=1e3&&n<3;)e/=1e3,n++;let r=Math.floor(e*t)/t;return 1===n?r+"K":2===n?r+"M":3===n?r+"B":r+""}static formatWalletNumber(e,t=100){if(!e)return"0";if(e<1e6)return this.formatNumberToString(e);let n=0;for(;e>=1e6;)e/=1e6,n+=2;return Math.floor(e*t)/t+(2===n?"M":"")}static formatNumberToString(e){if(!e)return"0";let t=!1;e<0&&(t=!0,e*=-1);let n="",r=e.toString().split("").reverse().join("");for(;r.length>3;){let e=r.substring(0,3);r=r.substring(3),n=n+e+","}return n=(n+r).split("").reverse().join(""),t&&(n="-"+n),n}static uuidv4(){const e=new Uint8Array(16);return crypto.getRandomValues(e),e[6]=15&e[6]|64,e[8]=63&e[8]|128,[...e].map((e,t)=>{const n=e.toString(16).padStart(2,"0");return[4,6,8,10].includes(t)?`-${n}`:n}).join("")}static loginFacebook(){cc.sys.os==cc.sys.OS_ANDROID&&cc.sys.isNative?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","loginFacebook","()V"):cc.sys.os==cc.sys.OS_IOS&&cc.sys.isNative&&jsb.reflection.callStaticMethod("AppController","loginFacebook","")}static logoutFacebook(){cc.sys.os==cc.sys.OS_ANDROID&&cc.sys.isNative?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","logoutFacebook","()V"):cc.sys.os==cc.sys.OS_IOS&&cc.sys.isNative&&jsb.reflection.callStaticMethod("AppController","logoutFacebook","")}static isFacebookLoggedIn(){return cc.sys.os==cc.sys.OS_ANDROID&&cc.sys.isNative?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","isFacebookLoggedIn","()Z"):!(cc.sys.os!=cc.sys.OS_IOS||!cc.sys.isNative)&&jsb.reflection.callStaticMethod("AppController","isFacebookLoggedIn","")}static setFacebookAppId(e){cc.sys.os==cc.sys.OS_ANDROID&&cc.sys.isNative?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","setFacebookAppId","(Ljava/lang/String;)V",e):cc.sys.os==cc.sys.OS_IOS&&cc.sys.isNative?jsb.reflection.callStaticMethod("AppController","setFacebookAppId:",e):console.log("Setting Facebook App ID:",e)}static setFacebookConfig(e){cc.sys.os==cc.sys.OS_ANDROID&&cc.sys.isNative?e.clientToken?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","setFacebookAppIdAndClientToken","(Ljava/lang/String;Ljava/lang/String;)V",e.appId,e.clientToken):jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","setFacebookAppId","(Ljava/lang/String;)V",e.appId):cc.sys.os==cc.sys.OS_IOS&&cc.sys.isNative?e.clientToken?jsb.reflection.callStaticMethod("AppController","setFacebookAppId:clientToken:",e.appId,e.clientToken):jsb.reflection.callStaticMethod("AppController","setFacebookAppId:",e.appId):console.log("Setting Facebook Config:",e)}static getDeviceId(){return cc.sys.os==cc.sys.OS_ANDROID&&cc.sys.isNative?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","getDeviceId","()Ljava/lang/String;"):cc.sys.os==cc.sys.OS_IOS&&cc.sys.isNative?jsb.reflection.callStaticMethod("AppController","getDeviceId",""):""}static vibrator(){}static openFanpage(){}static openGroup(){}static pLineIntersect(e,t,n,r,o){if(e.x===t.x&&e.y===t.y||n.x===r.x&&n.y===r.y)return!1;var i=t.x-e.x,s=t.y-e.y,a=r.x-n.x,c=r.y-n.y,l=e.x-n.x,u=e.y-n.y,d=c*i-a*s;return o.x=a*u-c*l,o.y=i*u-s*l,0===d?0===o.x||0===o.y:(o.x=o.x/d,o.y=o.y/d,!0)}static pIntersectPoint(e,t,n,o){var i=cc.v2(0,0);if(r.pLineIntersect(e,t,n,o,i)){var s=cc.v2(0,0);return s.x=e.x+i.x*(t.x-e.x),s.y=e.y+i.x*(t.y-e.y),s}return cc.v2(0,0)}static getIntersectPoint(e,t,n,r){var o,i,s,a,c,l,u,d,h,f,p,g,m,v=function(e,t,n,r){return e!=n&&(t-r)/(e-n)},b=function(e,t,n,r){return e===n?0===t&&0:t===r?t:t-v(e,t,n,r)*e};return Math.abs(n.y-r.y)<1?function(e,t,n,r,o,i,s,a){if(e===n&&t===r||o===s&&i===a)return!1;var c=(a-i)*(n-e)-(s-o)*(r-t);if(0===c)return!1;let l=((s-o)*(t-i)-(a-i)*(e-o))/c,u=((n-e)*(t-i)-(r-t)*(e-o))/c;if(l<0||l>1||u<0||u>1)return!1;let d=e+l*(n-e),h=t+l*(r-t);return cc.v3(d,h)}(e.x,e.y,t.x,t.y,n.x,n.y,r.x,r.y):(o=e.x,i=e.y,s=t.x,a=t.y,c=n.x,l=n.y,u=r.x,d=r.y,o==c&&i==l?cc.v3(o,i):s==u&&a==d?cc.v3(s,d):(h=v(o,i,s,a))!==(f=v(c,l,u,d))&&((p=b(o,i,s,a))===(g=b(c,l,u,d))?!1!==p&&cc.v3(0,p):!1===h?cc.v3(l,f*l+g):!1===f?cc.v3(i,h*i+p):(m=(h*o+p-g)/f,cc.v3(m,h*m+p))))}static getKeyByValue(e,t){return Object.keys(e).find(n=>e[n]===t)}static stringToInt(e){var t=parseInt(e.replace(/\./g,"").replace(/,/g,""));return isNaN(t)&&(t=0),t}static runNumber(e,t,n,o=(e=>r.formatNumber(e))){e.node.stopAllActions();let i=r.stringToInt(e.string),s=t-i,a=s/(20*n),c=cc.repeat(cc.sequence(cc.callFunc(()=>{i+=a,(s>0&&i>=t||s<=0&&i<=t)&&(i=t,e.node.stopAction(c)),e.string=o(Math.round(i))}),cc.delayTime(n/20)),20*n);e.node.runAction(c)}static buyItem(e,t){cc.sys.os==cc.sys.OS_ANDROID&&cc.sys.isNative?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","buyItem","(Ljava/lang/String;I)V",e):cc.sys.os==cc.sys.OS_IOS&&cc.sys.isNative&&jsb.reflection.callStaticMethod("AppController","buyItem:amount:",e)}static initializeFacebookCallback(){"undefined"!=typeof window&&(window.facebookLoginCallback=function(e,t,n){console.log("Facebook Login Result:",e,t,n);let r=null;if(n&&"string"==typeof n)try{r=JSON.parse(n)}catch(i){console.error("Error parsing Facebook user data:",i)}const o={success:e,message:t,userData:r};"undefined"!=typeof cc&&cc.systemEvent&&cc.systemEvent.emit("facebook-login-result",o)},console.log("Facebook callback initialized"))}static setOneSignalExternalUserId(e){cc.sys.os==cc.sys.OS_ANDROID&&cc.sys.isNative?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","setOneSignalExternalUserId","(Ljava/lang/String;)V",e):cc.sys.os==cc.sys.OS_IOS&&cc.sys.isNative?jsb.reflection.callStaticMethod("AppController","setOneSignalExternalUserId:",e):console.log("Setting OneSignal external user ID:",e)}static setOneSignalUserTag(e,t){cc.sys.os==cc.sys.OS_ANDROID&&cc.sys.isNative?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","setOneSignalUserTag","(Ljava/lang/String;Ljava/lang/String;)V",e,t):cc.sys.os==cc.sys.OS_IOS&&cc.sys.isNative?jsb.reflection.callStaticMethod("AppController","setOneSignalUserTag:value:",e,t):console.log("Setting OneSignal user tag:",e,"=",t)}static removeOneSignalUserTag(e){cc.sys.os==cc.sys.OS_ANDROID&&cc.sys.isNative?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","removeOneSignalUserTag","(Ljava/lang/String;)V",e):cc.sys.os==cc.sys.OS_IOS&&cc.sys.isNative?jsb.reflection.callStaticMethod("AppController","removeOneSignalUserTag:",e):console.log("Removing OneSignal user tag:",e)}static getOneSignalUserId(){return cc.sys.os==cc.sys.OS_ANDROID&&cc.sys.isNative?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","getOneSignalUserId","()Ljava/lang/String;"):cc.sys.os==cc.sys.OS_IOS&&cc.sys.isNative?jsb.reflection.callStaticMethod("AppController","getOneSignalUserId",""):""}static getOneSignalPushSubscriptionId(){return cc.sys.os==cc.sys.OS_ANDROID&&cc.sys.isNative?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","getOneSignalPushSubscriptionId","()Ljava/lang/String;"):cc.sys.os==cc.sys.OS_IOS&&cc.sys.isNative?jsb.reflection.callStaticMethod("AppController","getOneSignalPushSubscriptionId",""):""}static requestOneSignalPushPermission(){cc.sys.os==cc.sys.OS_ANDROID&&cc.sys.isNative?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","requestOneSignalPushPermission","()V"):cc.sys.os==cc.sys.OS_IOS&&cc.sys.isNative?jsb.reflection.callStaticMethod("AppController","requestOneSignalPushPermission",""):console.log("Requesting OneSignal push permission")}static isOneSignalInitialized(){return cc.sys.os==cc.sys.OS_ANDROID&&cc.sys.isNative?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","isOneSignalInitialized","()Z"):!(cc.sys.os!=cc.sys.OS_IOS||!cc.sys.isNative)&&jsb.reflection.callStaticMethod("AppController","isOneSignalInitialized","()Z")}static hasOneSignalPushPermission(){return cc.sys.os==cc.sys.OS_ANDROID&&cc.sys.isNative?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","hasOneSignalPushPermission","()Z"):!(cc.sys.os!=cc.sys.OS_IOS||!cc.sys.isNative)&&jsb.reflection.callStaticMethod("AppController","hasOneSignalPushPermission","")}static setOneSignalPrivacyConsent(e){cc.sys.os==cc.sys.OS_ANDROID&&cc.sys.isNative?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","setOneSignalPrivacyConsent","(Z)V",e):cc.sys.os==cc.sys.OS_IOS&&cc.sys.isNative?jsb.reflection.callStaticMethod("AppController","setOneSignalPrivacyConsent:",e?"true":"false"):console.log("Setting OneSignal privacy consent:",e)}static initializeOneSignalCallback(){"undefined"!=typeof window&&(window.onNotificationClicked=function(e,t,n){console.log("OneSignal Notification Clicked:",e,t,n);let r={};if(n&&"string"==typeof n)try{r=JSON.parse(n)}catch(i){console.error("Error parsing OneSignal additional data:",i)}const o={title:e,body:t,additionalData:r};"undefined"!=typeof cc&&cc.systemEvent&&cc.systemEvent.emit("onesignal-notification-clicked",o)},console.log("OneSignal notification callback initialized"))}static initializeIAPCallbacks(){"undefined"!=typeof window&&(window.onBillingSetupResult=function(e,t){console.log("Billing setup result:",e,t);const n={success:e,message:t};"undefined"!=typeof cc&&cc.systemEvent&&cc.systemEvent.emit("billing-setup-result",n)},window.onPurchaseResult=function(e,t,n){console.log("Purchase result:",e,t,n);let r=null;if(n&&"string"==typeof n)try{r=JSON.parse(n)}catch(o){console.error("Error parsing purchase data:",o)}"undefined"!=typeof cc&&cc.systemEvent&&cc.systemEvent.emit("purchase-result",{success:e,message:t,purchase:r})},window.onProductsResult=function(e,t,n){console.log("Products result:",e,t);let r=[];if(n&&"string"==typeof n)try{r=JSON.parse(n)}catch(o){console.error("Error parsing products data:",o)}"undefined"!=typeof cc&&cc.systemEvent&&cc.systemEvent.emit("products-result",{success:e,message:t,products:r})},window.onPurchasesResult=function(e,t,n){console.log("Purchases result:",e,t);let r=[];if(n&&"string"==typeof n)try{r=JSON.parse(n)}catch(o){console.error("Error parsing purchases data:",o)}"undefined"!=typeof cc&&cc.systemEvent&&cc.systemEvent.emit("purchases-result",{success:e,message:t,purchases:r})},console.log("In-app purchase callbacks initialized"))}static purchaseItem(e,t=!1){cc.sys.os==cc.sys.OS_ANDROID&&cc.sys.isNative?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","purchaseItem","(Ljava/lang/String;Z)V",e,t):cc.sys.os==cc.sys.OS_IOS&&cc.sys.isNative?jsb.reflection.callStaticMethod("AppController","purchaseItem:isConsumable:",e,t?"true":"false"):(console.log("Purchasing item:",e,"consumable:",t),"undefined"!=typeof cc&&cc.systemEvent&&setTimeout(()=>{cc.systemEvent.emit("purchase-result",{success:!0,message:"Simulated purchase successful",purchase:{productId:e,orderId:"browser_test_order_"+Date.now(),purchaseToken:"browser_test_token_"+Math.random().toString(36).substring(2),isConsumable:t,purchaseTime:Date.now()}})},1e3))}static queryProducts(e){if(cc.sys.os==cc.sys.OS_ANDROID&&cc.sys.isNative){const t=JSON.stringify(e);jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","queryProducts","(Ljava/lang/String;)V",t)}else cc.sys.os==cc.sys.OS_IOS&&cc.sys.isNative?jsb.reflection.callStaticMethod("AppController","queryProducts:",JSON.stringify(e)):(console.log("Querying products:",e),"undefined"!=typeof cc&&cc.systemEvent&&setTimeout(()=>{const t=e.map(e=>({productId:e,title:"Test Product "+e,description:"This is a test product for "+e,price:"$0.99",priceAmountMicros:99e4,currencyCode:"USD"}));cc.systemEvent.emit("products-result",{success:!0,message:"Simulated products retrieved successfully",products:t})},1e3))}static queryPurchases(){cc.sys.os==cc.sys.OS_ANDROID&&cc.sys.isNative?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","queryPurchases","()V"):cc.sys.os==cc.sys.OS_IOS&&cc.sys.isNative?jsb.reflection.callStaticMethod("AppController","queryPurchases",""):(console.log("Querying purchases"),"undefined"!=typeof cc&&cc.systemEvent&&setTimeout(()=>{cc.systemEvent.emit("purchases-result",{success:!0,message:"Simulated purchases retrieved successfully",purchases:[]})},1e3))}}n.default=r,"undefined"!=typeof cc&&(r.initializeFacebookCallback(),r.initializeOneSignalCallback(),r.initializeIAPCallbacks()),cc._RF.pop()},{}],nakama:[function(e,t,n){"use strict";function r(){r=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(k){l=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var i=t&&t.prototype instanceof f?t:f,s=Object.create(i.prototype),a=new P(r||[]);return o(s,"_invoke",{value:C(e,n,a)}),s}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(k){return{type:"throw",arg:k}}}e.wrap=u;var h={};function f(){}function p(){}function g(){}var m={};l(m,s,function(){return this});var v=Object.getPrototypeOf,b=v&&v(v(A([])));b&&b!==t&&n.call(b,s)&&(m=b);var w=g.prototype=f.prototype=Object.create(m);function y(e){["next","throw","return"].forEach(function(t){l(e,t,function(e){return this._invoke(t,e)})})}function _(e,t){function r(o,i,s,a){var c=d(e[o],e,i);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"==typeof u&&n.call(u,"__await")?t.resolve(u.__await).then(function(e){r("next",e,s,a)},function(e){r("throw",e,s,a)}):t.resolve(u).then(function(e){l.value=e,s(l)},function(e){return r("throw",e,s,a)})}a(c.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t(function(t,o){r(e,n,t,o)})}return i=i?i.then(o,o):o()}})}function C(e,t,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var s=n.delegate;if(s){var a=I(s,n);if(a){if(a===h)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=d(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function I(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,I(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var o=d(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,h;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function A(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:N}}function N(){return{value:void 0,done:!0}}return p.prototype=g,o(w,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:p,configurable:!0}),p.displayName=l(g,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,l(e,c,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},y(_.prototype),l(_.prototype,a,function(){return this}),e.AsyncIterator=_,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var s=new _(u(t,n,r,o),i);return e.isGeneratorFunction(n)?s:s.next().then(function(e){return e.done?e.value:s.next()})},y(w),l(w,c,"Generator"),l(w,s,function(){return this}),l(w,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=A,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return s.type="throw",s.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],s=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var a=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(a&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=e,s.arg=t,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;E(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:A(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},e}function o(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=i(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,"symbol"==typeof(o=l(r.key,"string"))?o:String(o)),r)}var o}function c(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function l(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){return(d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var h,f;cc._RF.push(t,"0ef61sktgFGFohLG9JEMvV2","nakama"),h=self,f=function(){return function(){var e={257:function(e,t,n){n.r(t),n.d(t,{decode:function(){return a},encode:function(){return s}});for(var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o="undefined"==typeof Uint8Array?[]:new Uint8Array(256),i=0;i<64;i++)o[r.charCodeAt(i)]=i;var s=function(e){var t,n=new Uint8Array(e),o=n.length,i="";for(t=0;t<o;t+=3)i+=r[n[t]>>2],i+=r[(3&n[t])<<4|n[t+1]>>4],i+=r[(15&n[t+1])<<2|n[t+2]>>6],i+=r[63&n[t+2]];return o%3==2?i=i.substring(0,i.length-1)+"=":o%3==1&&(i=i.substring(0,i.length-2)+"=="),i},a=function(e){var t,n,r,i,s,a=.75*e.length,c=e.length,l=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var u=new ArrayBuffer(a),d=new Uint8Array(u);for(t=0;t<c;t+=4)n=o[e.charCodeAt(t)],r=o[e.charCodeAt(t+1)],i=o[e.charCodeAt(t+2)],s=o[e.charCodeAt(t+3)],d[l++]=n<<2|r>>4,d[l++]=(15&r)<<4|i>>2,d[l++]=(3&i)<<6|63&s;return u}},526:function(e,t){t.byteLength=function(e){var t=a(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,i=a(e),s=i[0],c=i[1],l=new o(3*(s+c)/4-c),u=0,d=c>0?s-4:s;for(n=0;n<d;n+=4)t=r[e.charCodeAt(n)]<<18|r[e.charCodeAt(n+1)]<<12|r[e.charCodeAt(n+2)]<<6|r[e.charCodeAt(n+3)],l[u++]=t>>16&255,l[u++]=t>>8&255,l[u++]=255&t;return 2===c&&(t=r[e.charCodeAt(n)]<<2|r[e.charCodeAt(n+1)]>>4,l[u++]=255&t),1===c&&(t=r[e.charCodeAt(n)]<<10|r[e.charCodeAt(n+1)]<<4|r[e.charCodeAt(n+2)]>>2,l[u++]=t>>8&255,l[u++]=255&t),l},t.fromByteArray=function(e){for(var t,r=e.length,o=r%3,i=[],s=16383,a=0,l=r-o;a<l;a+=s)i.push(c(e,a,a+s>l?l:a+s));return 1===o?(t=e[r-1],i.push(n[t>>2]+n[t<<4&63]+"==")):2===o&&(t=(e[r-2]<<8)+e[r-1],i.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"=")),i.join("")};for(var n=[],r=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0;s<64;++s)n[s]=i[s],r[i.charCodeAt(s)]=s;function a(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function c(e,t,r){for(var o,i,s=[],a=t;a<r;a+=3)o=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),s.push(n[(i=o)>>18&63]+n[i>>12&63]+n[i>>6&63]+n[63&i]);return s.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},287:function(e,t,n){var r=n(526),o=n(251),i="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.hp=l,t.IS=50;var s=2147483647;function a(e){if(e>s)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,l.prototype),t}function l(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return p(e)}return h(e,t,n)}function h(e,t,n){if("string"==typeof e)return function(e,t){if("string"==typeof t&&""!==t||(t="utf8"),!l.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var n=0|b(e,t),r=a(n),o=r.write(e,t);return o!==n&&(r=r.slice(0,o)),r}(e,t);if(ArrayBuffer.isView(e))return function(e){if(X(e,Uint8Array)){var t=new Uint8Array(e);return m(t.buffer,t.byteOffset,t.byteLength)}return g(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(X(e,ArrayBuffer)||e&&X(e.buffer,ArrayBuffer))return m(e,t,n);if("undefined"!=typeof SharedArrayBuffer&&(X(e,SharedArrayBuffer)||e&&X(e.buffer,SharedArrayBuffer)))return m(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return l.from(r,t,n);var o=function(e){if(l.isBuffer(e)){var t=0|v(e.length),n=a(t);return 0===n.length||e.copy(n,0,0,t),n}return void 0!==e.length?"number"!=typeof e.length||Z(e.length)?a(0):g(e):"Buffer"===e.type&&Array.isArray(e.data)?g(e.data):void 0}(e);if(o)return o;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return l.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function f(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function p(e){return f(e),a(e<0?0:0|v(e))}function g(e){for(var t=e.length<0?0:0|v(e.length),n=a(t),r=0;r<t;r+=1)n[r]=255&e[r];return n}function m(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');var r;return r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(r,l.prototype),r}function v(e){if(e>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return 0|e}function b(e,t){if(l.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||X(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var n=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;for(var o=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return K(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return Q(e).length;default:if(o)return r?-1:K(e).length;t=(""+t).toLowerCase(),o=!0}}function w(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return R(this,t,n);case"utf8":case"utf-8":return k(this,t,n);case"ascii":return T(this,t,n);case"latin1":case"binary":return D(this,t,n);case"base64":return N(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function y(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function _(e,t,n,r,o){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),Z(n=+n)&&(n=o?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(o)return-1;n=e.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof t&&(t=l.from(t,r)),l.isBuffer(t))return 0===t.length?-1:C(e,t,n,r,o);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):C(e,[t],n,r,o);throw new TypeError("val must be string, number or Buffer")}function C(e,t,n,r,o){var i,s=1,a=e.length,c=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;s=2,a/=2,c/=2,n/=2}function l(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(o){var u=-1;for(i=n;i<a;i++)if(l(e,i)===l(t,-1===u?0:i-u)){if(-1===u&&(u=i),i-u+1===c)return u*s}else-1!==u&&(i-=i-u),u=-1}else for(n+c>a&&(n=a-c),i=n;i>=0;i--){for(var d=!0,h=0;h<c;h++)if(l(e,i+h)!==l(t,h)){d=!1;break}if(d)return i}return-1}function I(e,t,n,r){n=Number(n)||0;var o=e.length-n;r?(r=Number(r))>o&&(r=o):r=o;var i,s=t.length;for(r>s/2&&(r=s/2),i=0;i<r;++i){var a=parseInt(t.substr(2*i,2),16);if(Z(a))return i;e[n+i]=a}return i}function S(e,t,n,r){return $(K(t,e.length-n),e,n,r)}function E(e,t,n,r){return $(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function P(e,t,n,r){return $(Q(t),e,n,r)}function A(e,t,n,r){return $(function(e,t){for(var n,r,o,i=[],s=0;s<e.length&&!((t-=2)<0);++s)r=(n=e.charCodeAt(s))>>8,o=n%256,i.push(o),i.push(r);return i}(t,e.length-n),e,n,r)}function N(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function k(e,t,n){n=Math.min(e.length,n);for(var r=[],o=t;o<n;){var i=e[o],s=null,a=i>239?4:i>223?3:i>191?2:1;if(o+a<=n){var c=void 0,l=void 0,u=void 0,d=void 0;switch(a){case 1:i<128&&(s=i);break;case 2:128==(192&(c=e[o+1]))&&(d=(31&i)<<6|63&c)>127&&(s=d);break;case 3:c=e[o+1],l=e[o+2],128==(192&c)&&128==(192&l)&&(d=(15&i)<<12|(63&c)<<6|63&l)>2047&&(d<55296||d>57343)&&(s=d);break;case 4:c=e[o+1],l=e[o+2],u=e[o+3],128==(192&c)&&128==(192&l)&&128==(192&u)&&(d=(15&i)<<18|(63&c)<<12|(63&l)<<6|63&u)>65535&&d<1114112&&(s=d)}}null===s?(s=65533,a=1):s>65535&&(s-=65536,r.push(s>>>10&1023|55296),s=56320|1023&s),r.push(s),o+=a}return function(e){var t=e.length;if(t<=O)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=O));return n}(r)}l.TYPED_ARRAY_SUPPORT=function(){try{var t=new Uint8Array(1),n={foo:function(){return 42}};return Object.setPrototypeOf(n,Uint8Array.prototype),Object.setPrototypeOf(t,n),42===t.foo()}catch(e){return!1}}(),l.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}}),l.poolSize=8192,l.from=function(e,t,n){return h(e,t,n)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array),l.alloc=function(e,t,n){return function(e,t,n){return f(e),e<=0?a(e):void 0!==t?"string"==typeof n?a(e).fill(t,n):a(e).fill(t):a(e)}(e,t,n)},l.allocUnsafe=function(e){return p(e)},l.allocUnsafeSlow=function(e){return p(e)},l.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==l.prototype},l.compare=function(e,t){if(X(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),X(t,Uint8Array)&&(t=l.from(t,t.offset,t.byteLength)),!l.isBuffer(e)||!l.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var n=e.length,r=t.length,o=0,i=Math.min(n,r);o<i;++o)if(e[o]!==t[o]){n=e[o],r=t[o];break}return n<r?-1:r<n?1:0},l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return l.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=l.allocUnsafe(t),o=0;for(n=0;n<e.length;++n){var i=e[n];if(X(i,Uint8Array))o+i.length>r.length?(l.isBuffer(i)||(i=l.from(i)),i.copy(r,o)):Uint8Array.prototype.set.call(r,i,o);else{if(!l.isBuffer(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(r,o)}o+=i.length}return r},l.byteLength=b,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)y(this,t,t+1);return this},l.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)y(this,t,t+3),y(this,t+1,t+2);return this},l.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)y(this,t,t+7),y(this,t+1,t+6),y(this,t+2,t+5),y(this,t+3,t+4);return this},l.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?k(this,0,e):w.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(e){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===l.compare(this,e)},l.prototype.inspect=function(){var e="",n=t.IS;return e=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(e+=" ... "),"<Buffer "+e+">"},i&&(l.prototype[i]=l.prototype.inspect),l.prototype.compare=function(e,t,n,r,o){if(X(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),!l.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),t<0||n>e.length||r<0||o>this.length)throw new RangeError("out of range index");if(r>=o&&t>=n)return 0;if(r>=o)return-1;if(t>=n)return 1;if(this===e)return 0;for(var i=(o>>>=0)-(r>>>=0),s=(n>>>=0)-(t>>>=0),a=Math.min(i,s),c=this.slice(r,o),u=e.slice(t,n),d=0;d<a;++d)if(c[d]!==u[d]){i=c[d],s=u[d];break}return i<s?-1:s<i?1:0},l.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},l.prototype.indexOf=function(e,t,n){return _(this,e,t,n,!0)},l.prototype.lastIndexOf=function(e,t,n){return _(this,e,t,n,!1)},l.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var o=this.length-t;if((void 0===n||n>o)&&(n=o),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var i=!1;;)switch(r){case"hex":return I(this,e,t,n);case"utf8":case"utf-8":return S(this,e,t,n);case"ascii":case"latin1":case"binary":return E(this,e,t,n);case"base64":return P(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,e,t,n);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),i=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var O=4096;function T(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;o<n;++o)r+=String.fromCharCode(127&e[o]);return r}function D(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;o<n;++o)r+=String.fromCharCode(e[o]);return r}function R(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var o="",i=t;i<n;++i)o+=ee[e[i]];return o}function B(e,t,n){for(var r=e.slice(t,n),o="",i=0;i<r.length-1;i+=2)o+=String.fromCharCode(r[i]+256*r[i+1]);return o}function x(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function L(e,t,n,r,o,i){if(!l.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<i)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function M(e,t,n,r,o){z(t,r,o,e,n,7);var i=Number(t&BigInt(4294967295));e[n++]=i,i>>=8,e[n++]=i,i>>=8,e[n++]=i,i>>=8,e[n++]=i;var s=Number(t>>BigInt(32)&BigInt(4294967295));return e[n++]=s,s>>=8,e[n++]=s,s>>=8,e[n++]=s,s>>=8,e[n++]=s,n}function U(e,t,n,r,o){z(t,r,o,e,n,7);var i=Number(t&BigInt(4294967295));e[n+7]=i,i>>=8,e[n+6]=i,i>>=8,e[n+5]=i,i>>=8,e[n+4]=i;var s=Number(t>>BigInt(32)&BigInt(4294967295));return e[n+3]=s,s>>=8,e[n+2]=s,s>>=8,e[n+1]=s,s>>=8,e[n]=s,n+8}function F(e,t,n,r){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function G(e,t,n,r,i){return t=+t,n>>>=0,i||F(e,0,n,4),o.write(e,t,n,r,23,4),n+4}function j(e,t,n,r,i){return t=+t,n>>>=0,i||F(e,0,n,8),o.write(e,t,n,r,52,8),n+8}l.prototype.slice=function(e,t){var n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);var r=this.subarray(e,t);return Object.setPrototypeOf(r,l.prototype),r},l.prototype.readUintLE=l.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||x(e,t,this.length);for(var r=this[e],o=1,i=0;++i<t&&(o*=256);)r+=this[e+i]*o;return r},l.prototype.readUintBE=l.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||x(e,t,this.length);for(var r=this[e+--t],o=1;t>0&&(o*=256);)r+=this[e+--t]*o;return r},l.prototype.readUint8=l.prototype.readUInt8=function(e,t){return e>>>=0,t||x(e,1,this.length),this[e]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(e,t){return e>>>=0,t||x(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(e,t){return e>>>=0,t||x(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(e,t){return e>>>=0,t||x(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(e,t){return e>>>=0,t||x(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readBigUInt64LE=te(function(e){J(e>>>=0,"offset");var t=this[e],n=this[e+7];void 0!==t&&void 0!==n||W(e,this.length-8);var r=t+256*this[++e]+65536*this[++e]+this[++e]*Math.pow(2,24),o=this[++e]+256*this[++e]+65536*this[++e]+n*Math.pow(2,24);return BigInt(r)+(BigInt(o)<<BigInt(32))}),l.prototype.readBigUInt64BE=te(function(e){J(e>>>=0,"offset");var t=this[e],n=this[e+7];void 0!==t&&void 0!==n||W(e,this.length-8);var r=t*Math.pow(2,24)+65536*this[++e]+256*this[++e]+this[++e],o=this[++e]*Math.pow(2,24)+65536*this[++e]+256*this[++e]+n;return(BigInt(r)<<BigInt(32))+BigInt(o)}),l.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||x(e,t,this.length);for(var r=this[e],o=1,i=0;++i<t&&(o*=256);)r+=this[e+i]*o;return r>=(o*=128)&&(r-=Math.pow(2,8*t)),r},l.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||x(e,t,this.length);for(var r=t,o=1,i=this[e+--r];r>0&&(o*=256);)i+=this[e+--r]*o;return i>=(o*=128)&&(i-=Math.pow(2,8*t)),i},l.prototype.readInt8=function(e,t){return e>>>=0,t||x(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},l.prototype.readInt16LE=function(e,t){e>>>=0,t||x(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt16BE=function(e,t){e>>>=0,t||x(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt32LE=function(e,t){return e>>>=0,t||x(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return e>>>=0,t||x(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readBigInt64LE=te(function(e){J(e>>>=0,"offset");var t=this[e],n=this[e+7];void 0!==t&&void 0!==n||W(e,this.length-8);var r=this[e+4]+256*this[e+5]+65536*this[e+6]+(n<<24);return(BigInt(r)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*Math.pow(2,24))}),l.prototype.readBigInt64BE=te(function(e){J(e>>>=0,"offset");var t=this[e],n=this[e+7];void 0!==t&&void 0!==n||W(e,this.length-8);var r=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(r)<<BigInt(32))+BigInt(this[++e]*Math.pow(2,24)+65536*this[++e]+256*this[++e]+n)}),l.prototype.readFloatLE=function(e,t){return e>>>=0,t||x(e,4,this.length),o.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return e>>>=0,t||x(e,4,this.length),o.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return e>>>=0,t||x(e,8,this.length),o.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return e>>>=0,t||x(e,8,this.length),o.read(this,e,!1,52,8)},l.prototype.writeUintLE=l.prototype.writeUIntLE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||L(this,e,t,n,Math.pow(2,8*n)-1,0);var o=1,i=0;for(this[t]=255&e;++i<n&&(o*=256);)this[t+i]=e/o&255;return t+n},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||L(this,e,t,n,Math.pow(2,8*n)-1,0);var o=n-1,i=1;for(this[t+o]=255&e;--o>=0&&(i*=256);)this[t+o]=e/i&255;return t+n},l.prototype.writeUint8=l.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,1,255,0),this[t]=255&e,t+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},l.prototype.writeBigUInt64LE=te(function(e,t){return void 0===t&&(t=0),M(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeBigUInt64BE=te(function(e,t){return void 0===t&&(t=0),U(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var o=Math.pow(2,8*n-1);L(this,e,t,n,o-1,-o)}var i=0,s=1,a=0;for(this[t]=255&e;++i<n&&(s*=256);)e<0&&0===a&&0!==this[t+i-1]&&(a=1),this[t+i]=(e/s|0)-a&255;return t+n},l.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var o=Math.pow(2,8*n-1);L(this,e,t,n,o-1,-o)}var i=n-1,s=1,a=0;for(this[t+i]=255&e;--i>=0&&(s*=256);)e<0&&0===a&&0!==this[t+i+1]&&(a=1),this[t+i]=(e/s|0)-a&255;return t+n},l.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},l.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},l.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},l.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},l.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},l.prototype.writeBigInt64LE=te(function(e,t){return void 0===t&&(t=0),M(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),l.prototype.writeBigInt64BE=te(function(e,t){return void 0===t&&(t=0),U(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),l.prototype.writeFloatLE=function(e,t,n){return G(this,e,t,!0,n)},l.prototype.writeFloatBE=function(e,t,n){return G(this,e,t,!1,n)},l.prototype.writeDoubleLE=function(e,t,n){return j(this,e,t,!0,n)},l.prototype.writeDoubleBE=function(e,t,n){return j(this,e,t,!1,n)},l.prototype.copy=function(e,t,n,r){if(!l.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var o=r-n;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,r):Uint8Array.prototype.set.call(e,this.subarray(n,r),t),o},l.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!l.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){var o=e.charCodeAt(0);("utf8"===r&&o<128||"latin1"===r)&&(e=o)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var i;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(i=t;i<n;++i)this[i]=e;else{var s=l.isBuffer(e)?e:l.from(e,r),a=s.length;if(0===a)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<n-t;++i)this[i+t]=s[i%a]}return this};var V={};function H(e,t,n){V[e]=function(n){var r,o;function i(){var r;return r=n.call(this)||this,Object.defineProperty(u(r),"message",{value:t.apply(u(r),arguments),writable:!0,configurable:!0}),r.name=r.name+" ["+e+"]",r.stack,delete r.name,r}return o=n,(r=i).prototype=Object.create(o.prototype),r.prototype.constructor=r,d(r,o),i.prototype.toString=function(){return this.name+" ["+e+"]: "+this.message},c(i,[{key:"code",get:function(){return e},set:function(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}}]),i}(n)}function q(e){for(var t="",n=e.length,r="-"===e[0]?1:0;n>=r+4;n-=3)t="_"+e.slice(n-3,n)+t;return""+e.slice(0,n)+t}function z(e,t,n,r,o,i){if(e>n||e<t){var s,a="bigint"==typeof t?"n":"";throw s=i>3?0===t||t===BigInt(0)?">= 0"+a+" and < 2"+a+" ** "+8*(i+1)+a:">= -(2"+a+" ** "+(8*(i+1)-1)+a+") and < 2 ** "+(8*(i+1)-1)+a:">= "+t+a+" and <= "+n+a,new V.ERR_OUT_OF_RANGE("value",s,e)}!function(e,t,n){J(t,"offset"),void 0!==e[t]&&void 0!==e[t+n]||W(t,e.length-(n+1))}(r,o,i)}function J(e,t){if("number"!=typeof e)throw new V.ERR_INVALID_ARG_TYPE(t,"number",e)}function W(e,t,n){if(Math.floor(e)!==e)throw J(e,n),new V.ERR_OUT_OF_RANGE(n||"offset","an integer",e);if(t<0)throw new V.ERR_BUFFER_OUT_OF_BOUNDS;throw new V.ERR_OUT_OF_RANGE(n||"offset",">= "+(n?1:0)+" and <= "+t,e)}H("ERR_BUFFER_OUT_OF_BOUNDS",function(e){return e?e+" is outside of buffer bounds":"Attempt to access memory outside buffer bounds"},RangeError),H("ERR_INVALID_ARG_TYPE",function(e,t){return'The "'+e+'" argument must be of type number. Received type '+typeof t},TypeError),H("ERR_OUT_OF_RANGE",function(e,t,n){var r='The value of "'+e+'" is out of range.',o=n;return Number.isInteger(n)&&Math.abs(n)>Math.pow(2,32)?o=q(String(n)):"bigint"==typeof n&&(o=String(n),(n>Math.pow(BigInt(2),BigInt(32))||n<-Math.pow(BigInt(2),BigInt(32)))&&(o=q(o)),o+="n"),r+" It must be "+t+". Received "+o},RangeError);var Y=/[^+/0-9A-Za-z-_]/g;function K(e,t){var n;t=t||1/0;for(var r=e.length,o=null,i=[],s=0;s<r;++s){if((n=e.charCodeAt(s))>55295&&n<57344){if(!o){if(n>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(s+1===r){(t-=3)>-1&&i.push(239,191,189);continue}o=n;continue}if(n<56320){(t-=3)>-1&&i.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&(t-=3)>-1&&i.push(239,191,189);if(o=null,n<128){if((t-=1)<0)break;i.push(n)}else if(n<2048){if((t-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function Q(e){return r.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(Y,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function $(e,t,n,r){var o;for(o=0;o<r&&!(o+n>=t.length||o>=e.length);++o)t[o+n]=e[o];return o}function X(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function Z(e){return e!=e}var ee=function(){for(var e="0123456789abcdef",t=new Array(256),n=0;n<16;++n)for(var r=16*n,o=0;o<16;++o)t[r+o]=e[n]+e[o];return t}();function te(e){return"undefined"==typeof BigInt?ne:e}function ne(){throw new Error("BigInt not supported")}},251:function(e,t){t.read=function(e,t,n,r,o){var i,s,a=8*o-r-1,c=(1<<a)-1,l=c>>1,u=-7,d=n?o-1:0,h=n?-1:1,f=e[t+d];for(d+=h,i=f&(1<<-u)-1,f>>=-u,u+=a;u>0;i=256*i+e[t+d],d+=h,u-=8);for(s=i&(1<<-u)-1,i>>=-u,u+=r;u>0;s=256*s+e[t+d],d+=h,u-=8);if(0===i)i=1-l;else{if(i===c)return s?NaN:1/0*(f?-1:1);s+=Math.pow(2,r),i-=l}return(f?-1:1)*s*Math.pow(2,i-r)},t.write=function(e,t,n,r,o,i){var s,a,c,l=8*i-o-1,u=(1<<l)-1,d=u>>1,h=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:i-1,p=r?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=u):(s=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-s))<1&&(s--,c*=2),(t+=s+d>=1?h/c:h*Math.pow(2,1-d))*c>=2&&(s++,c/=2),s+d>=u?(a=0,s=u):s+d>=1?(a=(t*c-1)*Math.pow(2,o),s+=d):(a=t*Math.pow(2,d-1)*Math.pow(2,o),s=0));o>=8;e[n+f]=255&a,f+=p,a/=256,o-=8);for(s=s<<o|a,l+=o;l>0;e[n+f]=255&s,f+=p,s/=256,l-=8);e[n+f-p]|=128*g}},127:function(e,t,n){var r=n(287).hp;"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n.g&&n.g,e.exports=function(){var e,t="function"==typeof atob,n="function"==typeof btoa,o="function"==typeof r,i="function"==typeof TextDecoder?new TextDecoder:void 0,s="function"==typeof TextEncoder?new TextEncoder:void 0,a=Array.prototype.slice.call("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="),c=(e={},a.forEach(function(t,n){return e[t]=n}),e),l=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,u=String.fromCharCode.bind(String),d="function"==typeof Uint8Array.from?Uint8Array.from.bind(Uint8Array):function(e){return new Uint8Array(Array.prototype.slice.call(e,0))},h=function(e){return e.replace(/=/g,"").replace(/[+\/]/g,function(e){return"+"==e?"-":"_"})},f=function(e){return e.replace(/[^A-Za-z0-9\+\/]/g,"")},p=function(e){for(var t,n,r,o,i="",s=e.length%3,c=0;c<e.length;){if((n=e.charCodeAt(c++))>255||(r=e.charCodeAt(c++))>255||(o=e.charCodeAt(c++))>255)throw new TypeError("invalid character found");i+=a[(t=n<<16|r<<8|o)>>18&63]+a[t>>12&63]+a[t>>6&63]+a[63&t]}return s?i.slice(0,s-3)+"===".substring(s):i},g=n?function(e){return btoa(e)}:o?function(e){return r.from(e,"binary").toString("base64")}:p,m=o?function(e){return r.from(e).toString("base64")}:function(e){for(var t=[],n=0,r=e.length;n<r;n+=4096)t.push(u.apply(null,e.subarray(n,n+4096)));return g(t.join(""))},v=function(e,t){return void 0===t&&(t=!1),t?h(m(e)):m(e)},b=function(e){if(e.length<2)return(t=e.charCodeAt(0))<128?e:t<2048?u(192|t>>>6)+u(128|63&t):u(224|t>>>12&15)+u(128|t>>>6&63)+u(128|63&t);var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return u(240|t>>>18&7)+u(128|t>>>12&63)+u(128|t>>>6&63)+u(128|63&t)},w=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,y=function(e){return e.replace(w,b)},_=o?function(e){return r.from(e,"utf8").toString("base64")}:s?function(e){return m(s.encode(e))}:function(e){return g(y(e))},C=function(e,t){return void 0===t&&(t=!1),t?h(_(e)):_(e)},I=function(e){return C(e,!0)},S=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,E=function(e){switch(e.length){case 4:var t=((7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3))-65536;return u(55296+(t>>>10))+u(56320+(1023&t));case 3:return u((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return u((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},P=function(e){return e.replace(S,E)},A=function(e){if(e=e.replace(/\s+/g,""),!l.test(e))throw new TypeError("malformed base64.");e+="==".slice(2-(3&e.length));for(var t,n,r,o="",i=0;i<e.length;)t=c[e.charAt(i++)]<<18|c[e.charAt(i++)]<<12|(n=c[e.charAt(i++)])<<6|(r=c[e.charAt(i++)]),o+=64===n?u(t>>16&255):64===r?u(t>>16&255,t>>8&255):u(t>>16&255,t>>8&255,255&t);return o},N=t?function(e){return atob(f(e))}:o?function(e){return r.from(e,"base64").toString("binary")}:A,k=o?function(e){return d(r.from(e,"base64"))}:function(e){return d(N(e).split("").map(function(e){return e.charCodeAt(0)}))},O=function(e){return k(D(e))},T=o?function(e){return r.from(e,"base64").toString("utf8")}:i?function(e){return i.decode(k(e))}:function(e){return P(N(e))},D=function(e){return f(e.replace(/[-_]/g,function(e){return"-"==e?"+":"/"}))},R=function(e){return T(D(e))},B=function(e){return{value:e,enumerable:!1,writable:!0,configurable:!0}},x=function(){var e=function(e,t){return Object.defineProperty(String.prototype,e,B(t))};e("fromBase64",function(){return R(this)}),e("toBase64",function(e){return C(this,e)}),e("toBase64URI",function(){return C(this,!0)}),e("toBase64URL",function(){return C(this,!0)}),e("toUint8Array",function(){return O(this)})},L=function(){var e=function(e,t){return Object.defineProperty(Uint8Array.prototype,e,B(t))};e("toBase64",function(e){return v(this,e)}),e("toBase64URI",function(){return v(this,!0)}),e("toBase64URL",function(){return v(this,!0)})},M={version:"3.7.5",VERSION:"3.7.5",atob:N,atobPolyfill:A,btoa:g,btoaPolyfill:p,fromBase64:R,toBase64:C,encode:C,encodeURI:I,encodeURL:I,utob:y,btou:P,decode:R,isValid:function(e){if("string"!=typeof e)return!1;var t=e.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(t)||!/[^\s0-9a-zA-Z\-_]/.test(t)},fromUint8Array:v,toUint8Array:O,extendString:x,extendUint8Array:L,extendBuiltins:function(){x(),L()},Base64:{}};return Object.keys(M).forEach(function(e){return M.Base64[e]=M[e]}),M}()},477:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.NakamaApi=t.ApiOperator=t.ValidatedPurchaseStore=t.ValidatedPurchaseEnvironment=void 0;var r,i,s,a=n(48),c=n(127);!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.SANDBOX=1]="SANDBOX",e[e.PRODUCTION=2]="PRODUCTION"}(r||(t.ValidatedPurchaseEnvironment=r={})),function(e){e[e.APPLE_APP_STORE=0]="APPLE_APP_STORE",e[e.GOOGLE_PLAY_STORE=1]="GOOGLE_PLAY_STORE",e[e.HUAWEI_APP_GALLERY=2]="HUAWEI_APP_GALLERY"}(i||(t.ValidatedPurchaseStore=i={})),function(e){e[e.NO_OVERRIDE=0]="NO_OVERRIDE",e[e.BEST=1]="BEST",e[e.SET=2]="SET",e[e.INCREMENT=3]="INCREMENT",e[e.DECREMENT=4]="DECREMENT"}(s||(t.ApiOperator=s={})),t.NakamaApi=function(){function e(e,t,n){this.serverKey=e,this.basePath=t,this.timeoutMs=n}var t=e.prototype;return t.healthcheck=function(e,t){var n=this;void 0===t&&(t={});var r=new Map,o=this.buildFullUrl(this.basePath,"/healthcheck",r),i=(0,a.buildFetchOptions)("GET",t,"");return e&&(i.headers.Authorization="Bearer "+e),Promise.race([fetch(o,i).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,n.timeoutMs,"Request timed out.")})])},t.getAccount=function(e,t){var n=this;void 0===t&&(t={});var r=new Map,o=this.buildFullUrl(this.basePath,"/v2/account",r),i=(0,a.buildFetchOptions)("GET",t,"");return e&&(i.headers.Authorization="Bearer "+e),Promise.race([fetch(o,i).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,n.timeoutMs,"Request timed out.")})])},t.updateAccount=function(e,t,n){var r=this;if(void 0===n&&(n={}),null==t)throw new Error("'body' is a required parameter but is null or undefined.");var o,i=new Map;o=JSON.stringify(t||{});var s=this.buildFullUrl(this.basePath,"/v2/account",i),c=(0,a.buildFetchOptions)("PUT",n,o);return e&&(c.headers.Authorization="Bearer "+e),Promise.race([fetch(s,c).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,r.timeoutMs,"Request timed out.")})])},t.authenticateApple=function(e,t,n,r,o,i){var s=this;if(void 0===i&&(i={}),null==n)throw new Error("'body' is a required parameter but is null or undefined.");var l,u=new Map;u.set("create",r),u.set("username",o),l=JSON.stringify(n||{});var d=this.buildFullUrl(this.basePath,"/v2/account/authenticate/apple",u),h=(0,a.buildFetchOptions)("POST",i,l);return h.headers.Authorization="Basic "+(0,c.encode)(e+":"+t),Promise.race([fetch(d,h).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,s.timeoutMs,"Request timed out.")})])},t.authenticateCustom=function(e,t,n,r,o,i){var s=this;if(void 0===i&&(i={}),null==n)throw new Error("'body' is a required parameter but is null or undefined.");var l,u=new Map;u.set("create",r),u.set("username",o),l=JSON.stringify(n||{});var d=this.buildFullUrl(this.basePath,"/v2/account/authenticate/custom",u),h=(0,a.buildFetchOptions)("POST",i,l);return h.headers.Authorization="Basic "+(0,c.encode)(e+":"+t),Promise.race([fetch(d,h).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,s.timeoutMs,"Request timed out.")})])},t.authenticateDevice=function(e,t,n,r,o,i){var s=this;if(void 0===i&&(i={}),null==n)throw new Error("'body' is a required parameter but is null or undefined.");var l,u=new Map;u.set("create",r),u.set("username",o),l=JSON.stringify(n||{});var d=this.buildFullUrl(this.basePath,"/v2/account/authenticate/device",u),h=(0,a.buildFetchOptions)("POST",i,l);return h.headers.Authorization="Basic "+(0,c.encode)(e+":"+t),Promise.race([fetch(d,h).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,s.timeoutMs,"Request timed out.")})])},t.authenticateEmail=function(e,t,n,r,o,i){var s=this;if(void 0===i&&(i={}),null==n)throw new Error("'body' is a required parameter but is null or undefined.");var l,u=new Map;u.set("create",r),u.set("username",o),l=JSON.stringify(n||{});var d=this.buildFullUrl(this.basePath,"/v2/account/authenticate/email",u),h=(0,a.buildFetchOptions)("POST",i,l);return h.headers.Authorization="Basic "+(0,c.encode)(e+":"+t),Promise.race([fetch(d,h).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,s.timeoutMs,"Request timed out.")})])},t.authenticateFacebook=function(e,t,n,r,o,i,s){var l=this;if(void 0===s&&(s={}),null==n)throw new Error("'body' is a required parameter but is null or undefined.");var u,d=new Map;d.set("create",r),d.set("username",o),d.set("sync",i),u=JSON.stringify(n||{});var h=this.buildFullUrl(this.basePath,"/v2/account/authenticate/facebook",d),f=(0,a.buildFetchOptions)("POST",s,u);return f.headers.Authorization="Basic "+(0,c.encode)(e+":"+t),Promise.race([fetch(h,f).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,l.timeoutMs,"Request timed out.")})])},t.authenticateFacebookInstantGame=function(e,t,n,r,o,i){var s=this;if(void 0===i&&(i={}),null==n)throw new Error("'body' is a required parameter but is null or undefined.");var l,u=new Map;u.set("create",r),u.set("username",o),l=JSON.stringify(n||{});var d=this.buildFullUrl(this.basePath,"/v2/account/authenticate/facebookinstantgame",u),h=(0,a.buildFetchOptions)("POST",i,l);return h.headers.Authorization="Basic "+(0,c.encode)(e+":"+t),Promise.race([fetch(d,h).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,s.timeoutMs,"Request timed out.")})])},t.authenticateGameCenter=function(e,t,n,r,o,i){var s=this;if(void 0===i&&(i={}),null==n)throw new Error("'body' is a required parameter but is null or undefined.");var l,u=new Map;u.set("create",r),u.set("username",o),l=JSON.stringify(n||{});var d=this.buildFullUrl(this.basePath,"/v2/account/authenticate/gamecenter",u),h=(0,a.buildFetchOptions)("POST",i,l);return h.headers.Authorization="Basic "+(0,c.encode)(e+":"+t),Promise.race([fetch(d,h).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,s.timeoutMs,"Request timed out.")})])},t.authenticateGoogle=function(e,t,n,r,o,i){var s=this;if(void 0===i&&(i={}),null==n)throw new Error("'body' is a required parameter but is null or undefined.");var l,u=new Map;u.set("create",r),u.set("username",o),l=JSON.stringify(n||{});var d=this.buildFullUrl(this.basePath,"/v2/account/authenticate/google",u),h=(0,a.buildFetchOptions)("POST",i,l);return h.headers.Authorization="Basic "+(0,c.encode)(e+":"+t),Promise.race([fetch(d,h).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,s.timeoutMs,"Request timed out.")})])},t.authenticateSteam=function(e,t,n,r,o,i,s){var l=this;if(void 0===s&&(s={}),null==n)throw new Error("'body' is a required parameter but is null or undefined.");var u,d=new Map;d.set("create",r),d.set("username",o),d.set("sync",i),u=JSON.stringify(n||{});var h=this.buildFullUrl(this.basePath,"/v2/account/authenticate/steam",d),f=(0,a.buildFetchOptions)("POST",s,u);return f.headers.Authorization="Basic "+(0,c.encode)(e+":"+t),Promise.race([fetch(h,f).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,l.timeoutMs,"Request timed out.")})])},t.linkApple=function(e,t,n){var r=this;if(void 0===n&&(n={}),null==t)throw new Error("'body' is a required parameter but is null or undefined.");var o,i=new Map;o=JSON.stringify(t||{});var s=this.buildFullUrl(this.basePath,"/v2/account/link/apple",i),c=(0,a.buildFetchOptions)("POST",n,o);return e&&(c.headers.Authorization="Bearer "+e),Promise.race([fetch(s,c).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,r.timeoutMs,"Request timed out.")})])},t.linkCustom=function(e,t,n){var r=this;if(void 0===n&&(n={}),null==t)throw new Error("'body' is a required parameter but is null or undefined.");var o,i=new Map;o=JSON.stringify(t||{});var s=this.buildFullUrl(this.basePath,"/v2/account/link/custom",i),c=(0,a.buildFetchOptions)("POST",n,o);return e&&(c.headers.Authorization="Bearer "+e),Promise.race([fetch(s,c).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,r.timeoutMs,"Request timed out.")})])},t.linkDevice=function(e,t,n){var r=this;if(void 0===n&&(n={}),null==t)throw new Error("'body' is a required parameter but is null or undefined.");var o,i=new Map;o=JSON.stringify(t||{});var s=this.buildFullUrl(this.basePath,"/v2/account/link/device",i),c=(0,a.buildFetchOptions)("POST",n,o);return e&&(c.headers.Authorization="Bearer "+e),Promise.race([fetch(s,c).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,r.timeoutMs,"Request timed out.")})])},t.linkEmail=function(e,t,n){var r=this;if(void 0===n&&(n={}),null==t)throw new Error("'body' is a required parameter but is null or undefined.");var o,i=new Map;o=JSON.stringify(t||{});var s=this.buildFullUrl(this.basePath,"/v2/account/link/email",i),c=(0,a.buildFetchOptions)("POST",n,o);return e&&(c.headers.Authorization="Bearer "+e),Promise.race([fetch(s,c).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,r.timeoutMs,"Request timed out.")})])},t.linkFacebook=function(e,t,n,r){var o=this;if(void 0===r&&(r={}),null==t)throw new Error("'body' is a required parameter but is null or undefined.");var i,s=new Map;s.set("sync",n),i=JSON.stringify(t||{});var c=this.buildFullUrl(this.basePath,"/v2/account/link/facebook",s),l=(0,a.buildFetchOptions)("POST",r,i);return e&&(l.headers.Authorization="Bearer "+e),Promise.race([fetch(c,l).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,o.timeoutMs,"Request timed out.")})])},t.linkFacebookInstantGame=function(e,t,n){var r=this;if(void 0===n&&(n={}),null==t)throw new Error("'body' is a required parameter but is null or undefined.");var o,i=new Map;o=JSON.stringify(t||{});var s=this.buildFullUrl(this.basePath,"/v2/account/link/facebookinstantgame",i),c=(0,a.buildFetchOptions)("POST",n,o);return e&&(c.headers.Authorization="Bearer "+e),Promise.race([fetch(s,c).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,r.timeoutMs,"Request timed out.")})])},t.linkGameCenter=function(e,t,n){var r=this;if(void 0===n&&(n={}),null==t)throw new Error("'body' is a required parameter but is null or undefined.");var o,i=new Map;o=JSON.stringify(t||{});var s=this.buildFullUrl(this.basePath,"/v2/account/link/gamecenter",i),c=(0,a.buildFetchOptions)("POST",n,o);return e&&(c.headers.Authorization="Bearer "+e),Promise.race([fetch(s,c).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,r.timeoutMs,"Request timed out.")})])},t.linkGoogle=function(e,t,n){var r=this;if(void 0===n&&(n={}),null==t)throw new Error("'body' is a required parameter but is null or undefined.");var o,i=new Map;o=JSON.stringify(t||{});var s=this.buildFullUrl(this.basePath,"/v2/account/link/google",i),c=(0,a.buildFetchOptions)("POST",n,o);return e&&(c.headers.Authorization="Bearer "+e),Promise.race([fetch(s,c).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,r.timeoutMs,"Request timed out.")})])},t.linkSteam=function(e,t,n){var r=this;if(void 0===n&&(n={}),null==t)throw new Error("'body' is a required parameter but is null or undefined.");var o,i=new Map;o=JSON.stringify(t||{});var s=this.buildFullUrl(this.basePath,"/v2/account/link/steam",i),c=(0,a.buildFetchOptions)("POST",n,o);return e&&(c.headers.Authorization="Bearer "+e),Promise.race([fetch(s,c).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,r.timeoutMs,"Request timed out.")})])},t.sessionRefresh=function(e,t,n,r){var o=this;if(void 0===r&&(r={}),null==n)throw new Error("'body' is a required parameter but is null or undefined.");var i,s=new Map;i=JSON.stringify(n||{});var l=this.buildFullUrl(this.basePath,"/v2/account/session/refresh",s),u=(0,a.buildFetchOptions)("POST",r,i);return u.headers.Authorization="Basic "+(0,c.encode)(e+":"+t),Promise.race([fetch(l,u).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,o.timeoutMs,"Request timed out.")})])},t.unlinkApple=function(e,t,n){var r=this;if(void 0===n&&(n={}),null==t)throw new Error("'body' is a required parameter but is null or undefined.");var o,i=new Map;o=JSON.stringify(t||{});var s=this.buildFullUrl(this.basePath,"/v2/account/unlink/apple",i),c=(0,a.buildFetchOptions)("POST",n,o);return e&&(c.headers.Authorization="Bearer "+e),Promise.race([fetch(s,c).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,r.timeoutMs,"Request timed out.")})])},t.unlinkCustom=function(e,t,n){var r=this;if(void 0===n&&(n={}),null==t)throw new Error("'body' is a required parameter but is null or undefined.");var o,i=new Map;o=JSON.stringify(t||{});var s=this.buildFullUrl(this.basePath,"/v2/account/unlink/custom",i),c=(0,a.buildFetchOptions)("POST",n,o);return e&&(c.headers.Authorization="Bearer "+e),Promise.race([fetch(s,c).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,r.timeoutMs,"Request timed out.")})])},t.unlinkDevice=function(e,t,n){var r=this;if(void 0===n&&(n={}),null==t)throw new Error("'body' is a required parameter but is null or undefined.");var o,i=new Map;o=JSON.stringify(t||{});var s=this.buildFullUrl(this.basePath,"/v2/account/unlink/device",i),c=(0,a.buildFetchOptions)("POST",n,o);return e&&(c.headers.Authorization="Bearer "+e),Promise.race([fetch(s,c).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,r.timeoutMs,"Request timed out.")})])},t.unlinkEmail=function(e,t,n){var r=this;if(void 0===n&&(n={}),null==t)throw new Error("'body' is a required parameter but is null or undefined.");var o,i=new Map;o=JSON.stringify(t||{});var s=this.buildFullUrl(this.basePath,"/v2/account/unlink/email",i),c=(0,a.buildFetchOptions)("POST",n,o);return e&&(c.headers.Authorization="Bearer "+e),Promise.race([fetch(s,c).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,r.timeoutMs,"Request timed out.")})])},t.unlinkFacebook=function(e,t,n){var r=this;if(void 0===n&&(n={}),null==t)throw new Error("'body' is a required parameter but is null or undefined.");var o,i=new Map;o=JSON.stringify(t||{});var s=this.buildFullUrl(this.basePath,"/v2/account/unlink/facebook",i),c=(0,a.buildFetchOptions)("POST",n,o);return e&&(c.headers.Authorization="Bearer "+e),Promise.race([fetch(s,c).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,r.timeoutMs,"Request timed out.")})])},t.unlinkFacebookInstantGame=function(e,t,n){var r=this;if(void 0===n&&(n={}),null==t)throw new Error("'body' is a required parameter but is null or undefined.");var o,i=new Map;o=JSON.stringify(t||{});var s=this.buildFullUrl(this.basePath,"/v2/account/unlink/facebookinstantgame",i),c=(0,a.buildFetchOptions)("POST",n,o);return e&&(c.headers.Authorization="Bearer "+e),Promise.race([fetch(s,c).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,r.timeoutMs,"Request timed out.")})])},t.unlinkGameCenter=function(e,t,n){var r=this;if(void 0===n&&(n={}),null==t)throw new Error("'body' is a required parameter but is null or undefined.");var o,i=new Map;o=JSON.stringify(t||{});var s=this.buildFullUrl(this.basePath,"/v2/account/unlink/gamecenter",i),c=(0,a.buildFetchOptions)("POST",n,o);return e&&(c.headers.Authorization="Bearer "+e),Promise.race([fetch(s,c).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,r.timeoutMs,"Request timed out.")})])},t.unlinkGoogle=function(e,t,n){var r=this;if(void 0===n&&(n={}),null==t)throw new Error("'body' is a required parameter but is null or undefined.");var o,i=new Map;o=JSON.stringify(t||{});var s=this.buildFullUrl(this.basePath,"/v2/account/unlink/google",i),c=(0,a.buildFetchOptions)("POST",n,o);return e&&(c.headers.Authorization="Bearer "+e),Promise.race([fetch(s,c).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,r.timeoutMs,"Request timed out.")})])},t.unlinkSteam=function(e,t,n){var r=this;if(void 0===n&&(n={}),null==t)throw new Error("'body' is a required parameter but is null or undefined.");var o,i=new Map;o=JSON.stringify(t||{});var s=this.buildFullUrl(this.basePath,"/v2/account/unlink/steam",i),c=(0,a.buildFetchOptions)("POST",n,o);return e&&(c.headers.Authorization="Bearer "+e),Promise.race([fetch(s,c).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,r.timeoutMs,"Request timed out.")})])},t.listChannelMessages=function(e,t,n,r,o,i){var s=this;if(void 0===i&&(i={}),null==t)throw new Error("'channelId' is a required parameter but is null or undefined.");var c="/v2/channel/{channelId}".replace("{channelId}",encodeURIComponent(String(t))),l=new Map;l.set("limit",n),l.set("forward",r),l.set("cursor",o);var u=this.buildFullUrl(this.basePath,c,l),d=(0,a.buildFetchOptions)("GET",i,"");return e&&(d.headers.Authorization="Bearer "+e),Promise.race([fetch(u,d).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,s.timeoutMs,"Request timed out.")})])},t.event=function(e,t,n){var r=this;if(void 0===n&&(n={}),null==t)throw new Error("'body' is a required parameter but is null or undefined.");var o,i=new Map;o=JSON.stringify(t||{});var s=this.buildFullUrl(this.basePath,"/v2/event",i),c=(0,a.buildFetchOptions)("POST",n,o);return e&&(c.headers.Authorization="Bearer "+e),Promise.race([fetch(s,c).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,r.timeoutMs,"Request timed out.")})])},t.deleteFriends=function(e,t,n,r){var o=this;void 0===r&&(r={});var i=new Map;i.set("ids",t),i.set("usernames",n);var s=this.buildFullUrl(this.basePath,"/v2/friend",i),c=(0,a.buildFetchOptions)("DELETE",r,"");return e&&(c.headers.Authorization="Bearer "+e),Promise.race([fetch(s,c).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,o.timeoutMs,"Request timed out.")})])},t.listFriends=function(e,t,n,r,o){var i=this;void 0===o&&(o={});var s=new Map;s.set("limit",t),s.set("state",n),s.set("cursor",r);var c=this.buildFullUrl(this.basePath,"/v2/friend",s),l=(0,a.buildFetchOptions)("GET",o,"");return e&&(l.headers.Authorization="Bearer "+e),Promise.race([fetch(c,l).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,i.timeoutMs,"Request timed out.")})])},t.addFriends=function(e,t,n,r){var o=this;void 0===r&&(r={});var i=new Map;i.set("ids",t),i.set("usernames",n);var s=this.buildFullUrl(this.basePath,"/v2/friend",i),c=(0,a.buildFetchOptions)("POST",r,"");return e&&(c.headers.Authorization="Bearer "+e),Promise.race([fetch(s,c).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,o.timeoutMs,"Request timed out.")})])},t.blockFriends=function(e,t,n,r){var o=this;void 0===r&&(r={});var i=new Map;i.set("ids",t),i.set("usernames",n);var s=this.buildFullUrl(this.basePath,"/v2/friend/block",i),c=(0,a.buildFetchOptions)("POST",r,"");return e&&(c.headers.Authorization="Bearer "+e),Promise.race([fetch(s,c).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,o.timeoutMs,"Request timed out.")})])},t.importFacebookFriends=function(e,t,n,r){var o=this;if(void 0===r&&(r={}),null==t)throw new Error("'body' is a required parameter but is null or undefined.");var i,s=new Map;s.set("reset",n),i=JSON.stringify(t||{});var c=this.buildFullUrl(this.basePath,"/v2/friend/facebook",s),l=(0,a.buildFetchOptions)("POST",r,i);return e&&(l.headers.Authorization="Bearer "+e),Promise.race([fetch(c,l).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,o.timeoutMs,"Request timed out.")})])},t.importSteamFriends=function(e,t,n,r){var o=this;if(void 0===r&&(r={}),null==t)throw new Error("'body' is a required parameter but is null or undefined.");var i,s=new Map;s.set("reset",n),i=JSON.stringify(t||{});var c=this.buildFullUrl(this.basePath,"/v2/friend/steam",s),l=(0,a.buildFetchOptions)("POST",r,i);return e&&(l.headers.Authorization="Bearer "+e),Promise.race([fetch(c,l).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,o.timeoutMs,"Request timed out.")})])},t.listGroups=function(e,t,n,r,o,i,s,c){var l=this;void 0===c&&(c={});var u=new Map;u.set("name",t),u.set("cursor",n),u.set("limit",r),u.set("lang_tag",o),u.set("members",i),u.set("open",s);var d=this.buildFullUrl(this.basePath,"/v2/group",u),h=(0,a.buildFetchOptions)("GET",c,"");return e&&(h.headers.Authorization="Bearer "+e),Promise.race([fetch(d,h).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,l.timeoutMs,"Request timed out.")})])},t.createGroup=function(e,t,n){var r=this;if(void 0===n&&(n={}),null==t)throw new Error("'body' is a required parameter but is null or undefined.");var o,i=new Map;o=JSON.stringify(t||{});var s=this.buildFullUrl(this.basePath,"/v2/group",i),c=(0,a.buildFetchOptions)("POST",n,o);return e&&(c.headers.Authorization="Bearer "+e),Promise.race([fetch(s,c).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,r.timeoutMs,"Request timed out.")})])},t.deleteGroup=function(e,t,n){var r=this;if(void 0===n&&(n={}),null==t)throw new Error("'groupId' is a required parameter but is null or undefined.");var o="/v2/group/{groupId}".replace("{groupId}",encodeURIComponent(String(t))),i=new Map,s=this.buildFullUrl(this.basePath,o,i),c=(0,a.buildFetchOptions)("DELETE",n,"");return e&&(c.headers.Authorization="Bearer "+e),Promise.race([fetch(s,c).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,r.timeoutMs,"Request timed out.")})])},t.updateGroup=function(e,t,n,r){var o=this;if(void 0===r&&(r={}),null==t)throw new Error("'groupId' is a required parameter but is null or undefined.");if(null==n)throw new Error("'body' is a required parameter but is null or undefined.");var i,s="/v2/group/{groupId}".replace("{groupId}",encodeURIComponent(String(t))),c=new Map;i=JSON.stringify(n||{});var l=this.buildFullUrl(this.basePath,s,c),u=(0,a.buildFetchOptions)("PUT",r,i);return e&&(u.headers.Authorization="Bearer "+e),Promise.race([fetch(l,u).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,o.timeoutMs,"Request timed out.")})])},t.addGroupUsers=function(e,t,n,r){var o=this;if(void 0===r&&(r={}),null==t)throw new Error("'groupId' is a required parameter but is null or undefined.");var i="/v2/group/{groupId}/add".replace("{groupId}",encodeURIComponent(String(t))),s=new Map;s.set("user_ids",n);var c=this.buildFullUrl(this.basePath,i,s),l=(0,a.buildFetchOptions)("POST",r,"");return e&&(l.headers.Authorization="Bearer "+e),Promise.race([fetch(c,l).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,o.timeoutMs,"Request timed out.")})])},t.banGroupUsers=function(e,t,n,r){var o=this;if(void 0===r&&(r={}),null==t)throw new Error("'groupId' is a required parameter but is null or undefined.");var i="/v2/group/{groupId}/ban".replace("{groupId}",encodeURIComponent(String(t))),s=new Map;s.set("user_ids",n);var c=this.buildFullUrl(this.basePath,i,s),l=(0,a.buildFetchOptions)("POST",r,"");return e&&(l.headers.Authorization="Bearer "+e),Promise.race([fetch(c,l).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,o.timeoutMs,"Request timed out.")})])},t.demoteGroupUsers=function(e,t,n,r){var o=this;if(void 0===r&&(r={}),null==t)throw new Error("'groupId' is a required parameter but is null or undefined.");if(null==n)throw new Error("'userIds' is a required parameter but is null or undefined.");var i="/v2/group/{groupId}/demote".replace("{groupId}",encodeURIComponent(String(t))),s=new Map;s.set("user_ids",n);var c=this.buildFullUrl(this.basePath,i,s),l=(0,a.buildFetchOptions)("POST",r,"");return e&&(l.headers.Authorization="Bearer "+e),Promise.race([fetch(c,l).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,o.timeoutMs,"Request timed out.")})])},t.joinGroup=function(e,t,n){var r=this;if(void 0===n&&(n={}),null==t)throw new Error("'groupId' is a required parameter but is null or undefined.");var o="/v2/group/{groupId}/join".replace("{groupId}",encodeURIComponent(String(t))),i=new Map,s=this.buildFullUrl(this.basePath,o,i),c=(0,a.buildFetchOptions)("POST",n,"");return e&&(c.headers.Authorization="Bearer "+e),Promise.race([fetch(s,c).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,r.timeoutMs,"Request timed out.")})])},t.kickGroupUsers=function(e,t,n,r){var o=this;if(void 0===r&&(r={}),null==t)throw new Error("'groupId' is a required parameter but is null or undefined.");var i="/v2/group/{groupId}/kick".replace("{groupId}",encodeURIComponent(String(t))),s=new Map;s.set("user_ids",n);var c=this.buildFullUrl(this.basePath,i,s),l=(0,a.buildFetchOptions)("POST",r,"");return e&&(l.headers.Authorization="Bearer "+e),Promise.race([fetch(c,l).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,o.timeoutMs,"Request timed out.")})])},t.leaveGroup=function(e,t,n){var r=this;if(void 0===n&&(n={}),null==t)throw new Error("'groupId' is a required parameter but is null or undefined.");var o="/v2/group/{groupId}/leave".replace("{groupId}",encodeURIComponent(String(t))),i=new Map,s=this.buildFullUrl(this.basePath,o,i),c=(0,a.buildFetchOptions)("POST",n,"");return e&&(c.headers.Authorization="Bearer "+e),Promise.race([fetch(s,c).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,r.timeoutMs,"Request timed out.")})])},t.promoteGroupUsers=function(e,t,n,r){var o=this;if(void 0===r&&(r={}),null==t)throw new Error("'groupId' is a required parameter but is null or undefined.");var i="/v2/group/{groupId}/promote".replace("{groupId}",encodeURIComponent(String(t))),s=new Map;s.set("user_ids",n);var c=this.buildFullUrl(this.basePath,i,s),l=(0,a.buildFetchOptions)("POST",r,"");return e&&(l.headers.Authorization="Bearer "+e),Promise.race([fetch(c,l).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,o.timeoutMs,"Request timed out.")})])},t.listGroupUsers=function(e,t,n,r,o,i){var s=this;if(void 0===i&&(i={}),null==t)throw new Error("'groupId' is a required parameter but is null or undefined.");var c="/v2/group/{groupId}/user".replace("{groupId}",encodeURIComponent(String(t))),l=new Map;l.set("limit",n),l.set("state",r),l.set("cursor",o);var u=this.buildFullUrl(this.basePath,c,l),d=(0,a.buildFetchOptions)("GET",i,"");return e&&(d.headers.Authorization="Bearer "+e),Promise.race([fetch(u,d).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,s.timeoutMs,"Request timed out.")})])},t.validatePurchaseApple=function(e,t,n){var r=this;if(void 0===n&&(n={}),null==t)throw new Error("'body' is a required parameter but is null or undefined.");var o,i=new Map;o=JSON.stringify(t||{});var s=this.buildFullUrl(this.basePath,"/v2/iap/purchase/apple",i),c=(0,a.buildFetchOptions)("POST",n,o);return e&&(c.headers.Authorization="Bearer "+e),Promise.race([fetch(s,c).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,r.timeoutMs,"Request timed out.")})])},t.validatePurchaseGoogle=function(e,t,n){var r=this;if(void 0===n&&(n={}),null==t)throw new Error("'body' is a required parameter but is null or undefined.");var o,i=new Map;o=JSON.stringify(t||{});var s=this.buildFullUrl(this.basePath,"/v2/iap/purchase/google",i),c=(0,a.buildFetchOptions)("POST",n,o);return e&&(c.headers.Authorization="Bearer "+e),Promise.race([fetch(s,c).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,r.timeoutMs,"Request timed out.")})])},t.validatePurchaseHuawei=function(e,t,n){var r=this;if(void 0===n&&(n={}),null==t)throw new Error("'body' is a required parameter but is null or undefined.");var o,i=new Map;o=JSON.stringify(t||{});var s=this.buildFullUrl(this.basePath,"/v2/iap/purchase/huawei",i),c=(0,a.buildFetchOptions)("POST",n,o);return e&&(c.headers.Authorization="Bearer "+e),Promise.race([fetch(s,c).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,r.timeoutMs,"Request timed out.")})])},t.deleteLeaderboardRecord=function(e,t,n){var r=this;if(void 0===n&&(n={}),null==t)throw new Error("'leaderboardId' is a required parameter but is null or undefined.");var o="/v2/leaderboard/{leaderboardId}".replace("{leaderboardId}",encodeURIComponent(String(t))),i=new Map,s=this.buildFullUrl(this.basePath,o,i),c=(0,a.buildFetchOptions)("DELETE",n,"");return e&&(c.headers.Authorization="Bearer "+e),Promise.race([fetch(s,c).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,r.timeoutMs,"Request timed out.")})])},t.listLeaderboardRecords=function(e,t,n,r,o,i,s){var c=this;if(void 0===s&&(s={}),null==t)throw new Error("'leaderboardId' is a required parameter but is null or undefined.");var l="/v2/leaderboard/{leaderboardId}".replace("{leaderboardId}",encodeURIComponent(String(t))),u=new Map;u.set("owner_ids",n),u.set("limit",r),u.set("cursor",o),u.set("expiry",i);var d=this.buildFullUrl(this.basePath,l,u),h=(0,a.buildFetchOptions)("GET",s,"");return e&&(h.headers.Authorization="Bearer "+e),Promise.race([fetch(d,h).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,c.timeoutMs,"Request timed out.")})])},t.writeLeaderboardRecord=function(e,t,n,r){var o=this;if(void 0===r&&(r={}),null==t)throw new Error("'leaderboardId' is a required parameter but is null or undefined.");if(null==n)throw new Error("'body' is a required parameter but is null or undefined.");var i,s="/v2/leaderboard/{leaderboardId}".replace("{leaderboardId}",encodeURIComponent(String(t))),c=new Map;i=JSON.stringify(n||{});var l=this.buildFullUrl(this.basePath,s,c),u=(0,a.buildFetchOptions)("POST",r,i);return e&&(u.headers.Authorization="Bearer "+e),Promise.race([fetch(l,u).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,o.timeoutMs,"Request timed out.")})])},t.listLeaderboardRecordsAroundOwner=function(e,t,n,r,o,i){var s=this;if(void 0===i&&(i={}),null==t)throw new Error("'leaderboardId' is a required parameter but is null or undefined.");if(null==n)throw new Error("'ownerId' is a required parameter but is null or undefined.");var c="/v2/leaderboard/{leaderboardId}/owner/{ownerId}".replace("{leaderboardId}",encodeURIComponent(String(t))).replace("{ownerId}",encodeURIComponent(String(n))),l=new Map;l.set("limit",r),l.set("expiry",o);var u=this.buildFullUrl(this.basePath,c,l),d=(0,a.buildFetchOptions)("GET",i,"");return e&&(d.headers.Authorization="Bearer "+e),Promise.race([fetch(u,d).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,s.timeoutMs,"Request timed out.")})])},t.listMatches=function(e,t,n,r,o,i,s,c){var l=this;void 0===c&&(c={});var u=new Map;u.set("limit",t),u.set("authoritative",n),u.set("label",r),u.set("min_size",o),u.set("max_size",i),u.set("query",s);var d=this.buildFullUrl(this.basePath,"/v2/match",u),h=(0,a.buildFetchOptions)("GET",c,"");return e&&(h.headers.Authorization="Bearer "+e),Promise.race([fetch(d,h).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,l.timeoutMs,"Request timed out.")})])},t.deleteNotifications=function(e,t,n){var r=this;void 0===n&&(n={});var o=new Map;o.set("ids",t);var i=this.buildFullUrl(this.basePath,"/v2/notification",o),s=(0,a.buildFetchOptions)("DELETE",n,"");return e&&(s.headers.Authorization="Bearer "+e),Promise.race([fetch(i,s).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,r.timeoutMs,"Request timed out.")})])},t.listNotifications=function(e,t,n,r){var o=this;void 0===r&&(r={});var i=new Map;i.set("limit",t),i.set("cacheable_cursor",n);var s=this.buildFullUrl(this.basePath,"/v2/notification",i),c=(0,a.buildFetchOptions)("GET",r,"");return e&&(c.headers.Authorization="Bearer "+e),Promise.race([fetch(s,c).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,o.timeoutMs,"Request timed out.")})])},t.rpcFunc2=function(e,t,n,r,o){var i=this;if(void 0===o&&(o={}),null==t)throw new Error("'id' is a required parameter but is null or undefined.");var s="/v2/rpc/{id}".replace("{id}",encodeURIComponent(String(t))),c=new Map;c.set("payload",n),c.set("http_key",r);var l=this.buildFullUrl(this.basePath,s,c),u=(0,a.buildFetchOptions)("GET",o,"");return e&&(u.headers.Authorization="Bearer "+e),Promise.race([fetch(l,u).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,i.timeoutMs,"Request timed out.")})])},t.rpcFunc=function(e,t,n,r,o){var i=this;if(void 0===o&&(o={}),null==t)throw new Error("'id' is a required parameter but is null or undefined.");if(null==n)throw new Error("'body' is a required parameter but is null or undefined.");var s,c="/v2/rpc/{id}".replace("{id}",encodeURIComponent(String(t))),l=new Map;l.set("http_key",r),s=JSON.stringify(n||{});var u=this.buildFullUrl(this.basePath,c,l),d=(0,a.buildFetchOptions)("POST",o,s);return e&&(d.headers.Authorization="Bearer "+e),Promise.race([fetch(u,d).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,i.timeoutMs,"Request timed out.")})])},t.sessionLogout=function(e,t,n){var r=this;if(void 0===n&&(n={}),null==t)throw new Error("'body' is a required parameter but is null or undefined.");var o,i=new Map;o=JSON.stringify(t||{});var s=this.buildFullUrl(this.basePath,"/v2/session/logout",i),c=(0,a.buildFetchOptions)("POST",n,o);return e&&(c.headers.Authorization="Bearer "+e),Promise.race([fetch(s,c).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,r.timeoutMs,"Request timed out.")})])},t.readStorageObjects=function(e,t,n){var r=this;if(void 0===n&&(n={}),null==t)throw new Error("'body' is a required parameter but is null or undefined.");var o,i=new Map;o=JSON.stringify(t||{});var s=this.buildFullUrl(this.basePath,"/v2/storage",i),c=(0,a.buildFetchOptions)("POST",n,o);return e&&(c.headers.Authorization="Bearer "+e),Promise.race([fetch(s,c).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,r.timeoutMs,"Request timed out.")})])},t.writeStorageObjects=function(e,t,n){var r=this;if(void 0===n&&(n={}),null==t)throw new Error("'body' is a required parameter but is null or undefined.");var o,i=new Map;o=JSON.stringify(t||{});var s=this.buildFullUrl(this.basePath,"/v2/storage",i),c=(0,a.buildFetchOptions)("PUT",n,o);return e&&(c.headers.Authorization="Bearer "+e),Promise.race([fetch(s,c).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,r.timeoutMs,"Request timed out.")})])},t.deleteStorageObjects=function(e,t,n){var r=this;if(void 0===n&&(n={}),null==t)throw new Error("'body' is a required parameter but is null or undefined.");var o,i=new Map;o=JSON.stringify(t||{});var s=this.buildFullUrl(this.basePath,"/v2/storage/delete",i),c=(0,a.buildFetchOptions)("PUT",n,o);return e&&(c.headers.Authorization="Bearer "+e),Promise.race([fetch(s,c).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,r.timeoutMs,"Request timed out.")})])},t.listStorageObjects=function(e,t,n,r,o,i){var s=this;if(void 0===i&&(i={}),null==t)throw new Error("'collection' is a required parameter but is null or undefined.");var c="/v2/storage/{collection}".replace("{collection}",encodeURIComponent(String(t))),l=new Map;l.set("user_id",n),l.set("limit",r),l.set("cursor",o);var u=this.buildFullUrl(this.basePath,c,l),d=(0,a.buildFetchOptions)("GET",i,"");return e&&(d.headers.Authorization="Bearer "+e),Promise.race([fetch(u,d).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,s.timeoutMs,"Request timed out.")})])},t.listStorageObjects2=function(e,t,n,r,o,i){var s=this;if(void 0===i&&(i={}),null==t)throw new Error("'collection' is a required parameter but is null or undefined.");if(null==n)throw new Error("'userId' is a required parameter but is null or undefined.");var c="/v2/storage/{collection}/{userId}".replace("{collection}",encodeURIComponent(String(t))).replace("{userId}",encodeURIComponent(String(n))),l=new Map;l.set("limit",r),l.set("cursor",o);var u=this.buildFullUrl(this.basePath,c,l),d=(0,a.buildFetchOptions)("GET",i,"");return e&&(d.headers.Authorization="Bearer "+e),Promise.race([fetch(u,d).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,s.timeoutMs,"Request timed out.")})])},t.listTournaments=function(e,t,n,r,o,i,s,c){var l=this;void 0===c&&(c={});var u=new Map;u.set("category_start",t),u.set("category_end",n),u.set("start_time",r),u.set("end_time",o),u.set("limit",i),u.set("cursor",s);var d=this.buildFullUrl(this.basePath,"/v2/tournament",u),h=(0,a.buildFetchOptions)("GET",c,"");return e&&(h.headers.Authorization="Bearer "+e),Promise.race([fetch(d,h).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,l.timeoutMs,"Request timed out.")})])},t.listTournamentRecords=function(e,t,n,r,o,i,s){var c=this;if(void 0===s&&(s={}),null==t)throw new Error("'tournamentId' is a required parameter but is null or undefined.");var l="/v2/tournament/{tournamentId}".replace("{tournamentId}",encodeURIComponent(String(t))),u=new Map;u.set("owner_ids",n),u.set("limit",r),u.set("cursor",o),u.set("expiry",i);var d=this.buildFullUrl(this.basePath,l,u),h=(0,a.buildFetchOptions)("GET",s,"");return e&&(h.headers.Authorization="Bearer "+e),Promise.race([fetch(d,h).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,c.timeoutMs,"Request timed out.")})])},t.writeTournamentRecord2=function(e,t,n,r){var o=this;if(void 0===r&&(r={}),null==t)throw new Error("'tournamentId' is a required parameter but is null or undefined.");if(null==n)throw new Error("'body' is a required parameter but is null or undefined.");var i,s="/v2/tournament/{tournamentId}".replace("{tournamentId}",encodeURIComponent(String(t))),c=new Map;i=JSON.stringify(n||{});var l=this.buildFullUrl(this.basePath,s,c),u=(0,a.buildFetchOptions)("POST",r,i);return e&&(u.headers.Authorization="Bearer "+e),Promise.race([fetch(l,u).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,o.timeoutMs,"Request timed out.")})])},t.writeTournamentRecord=function(e,t,n,r){var o=this;if(void 0===r&&(r={}),null==t)throw new Error("'tournamentId' is a required parameter but is null or undefined.");if(null==n)throw new Error("'body' is a required parameter but is null or undefined.");var i,s="/v2/tournament/{tournamentId}".replace("{tournamentId}",encodeURIComponent(String(t))),c=new Map;i=JSON.stringify(n||{});var l=this.buildFullUrl(this.basePath,s,c),u=(0,a.buildFetchOptions)("PUT",r,i);return e&&(u.headers.Authorization="Bearer "+e),Promise.race([fetch(l,u).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,o.timeoutMs,"Request timed out.")})])},t.joinTournament=function(e,t,n){var r=this;if(void 0===n&&(n={}),null==t)throw new Error("'tournamentId' is a required parameter but is null or undefined.");var o="/v2/tournament/{tournamentId}/join".replace("{tournamentId}",encodeURIComponent(String(t))),i=new Map,s=this.buildFullUrl(this.basePath,o,i),c=(0,a.buildFetchOptions)("POST",n,"");return e&&(c.headers.Authorization="Bearer "+e),Promise.race([fetch(s,c).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,r.timeoutMs,"Request timed out.")})])},t.listTournamentRecordsAroundOwner=function(e,t,n,r,o,i){var s=this;if(void 0===i&&(i={}),null==t)throw new Error("'tournamentId' is a required parameter but is null or undefined.");if(null==n)throw new Error("'ownerId' is a required parameter but is null or undefined.");var c="/v2/tournament/{tournamentId}/owner/{ownerId}".replace("{tournamentId}",encodeURIComponent(String(t))).replace("{ownerId}",encodeURIComponent(String(n))),l=new Map;l.set("limit",r),l.set("expiry",o);var u=this.buildFullUrl(this.basePath,c,l),d=(0,a.buildFetchOptions)("GET",i,"");return e&&(d.headers.Authorization="Bearer "+e),Promise.race([fetch(u,d).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,s.timeoutMs,"Request timed out.")})])},t.getUsers=function(e,t,n,r,o){var i=this;void 0===o&&(o={});var s=new Map;s.set("ids",t),s.set("usernames",n),s.set("facebook_ids",r);var c=this.buildFullUrl(this.basePath,"/v2/user",s),l=(0,a.buildFetchOptions)("GET",o,"");return e&&(l.headers.Authorization="Bearer "+e),Promise.race([fetch(c,l).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,i.timeoutMs,"Request timed out.")})])},t.listUserGroups=function(e,t,n,r,o,i){var s=this;if(void 0===i&&(i={}),null==t)throw new Error("'userId' is a required parameter but is null or undefined.");var c="/v2/user/{userId}/group".replace("{userId}",encodeURIComponent(String(t))),l=new Map;l.set("limit",n),l.set("state",r),l.set("cursor",o);var u=this.buildFullUrl(this.basePath,c,l),d=(0,a.buildFetchOptions)("GET",i,"");return e&&(d.headers.Authorization="Bearer "+e),Promise.race([fetch(u,d).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,s.timeoutMs,"Request timed out.")})])},t.buildFullUrl=function(e,t,n){for(var r,i=e+t+"?",s=function(){var e=r.value,t=e[0],n=e[1];n instanceof Array?i+=n.reduce(function(e,n){return e+encodeURIComponent(t)+"="+encodeURIComponent(n)+"&"},""):null!=n&&(i+=encodeURIComponent(t)+"="+encodeURIComponent(n)+"&")},a=o(n);!(r=a()).done;)s();return i},e}()},650:function(e,t,n){var o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.Client=void 0;var i=n(477),s=n(225),a=n(844),c=n(171);t.Client=function(){function e(e,t,n,r,o,s){void 0===e&&(e="defaultkey"),void 0===t&&(t="127.0.0.1"),void 0===n&&(n="7350"),void 0===r&&(r=!1),void 0===o&&(o=7e3),void 0===s&&(s=!0),this.serverkey=e,this.host=t,this.port=n,this.useSSL=r,this.timeout=o,this.autoRefreshSession=s,this.expiredTimespanMs=3e5;var a=(r?"https://":"http://")+t+":"+n;this.apiClient=new i.NakamaApi(e,a,o)}var t=e.prototype;return t.addGroupUsers=function(e,t,n){return o(this,void 0,void 0,r().mark(function o(){return r().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(r.t0=this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3),!r.t0){r.next=4;break}return r.next=4,this.sessionRefresh(e);case 4:return r.abrupt("return",this.apiClient.addGroupUsers(e.token,t,n).then(function(e){return void 0!==e}));case 5:case"end":return r.stop()}},o,this)}))},t.addFriends=function(e,t,n){return o(this,void 0,void 0,r().mark(function o(){return r().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(r.t0=this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3),!r.t0){r.next=4;break}return r.next=4,this.sessionRefresh(e);case 4:return r.abrupt("return",this.apiClient.addFriends(e.token,t,n).then(function(e){return void 0!==e}));case 5:case"end":return r.stop()}},o,this)}))},t.authenticateApple=function(e,t,n){return o(this,arguments,void 0,function(e,t,n,o,i){var a=this;return void 0===o&&(o={}),void 0===i&&(i={}),r().mark(function c(){var l;return r().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return l={token:e,vars:o},r.abrupt("return",a.apiClient.authenticateApple(a.serverkey,"",l,t,n,i).then(function(e){return new s.Session(e.token||"",e.refresh_token||"",e.created||!1)}));case 2:case"end":return r.stop()}},c)})()})},t.authenticateCustom=function(e,t,n,r,o){void 0===r&&(r={}),void 0===o&&(o={});var i={id:e,vars:r};return this.apiClient.authenticateCustom(this.serverkey,"",i,t,n,o).then(function(e){return new s.Session(e.token||"",e.refresh_token||"",e.created||!1)})},t.authenticateDevice=function(e,t,n,r){var o={id:e,vars:r};return this.apiClient.authenticateDevice(this.serverkey,"",o,t,n).then(function(e){return new s.Session(e.token||"",e.refresh_token||"",e.created||!1)})},t.authenticateEmail=function(e,t,n,r,o){var i={email:e,password:t,vars:o};return this.apiClient.authenticateEmail(this.serverkey,"",i,n,r).then(function(e){return new s.Session(e.token||"",e.refresh_token||"",e.created||!1)})},t.authenticateFacebookInstantGame=function(e,t,n,r,o){void 0===o&&(o={});var i={signed_player_info:e,vars:r};return this.apiClient.authenticateFacebookInstantGame(this.serverkey,"",{signed_player_info:i.signed_player_info,vars:i.vars},t,n,o).then(function(e){return new s.Session(e.token||"",e.refresh_token||"",e.created||!1)})},t.authenticateFacebook=function(e,t,n,r,o,i){void 0===i&&(i={});var a={token:e,vars:o};return this.apiClient.authenticateFacebook(this.serverkey,"",a,t,n,r,i).then(function(e){return new s.Session(e.token||"",e.refresh_token||"",e.created||!1)})},t.authenticateGoogle=function(e,t,n,r,o){void 0===o&&(o={});var i={token:e,vars:r};return this.apiClient.authenticateGoogle(this.serverkey,"",i,t,n,o).then(function(e){return new s.Session(e.token||"",e.refresh_token||"",e.created||!1)})},t.authenticateGameCenter=function(e,t,n,r){var o={token:e,vars:r};return this.apiClient.authenticateGameCenter(this.serverkey,"",o,t,n).then(function(e){return new s.Session(e.token||"",e.refresh_token||"",e.created||!1)})},t.authenticateSteam=function(e,t,n,i,a){return o(this,void 0,void 0,r().mark(function o(){var c;return r().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return c={token:e,vars:a,sync:i},r.abrupt("return",this.apiClient.authenticateSteam(this.serverkey,"",c,t,n).then(function(e){return new s.Session(e.token||"",e.refresh_token||"",e.created||!1)}));case 2:case"end":return r.stop()}},o,this)}))},t.banGroupUsers=function(e,t,n){return o(this,void 0,void 0,r().mark(function o(){return r().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(r.t0=this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3),!r.t0){r.next=4;break}return r.next=4,this.sessionRefresh(e);case 4:return r.abrupt("return",this.apiClient.banGroupUsers(e.token,t,n).then(function(e){return void 0!==e}));case 5:case"end":return r.stop()}},o,this)}))},t.blockFriends=function(e,t,n){return o(this,void 0,void 0,r().mark(function o(){return r().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(r.t0=this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3),!r.t0){r.next=4;break}return r.next=4,this.sessionRefresh(e);case 4:return r.abrupt("return",this.apiClient.blockFriends(e.token,t,n).then(function(e){return Promise.resolve(null!=e)}));case 5:case"end":return r.stop()}},o,this)}))},t.createGroup=function(e,t){return o(this,void 0,void 0,r().mark(function n(){return r().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(n.t0=this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3),!n.t0){n.next=4;break}return n.next=4,this.sessionRefresh(e);case 4:return n.abrupt("return",this.apiClient.createGroup(e.token,t).then(function(e){return Promise.resolve({avatar_url:e.avatar_url,create_time:e.create_time,creator_id:e.creator_id,description:e.description,edge_count:e.edge_count?Number(e.edge_count):0,id:e.id,lang_tag:e.lang_tag,max_count:e.max_count?Number(e.max_count):0,metadata:e.metadata?JSON.parse(e.metadata):void 0,name:e.name,open:e.open,update_time:e.update_time})}));case 5:case"end":return n.stop()}},n,this)}))},t.createSocket=function(e,t,n){return void 0===e&&(e=!1),void 0===t&&(t=!1),void 0===n&&(n=new c.WebSocketAdapterText),new a.DefaultSocket(this.host,this.port,e,t,n)},t.deleteFriends=function(e,t,n){return o(this,void 0,void 0,r().mark(function o(){return r().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(r.t0=this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3),!r.t0){r.next=4;break}return r.next=4,this.sessionRefresh(e);case 4:return r.abrupt("return",this.apiClient.deleteFriends(e.token,t,n).then(function(e){return void 0!==e}));case 5:case"end":return r.stop()}},o,this)}))},t.deleteGroup=function(e,t){return o(this,void 0,void 0,r().mark(function n(){return r().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(n.t0=this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3),!n.t0){n.next=4;break}return n.next=4,this.sessionRefresh(e);case 4:return n.abrupt("return",this.apiClient.deleteGroup(e.token,t).then(function(e){return void 0!==e}));case 5:case"end":return n.stop()}},n,this)}))},t.deleteNotifications=function(e,t){return o(this,void 0,void 0,r().mark(function n(){return r().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(n.t0=this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3),!n.t0){n.next=4;break}return n.next=4,this.sessionRefresh(e);case 4:return n.abrupt("return",this.apiClient.deleteNotifications(e.token,t).then(function(e){return Promise.resolve(null!=e)}));case 5:case"end":return n.stop()}},n,this)}))},t.deleteStorageObjects=function(e,t){return o(this,void 0,void 0,r().mark(function n(){return r().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(n.t0=this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3),!n.t0){n.next=4;break}return n.next=4,this.sessionRefresh(e);case 4:return n.abrupt("return",this.apiClient.deleteStorageObjects(e.token,t).then(function(e){return Promise.resolve(null!=e)}));case 5:case"end":return n.stop()}},n,this)}))},t.demoteGroupUsers=function(e,t,n){return o(this,void 0,void 0,r().mark(function o(){return r().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(r.t0=this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3),!r.t0){r.next=4;break}return r.next=4,this.sessionRefresh(e);case 4:return r.abrupt("return",this.apiClient.demoteGroupUsers(e.token,t,n).then(function(e){return Promise.resolve(null!=e)}));case 5:case"end":return r.stop()}},o,this)}))},t.emitEvent=function(e,t){return o(this,void 0,void 0,r().mark(function n(){return r().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(n.t0=this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3),!n.t0){n.next=4;break}return n.next=4,this.sessionRefresh(e);case 4:return n.abrupt("return",this.apiClient.event(e.token,t).then(function(e){return Promise.resolve(null!=e)}));case 5:case"end":return n.stop()}},n,this)}))},t.getAccount=function(e){return o(this,void 0,void 0,r().mark(function t(){return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3),!t.t0){t.next=4;break}return t.next=4,this.sessionRefresh(e);case 4:return t.abrupt("return",this.apiClient.getAccount(e.token));case 5:case"end":return t.stop()}},t,this)}))},t.importFacebookFriends=function(e,t){return o(this,void 0,void 0,r().mark(function n(){return r().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(n.t0=this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3),!n.t0){n.next=4;break}return n.next=4,this.sessionRefresh(e);case 4:return n.abrupt("return",this.apiClient.importFacebookFriends(e.token,t).then(function(e){return void 0!==e}));case 5:case"end":return n.stop()}},n,this)}))},t.importSteamFriends=function(e,t,n){return o(this,void 0,void 0,r().mark(function o(){return r().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(r.t0=this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3),!r.t0){r.next=4;break}return r.next=4,this.sessionRefresh(e);case 4:return r.abrupt("return",this.apiClient.importSteamFriends(e.token,t,n).then(function(e){return void 0!==e}));case 5:case"end":return r.stop()}},o,this)}))},t.getUsers=function(e,t,n,i){return o(this,void 0,void 0,r().mark(function o(){return r().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(r.t0=this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3),!r.t0){r.next=4;break}return r.next=4,this.sessionRefresh(e);case 4:return r.abrupt("return",this.apiClient.getUsers(e.token,t,n,i).then(function(e){var t={users:[]};return null==e.users||e.users.forEach(function(e){t.users.push({avatar_url:e.avatar_url,create_time:e.create_time,display_name:e.display_name,edge_count:e.edge_count?Number(e.edge_count):0,facebook_id:e.facebook_id,gamecenter_id:e.gamecenter_id,google_id:e.google_id,id:e.id,lang_tag:e.lang_tag,location:e.location,online:e.online,steam_id:e.steam_id,timezone:e.timezone,update_time:e.update_time,username:e.username,metadata:e.metadata?JSON.parse(e.metadata):void 0})}),Promise.resolve(t)}));case 5:case"end":return r.stop()}},o,this)}))},t.joinGroup=function(e,t){return o(this,void 0,void 0,r().mark(function n(){return r().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(n.t0=this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3),!n.t0){n.next=4;break}return n.next=4,this.sessionRefresh(e);case 4:return n.abrupt("return",this.apiClient.joinGroup(e.token,t,{}).then(function(e){return void 0!==e}));case 5:case"end":return n.stop()}},n,this)}))},t.joinTournament=function(e,t){return o(this,void 0,void 0,r().mark(function n(){return r().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(n.t0=this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3),!n.t0){n.next=4;break}return n.next=4,this.sessionRefresh(e);case 4:return n.abrupt("return",this.apiClient.joinTournament(e.token,t,{}).then(function(e){return void 0!==e}));case 5:case"end":return n.stop()}},n,this)}))},t.kickGroupUsers=function(e,t,n){return o(this,void 0,void 0,r().mark(function o(){return r().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(r.t0=this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3),!r.t0){r.next=4;break}return r.next=4,this.sessionRefresh(e);case 4:return r.abrupt("return",this.apiClient.kickGroupUsers(e.token,t,n).then(function(e){return Promise.resolve(null!=e)}));case 5:case"end":return r.stop()}},o,this)}))},t.leaveGroup=function(e,t){return o(this,void 0,void 0,r().mark(function n(){return r().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(n.t0=this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3),!n.t0){n.next=4;break}return n.next=4,this.sessionRefresh(e);case 4:return n.abrupt("return",this.apiClient.leaveGroup(e.token,t,{}).then(function(e){return void 0!==e}));case 5:case"end":return n.stop()}},n,this)}))},t.listChannelMessages=function(e,t,n,i,s){return o(this,void 0,void 0,r().mark(function o(){return r().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(r.t0=this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3),!r.t0){r.next=4;break}return r.next=4,this.sessionRefresh(e);case 4:return r.abrupt("return",this.apiClient.listChannelMessages(e.token,t,n,i,s).then(function(e){var t={messages:[],next_cursor:e.next_cursor,prev_cursor:e.prev_cursor,cacheable_cursor:e.cacheable_cursor};return null==e.messages||e.messages.forEach(function(e){t.messages.push({channel_id:e.channel_id,code:e.code?Number(e.code):0,create_time:e.create_time,message_id:e.message_id,persistent:e.persistent,sender_id:e.sender_id,update_time:e.update_time,username:e.username,content:e.content?JSON.parse(e.content):void 0,group_id:e.group_id,room_name:e.room_name,user_id_one:e.user_id_one,user_id_two:e.user_id_two})}),Promise.resolve(t)}));case 5:case"end":return r.stop()}},o,this)}))},t.listGroupUsers=function(e,t,n,i,s){return o(this,void 0,void 0,r().mark(function o(){return r().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(r.t0=this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3),!r.t0){r.next=4;break}return r.next=4,this.sessionRefresh(e);case 4:return r.abrupt("return",this.apiClient.listGroupUsers(e.token,t,i,n,s).then(function(e){var t={group_users:[],cursor:e.cursor};return null==e.group_users||e.group_users.forEach(function(e){t.group_users.push({user:{avatar_url:e.user.avatar_url,create_time:e.user.create_time,display_name:e.user.display_name,edge_count:e.user.edge_count?Number(e.user.edge_count):0,facebook_id:e.user.facebook_id,gamecenter_id:e.user.gamecenter_id,google_id:e.user.google_id,id:e.user.id,lang_tag:e.user.lang_tag,location:e.user.location,online:e.user.online,steam_id:e.user.steam_id,timezone:e.user.timezone,update_time:e.user.update_time,username:e.user.username,metadata:e.user.metadata?JSON.parse(e.user.metadata):void 0},state:e.state?Number(e.state):0})}),Promise.resolve(t)}));case 5:case"end":return r.stop()}},o,this)}))},t.listUserGroups=function(e,t,n,i,s){return o(this,void 0,void 0,r().mark(function o(){return r().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(r.t0=this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3),!r.t0){r.next=4;break}return r.next=4,this.sessionRefresh(e);case 4:return r.abrupt("return",this.apiClient.listUserGroups(e.token,t,n,i,s).then(function(e){var t={user_groups:[],cursor:e.cursor};return null==e.user_groups||e.user_groups.forEach(function(e){t.user_groups.push({group:{avatar_url:e.group.avatar_url,create_time:e.group.create_time,creator_id:e.group.creator_id,description:e.group.description,edge_count:e.group.edge_count?Number(e.group.edge_count):0,id:e.group.id,lang_tag:e.group.lang_tag,max_count:e.group.max_count,metadata:e.group.metadata?JSON.parse(e.group.metadata):void 0,name:e.group.name,open:e.group.open,update_time:e.group.update_time},state:e.state?Number(e.state):0})}),Promise.resolve(t)}));case 5:case"end":return r.stop()}},o,this)}))},t.listGroups=function(e,t,n,i){return o(this,void 0,void 0,r().mark(function o(){return r().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(r.t0=this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3),!r.t0){r.next=4;break}return r.next=4,this.sessionRefresh(e);case 4:return r.abrupt("return",this.apiClient.listGroups(e.token,t,n,i).then(function(e){var t={groups:[]};return null==e.groups||(t.cursor=e.cursor,e.groups.forEach(function(e){t.groups.push({avatar_url:e.avatar_url,create_time:e.create_time,creator_id:e.creator_id,description:e.description,edge_count:e.edge_count?Number(e.edge_count):0,id:e.id,lang_tag:e.lang_tag,max_count:e.max_count,metadata:e.metadata?JSON.parse(e.metadata):void 0,name:e.name,open:e.open,update_time:e.update_time})})),Promise.resolve(t)}));case 5:case"end":return r.stop()}},o,this)}))},t.linkApple=function(e,t){return o(this,void 0,void 0,r().mark(function n(){return r().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(n.t0=this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3),!n.t0){n.next=4;break}return n.next=4,this.sessionRefresh(e);case 4:return n.abrupt("return",this.apiClient.linkApple(e.token,t).then(function(e){return void 0!==e}));case 5:case"end":return n.stop()}},n,this)}))},t.linkCustom=function(e,t){return o(this,void 0,void 0,r().mark(function n(){return r().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(n.t0=this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3),!n.t0){n.next=4;break}return n.next=4,this.sessionRefresh(e);case 4:return n.abrupt("return",this.apiClient.linkCustom(e.token,t).then(function(e){return void 0!==e}));case 5:case"end":return n.stop()}},n,this)}))},t.linkDevice=function(e,t){return o(this,void 0,void 0,r().mark(function n(){return r().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(n.t0=this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3),!n.t0){n.next=4;break}return n.next=4,this.sessionRefresh(e);case 4:return n.abrupt("return",this.apiClient.linkDevice(e.token,t).then(function(e){return void 0!==e}));case 5:case"end":return n.stop()}},n,this)}))},t.linkEmail=function(e,t){return o(this,void 0,void 0,r().mark(function n(){return r().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(n.t0=this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3),!n.t0){n.next=4;break}return n.next=4,this.sessionRefresh(e);case 4:return n.abrupt("return",this.apiClient.linkEmail(e.token,t).then(function(e){return void 0!==e}));case 5:case"end":return n.stop()}},n,this)}))},t.linkFacebook=function(e,t){return o(this,void 0,void 0,r().mark(function n(){return r().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(n.t0=this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3),!n.t0){n.next=4;break}return n.next=4,this.sessionRefresh(e);case 4:return n.abrupt("return",this.apiClient.linkFacebook(e.token,t).then(function(e){return void 0!==e}));case 5:case"end":return n.stop()}},n,this)}))},t.linkFacebookInstantGame=function(e,t){return o(this,void 0,void 0,r().mark(function n(){return r().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(n.t0=this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3),!n.t0){n.next=4;break}return n.next=4,this.sessionRefresh(e);case 4:return n.abrupt("return",this.apiClient.linkFacebookInstantGame(e.token,t).then(function(e){return void 0!==e}));case 5:case"end":return n.stop()}},n,this)}))},t.linkGoogle=function(e,t){return o(this,void 0,void 0,r().mark(function n(){return r().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(n.t0=this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3),!n.t0){n.next=4;break}return n.next=4,this.sessionRefresh(e);case 4:return n.abrupt("return",this.apiClient.linkGoogle(e.token,t).then(function(e){return void 0!==e}));case 5:case"end":return n.stop()}},n,this)}))},t.linkGameCenter=function(e,t){return o(this,void 0,void 0,r().mark(function n(){return r().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(n.t0=this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3),!n.t0){n.next=4;break}return n.next=4,this.sessionRefresh(e);case 4:return n.abrupt("return",this.apiClient.linkGameCenter(e.token,t).then(function(e){return void 0!==e}));case 5:case"end":return n.stop()}},n,this)}))},t.linkSteam=function(e,t){return o(this,void 0,void 0,r().mark(function n(){return r().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(n.t0=this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3),!n.t0){n.next=4;break}return n.next=4,this.sessionRefresh(e);case 4:return n.abrupt("return",this.apiClient.linkSteam(e.token,t).then(function(e){return void 0!==e}));case 5:case"end":return n.stop()}},n,this)}))},t.listFriends=function(e,t,n,i){return o(this,void 0,void 0,r().mark(function o(){return r().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(r.t0=this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3),!r.t0){r.next=4;break}return r.next=4,this.sessionRefresh(e);case 4:return r.abrupt("return",this.apiClient.listFriends(e.token,n,t,i).then(function(e){var t={friends:[],cursor:e.cursor};return null==e.friends||e.friends.forEach(function(e){t.friends.push({user:{avatar_url:e.user.avatar_url,create_time:e.user.create_time,display_name:e.user.display_name,edge_count:e.user.edge_count?Number(e.user.edge_count):0,facebook_id:e.user.facebook_id,gamecenter_id:e.user.gamecenter_id,google_id:e.user.google_id,id:e.user.id,lang_tag:e.user.lang_tag,location:e.user.location,online:e.user.online,steam_id:e.user.steam_id,timezone:e.user.timezone,update_time:e.user.update_time,username:e.user.username,metadata:e.user.metadata?JSON.parse(e.user.metadata):void 0,facebook_instant_game_id:e.user.facebook_instant_game_id},state:e.state})}),Promise.resolve(t)}));case 5:case"end":return r.stop()}},o,this)}))},t.listLeaderboardRecords=function(e,t,n,i,s,a){return o(this,void 0,void 0,r().mark(function o(){return r().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(r.t0=this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3),!r.t0){r.next=4;break}return r.next=4,this.sessionRefresh(e);case 4:return r.abrupt("return",this.apiClient.listLeaderboardRecords(e.token,t,n,i,s,a).then(function(e){var t={next_cursor:e.next_cursor,prev_cursor:e.prev_cursor,owner_records:[],records:[]};return null!=e.owner_records&&e.owner_records.forEach(function(e){t.owner_records.push({expiry_time:e.expiry_time,leaderboard_id:e.leaderboard_id,metadata:e.metadata?JSON.parse(e.metadata):void 0,num_score:e.num_score?Number(e.num_score):0,owner_id:e.owner_id,rank:e.rank?Number(e.rank):0,score:e.score?Number(e.score):0,subscore:e.subscore?Number(e.subscore):0,update_time:e.update_time,username:e.username,max_num_score:e.max_num_score?Number(e.max_num_score):0})}),null!=e.records&&e.records.forEach(function(e){t.records.push({expiry_time:e.expiry_time,leaderboard_id:e.leaderboard_id,metadata:e.metadata?JSON.parse(e.metadata):void 0,num_score:e.num_score?Number(e.num_score):0,owner_id:e.owner_id,rank:e.rank?Number(e.rank):0,score:e.score?Number(e.score):0,subscore:e.subscore?Number(e.subscore):0,update_time:e.update_time,username:e.username,max_num_score:e.max_num_score?Number(e.max_num_score):0})}),Promise.resolve(t)}));case 5:case"end":return r.stop()}},o,this)}))},t.listLeaderboardRecordsAroundOwner=function(e,t,n,i,s){return o(this,void 0,void 0,r().mark(function o(){return r().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(r.t0=this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3),!r.t0){r.next=4;break}return r.next=4,this.sessionRefresh(e);case 4:return r.abrupt("return",this.apiClient.listLeaderboardRecordsAroundOwner(e.token,t,n,i,s).then(function(e){var t={next_cursor:e.next_cursor,prev_cursor:e.prev_cursor,owner_records:[],records:[]};return null!=e.owner_records&&e.owner_records.forEach(function(e){t.owner_records.push({expiry_time:e.expiry_time,leaderboard_id:e.leaderboard_id,metadata:e.metadata?JSON.parse(e.metadata):void 0,num_score:e.num_score?Number(e.num_score):0,owner_id:e.owner_id,rank:e.rank?Number(e.rank):0,score:e.score?Number(e.score):0,subscore:e.subscore?Number(e.subscore):0,update_time:e.update_time,username:e.username,max_num_score:e.max_num_score?Number(e.max_num_score):0})}),null!=e.records&&e.records.forEach(function(e){t.records.push({expiry_time:e.expiry_time,leaderboard_id:e.leaderboard_id,metadata:e.metadata?JSON.parse(e.metadata):void 0,num_score:e.num_score?Number(e.num_score):0,owner_id:e.owner_id,rank:e.rank?Number(e.rank):0,score:e.score?Number(e.score):0,subscore:e.subscore?Number(e.subscore):0,update_time:e.update_time,username:e.username,max_num_score:e.max_num_score?Number(e.max_num_score):0})}),Promise.resolve(t)}));case 5:case"end":return r.stop()}},o,this)}))},t.listMatches=function(e,t,n,i,s,a,c){return o(this,void 0,void 0,r().mark(function o(){return r().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(r.t0=this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3),!r.t0){r.next=4;break}return r.next=4,this.sessionRefresh(e);case 4:return r.abrupt("return",this.apiClient.listMatches(e.token,t,n,i,s,a,c));case 5:case"end":return r.stop()}},o,this)}))},t.listNotifications=function(e,t,n){return o(this,void 0,void 0,r().mark(function o(){return r().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(r.t0=this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3),!r.t0){r.next=4;break}return r.next=4,this.sessionRefresh(e);case 4:return r.abrupt("return",this.apiClient.listNotifications(e.token,t,n).then(function(e){var t={cacheable_cursor:e.cacheable_cursor,notifications:[]};return null==e.notifications||e.notifications.forEach(function(e){t.notifications.push({code:e.code?Number(e.code):0,create_time:e.create_time,id:e.id,persistent:e.persistent,sender_id:e.sender_id,subject:e.subject,content:e.content?JSON.parse(e.content):void 0})}),Promise.resolve(t)}));case 5:case"end":return r.stop()}},o,this)}))},t.listStorageObjects=function(e,t,n,i,s){return o(this,void 0,void 0,r().mark(function o(){return r().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(r.t0=this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3),!r.t0){r.next=4;break}return r.next=4,this.sessionRefresh(e);case 4:return r.abrupt("return",this.apiClient.listStorageObjects(e.token,t,n,i,s).then(function(e){var t={objects:[],cursor:e.cursor};return null==e.objects||e.objects.forEach(function(e){t.objects.push({collection:e.collection,key:e.key,permission_read:e.permission_read?Number(e.permission_read):0,permission_write:e.permission_write?Number(e.permission_write):0,value:e.value?JSON.parse(e.value):void 0,version:e.version,user_id:e.user_id,create_time:e.create_time,update_time:e.update_time})}),Promise.resolve(t)}));case 5:case"end":return r.stop()}},o,this)}))},t.listTournaments=function(e,t,n,i,s,a,c){return o(this,void 0,void 0,r().mark(function o(){return r().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(r.t0=this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3),!r.t0){r.next=4;break}return r.next=4,this.sessionRefresh(e);case 4:return r.abrupt("return",this.apiClient.listTournaments(e.token,t,n,i,s,a,c).then(function(e){var t={cursor:e.cursor,tournaments:[]};return null!=e.tournaments&&e.tournaments.forEach(function(e){t.tournaments.push({id:e.id,title:e.title,description:e.description,duration:e.duration?Number(e.duration):0,category:e.category?Number(e.category):0,sort_order:e.sort_order?Number(e.sort_order):0,size:e.size?Number(e.size):0,max_size:e.max_size?Number(e.max_size):0,max_num_score:e.max_num_score?Number(e.max_num_score):0,can_enter:e.can_enter,end_active:e.end_active?Number(e.end_active):0,next_reset:e.next_reset?Number(e.next_reset):0,metadata:e.metadata?JSON.parse(e.metadata):void 0,create_time:e.create_time,start_time:e.start_time,end_time:e.end_time,start_active:e.start_active})}),Promise.resolve(t)}));case 5:case"end":return r.stop()}},o,this)}))},t.listTournamentRecords=function(e,t,n,i,s,a){return o(this,void 0,void 0,r().mark(function o(){return r().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(r.t0=this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3),!r.t0){r.next=4;break}return r.next=4,this.sessionRefresh(e);case 4:return r.abrupt("return",this.apiClient.listTournamentRecords(e.token,t,n,i,s,a).then(function(e){var t={next_cursor:e.next_cursor,prev_cursor:e.prev_cursor,owner_records:[],records:[]};return null!=e.owner_records&&e.owner_records.forEach(function(e){t.owner_records.push({expiry_time:e.expiry_time,leaderboard_id:e.leaderboard_id,metadata:e.metadata?JSON.parse(e.metadata):void 0,num_score:e.num_score?Number(e.num_score):0,owner_id:e.owner_id,rank:e.rank?Number(e.rank):0,score:e.score?Number(e.score):0,subscore:e.subscore?Number(e.subscore):0,update_time:e.update_time,username:e.username,max_num_score:e.max_num_score?Number(e.max_num_score):0})}),null!=e.records&&e.records.forEach(function(e){t.records.push({expiry_time:e.expiry_time,leaderboard_id:e.leaderboard_id,metadata:e.metadata?JSON.parse(e.metadata):void 0,num_score:e.num_score?Number(e.num_score):0,owner_id:e.owner_id,rank:e.rank?Number(e.rank):0,score:e.score?Number(e.score):0,subscore:e.subscore?Number(e.subscore):0,update_time:e.update_time,username:e.username,max_num_score:e.max_num_score?Number(e.max_num_score):0})}),Promise.resolve(t)}));case 5:case"end":return r.stop()}},o,this)}))},t.listTournamentRecordsAroundOwner=function(e,t,n,i,s){return o(this,void 0,void 0,r().mark(function o(){return r().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(r.t0=this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3),!r.t0){r.next=4;break}return r.next=4,this.sessionRefresh(e);case 4:return r.abrupt("return",this.apiClient.listTournamentRecordsAroundOwner(e.token,t,n,i,s).then(function(e){var t={next_cursor:e.next_cursor,prev_cursor:e.prev_cursor,owner_records:[],records:[]};return null!=e.owner_records&&e.owner_records.forEach(function(e){t.owner_records.push({expiry_time:e.expiry_time,leaderboard_id:e.leaderboard_id,metadata:e.metadata?JSON.parse(e.metadata):void 0,num_score:e.num_score?Number(e.num_score):0,owner_id:e.owner_id,rank:e.rank?Number(e.rank):0,score:e.score?Number(e.score):0,subscore:e.subscore?Number(e.subscore):0,update_time:e.update_time,username:e.username,max_num_score:e.max_num_score?Number(e.max_num_score):0})}),null!=e.records&&e.records.forEach(function(e){t.records.push({expiry_time:e.expiry_time,leaderboard_id:e.leaderboard_id,metadata:e.metadata?JSON.parse(e.metadata):void 0,num_score:e.num_score?Number(e.num_score):0,owner_id:e.owner_id,rank:e.rank?Number(e.rank):0,score:e.score?Number(e.score):0,subscore:e.subscore?Number(e.subscore):0,update_time:e.update_time,username:e.username,max_num_score:e.max_num_score?Number(e.max_num_score):0})}),Promise.resolve(t)}));case 5:case"end":return r.stop()}},o,this)}))},t.promoteGroupUsers=function(e,t,n){return o(this,void 0,void 0,r().mark(function o(){return r().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(r.t0=this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3),!r.t0){r.next=4;break}return r.next=4,this.sessionRefresh(e);case 4:return r.abrupt("return",this.apiClient.promoteGroupUsers(e.token,t,n));case 5:case"end":return r.stop()}},o,this)}))},t.readStorageObjects=function(e,t){return o(this,void 0,void 0,r().mark(function n(){return r().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(n.t0=this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3),!n.t0){n.next=4;break}return n.next=4,this.sessionRefresh(e);case 4:return n.abrupt("return",this.apiClient.readStorageObjects(e.token,t).then(function(e){var t={objects:[]};return null==e.objects||e.objects.forEach(function(e){t.objects.push({collection:e.collection,key:e.key,permission_read:e.permission_read?Number(e.permission_read):0,permission_write:e.permission_write?Number(e.permission_write):0,value:e.value?JSON.parse(e.value):void 0,version:e.version,user_id:e.user_id,create_time:e.create_time,update_time:e.update_time})}),Promise.resolve(t)}));case 5:case"end":return n.stop()}},n,this)}))},t.rpc=function(e,t,n){return o(this,void 0,void 0,r().mark(function o(){return r().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(r.t0=this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3),!r.t0){r.next=4;break}return r.next=4,this.sessionRefresh(e);case 4:return r.abrupt("return",this.apiClient.rpcFunc(e.token,t,JSON.stringify(n)).then(function(e){return Promise.resolve({id:e.id,payload:e.payload?JSON.parse(e.payload):void 0})}));case 5:case"end":return r.stop()}},o,this)}))},t.rpcHttpKey=function(e,t,n){return o(this,void 0,void 0,r().mark(function o(){return r().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",this.apiClient.rpcFunc2("",t,n&&JSON.stringify(n)||"",e).then(function(e){return Promise.resolve({id:e.id,payload:e.payload?JSON.parse(e.payload):void 0})}).catch(function(e){throw e}));case 1:case"end":return r.stop()}},o,this)}))},t.sessionLogout=function(e,t,n){return o(this,void 0,void 0,r().mark(function o(){return r().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(r.t0=this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3),!r.t0){r.next=4;break}return r.next=4,this.sessionRefresh(e);case 4:return r.abrupt("return",this.apiClient.sessionLogout(e.token,{refresh_token:n,token:t}).then(function(e){return void 0!==e}));case 5:case"end":return r.stop()}},o,this)}))},t.sessionRefresh=function(e){return o(this,arguments,void 0,function(e,t){var n=this;return void 0===t&&(t={}),r().mark(function o(){var i;return r().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(e){r.next=2;break}return r.abrupt("return",(console.error("Cannot refresh a null session."),e));case 2:return e.created&&e.expires_at-e.created_at<70&&console.warn("Session lifetime too short, please set '--session.token_expiry_sec' option. See the documentation for more info: https://heroiclabs.com/docs/nakama/getting-started/configuration/#session"),e.created&&e.refresh_expires_at-e.created_at<3700&&console.warn("Session refresh lifetime too short, please set '--session.refresh_token_expiry_sec' option. See the documentation for more info: https://heroiclabs.com/docs/nakama/getting-started/configuration/#session"),r.next=5,n.apiClient.sessionRefresh(n.serverkey,"",{token:e.refresh_token,vars:t});case 5:return i=r.sent,r.abrupt("return",(e.update(i.token,i.refresh_token),e));case 7:case"end":return r.stop()}},o)})()})},t.unlinkApple=function(e,t){return o(this,void 0,void 0,r().mark(function n(){return r().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(n.t0=this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3),!n.t0){n.next=4;break}return n.next=4,this.sessionRefresh(e);case 4:return n.abrupt("return",this.apiClient.unlinkApple(e.token,t).then(function(e){return void 0!==e}));case 5:case"end":return n.stop()}},n,this)}))},t.unlinkCustom=function(e,t){return o(this,void 0,void 0,r().mark(function n(){return r().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(n.t0=this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3),!n.t0){n.next=4;break}return n.next=4,this.sessionRefresh(e);case 4:return n.abrupt("return",this.apiClient.unlinkCustom(e.token,t).then(function(e){return void 0!==e}));case 5:case"end":return n.stop()}},n,this)}))},t.unlinkDevice=function(e,t){return o(this,void 0,void 0,r().mark(function n(){return r().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(n.t0=this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3),!n.t0){n.next=4;break}return n.next=4,this.sessionRefresh(e);case 4:return n.abrupt("return",this.apiClient.unlinkDevice(e.token,t).then(function(e){return void 0!==e}));case 5:case"end":return n.stop()}},n,this)}))},t.unlinkEmail=function(e,t){return o(this,void 0,void 0,r().mark(function n(){return r().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(n.t0=this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3),!n.t0){n.next=4;break}return n.next=4,this.sessionRefresh(e);case 4:return n.abrupt("return",this.apiClient.unlinkEmail(e.token,t).then(function(e){return void 0!==e}));case 5:case"end":return n.stop()}},n,this)}))},t.unlinkFacebook=function(e,t){return o(this,void 0,void 0,r().mark(function n(){return r().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(n.t0=this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3),!n.t0){n.next=4;break}return n.next=4,this.sessionRefresh(e);case 4:return n.abrupt("return",this.apiClient.unlinkFacebook(e.token,t).then(function(e){return void 0!==e}));case 5:case"end":return n.stop()}},n,this)}))},t.unlinkFacebookInstantGame=function(e,t){return o(this,void 0,void 0,r().mark(function n(){return r().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(n.t0=this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3),!n.t0){n.next=4;break}return n.next=4,this.sessionRefresh(e);case 4:return n.abrupt("return",this.apiClient.unlinkFacebookInstantGame(e.token,t).then(function(e){return void 0!==e}));case 5:case"end":return n.stop()}},n,this)}))},t.unlinkGoogle=function(e,t){return o(this,void 0,void 0,r().mark(function n(){return r().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(n.t0=this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3),!n.t0){n.next=4;break}return n.next=4,this.sessionRefresh(e);case 4:return n.abrupt("return",this.apiClient.unlinkGoogle(e.token,t).then(function(e){return void 0!==e}));case 5:case"end":return n.stop()}},n,this)}))},t.unlinkGameCenter=function(e,t){return o(this,void 0,void 0,r().mark(function n(){return r().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(n.t0=this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3),!n.t0){n.next=4;break}return n.next=4,this.sessionRefresh(e);case 4:return n.abrupt("return",this.apiClient.unlinkGameCenter(e.token,t).then(function(e){return void 0!==e}));case 5:case"end":return n.stop()}},n,this)}))},t.unlinkSteam=function(e,t){return o(this,void 0,void 0,r().mark(function n(){return r().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(n.t0=this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3),!n.t0){n.next=4;break}return n.next=4,this.sessionRefresh(e);case 4:return n.abrupt("return",this.apiClient.unlinkSteam(e.token,t).then(function(e){return void 0!==e}));case 5:case"end":return n.stop()}},n,this)}))},t.updateAccount=function(e,t){return o(this,void 0,void 0,r().mark(function n(){return r().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(n.t0=this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3),!n.t0){n.next=4;break}return n.next=4,this.sessionRefresh(e);case 4:return n.abrupt("return",this.apiClient.updateAccount(e.token,t).then(function(e){return void 0!==e}));case 5:case"end":return n.stop()}},n,this)}))},t.updateGroup=function(e,t,n){return o(this,void 0,void 0,r().mark(function o(){return r().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(r.t0=this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3),!r.t0){r.next=4;break}return r.next=4,this.sessionRefresh(e);case 4:return r.abrupt("return",this.apiClient.updateGroup(e.token,t,n).then(function(e){return void 0!==e}));case 5:case"end":return r.stop()}},o,this)}))},t.validatePurchaseApple=function(e,t){return o(this,void 0,void 0,r().mark(function n(){return r().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(n.t0=this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3),!n.t0){n.next=4;break}return n.next=4,this.sessionRefresh(e);case 4:return n.abrupt("return",this.apiClient.validatePurchaseApple(e.token,{receipt:t}));case 5:case"end":return n.stop()}},n,this)}))},t.validatePurchaseGoogle=function(e,t){return o(this,void 0,void 0,r().mark(function n(){return r().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(n.t0=this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3),!n.t0){n.next=4;break}return n.next=4,this.sessionRefresh(e);case 4:return n.abrupt("return",this.apiClient.validatePurchaseGoogle(e.token,{purchase:t}));case 5:case"end":return n.stop()}},n,this)}))},t.validatePurchaseHuawei=function(e,t,n){return o(this,void 0,void 0,r().mark(function o(){return r().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(r.t0=this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3),!r.t0){r.next=4;break}return r.next=4,this.sessionRefresh(e);case 4:return r.abrupt("return",this.apiClient.validatePurchaseHuawei(e.token,{purchase:t,signature:n}));case 5:case"end":return r.stop()}},o,this)}))},t.writeLeaderboardRecord=function(e,t,n){return o(this,void 0,void 0,r().mark(function o(){return r().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(r.t0=this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3),!r.t0){r.next=4;break}return r.next=4,this.sessionRefresh(e);case 4:return r.abrupt("return",this.apiClient.writeLeaderboardRecord(e.token,t,{metadata:n.metadata?JSON.stringify(n.metadata):void 0,score:n.score,subscore:n.subscore}).then(function(e){return Promise.resolve({expiry_time:e.expiry_time,leaderboard_id:e.leaderboard_id,metadata:e.metadata?JSON.parse(e.metadata):void 0,num_score:e.num_score?Number(e.num_score):0,owner_id:e.owner_id,score:e.score?Number(e.score):0,subscore:e.subscore?Number(e.subscore):0,update_time:e.update_time,username:e.username,max_num_score:e.max_num_score?Number(e.max_num_score):0,rank:e.rank?Number(e.rank):0})}));case 5:case"end":return r.stop()}},o,this)}))},t.writeStorageObjects=function(e,t){return o(this,void 0,void 0,r().mark(function n(){var o;return r().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(n.t0=this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3),!n.t0){n.next=4;break}return n.next=4,this.sessionRefresh(e);case 4:return o={objects:[]},n.abrupt("return",(t.forEach(function(e){o.objects.push({collection:e.collection,key:e.key,permission_read:e.permission_read,permission_write:e.permission_write,value:JSON.stringify(e.value),version:e.version})}),this.apiClient.writeStorageObjects(e.token,o)));case 6:case"end":return n.stop()}},n,this)}))},t.writeTournamentRecord=function(e,t,n){return o(this,void 0,void 0,r().mark(function o(){return r().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",this.apiClient.writeTournamentRecord(e.token,t,{metadata:n.metadata?JSON.stringify(n.metadata):void 0,score:n.score,subscore:n.subscore}).then(function(e){return Promise.resolve({expiry_time:e.expiry_time,leaderboard_id:e.leaderboard_id,metadata:e.metadata?JSON.parse(e.metadata):void 0,num_score:e.num_score?Number(e.num_score):0,owner_id:e.owner_id,score:e.score?Number(e.score):0,subscore:e.subscore?Number(e.subscore):0,update_time:e.update_time,username:e.username,max_num_score:e.max_num_score?Number(e.max_num_score):0,rank:e.rank?Number(e.rank):0})}));case 1:case"end":return r.stop()}},o,this)}))},e}()},57:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.ChannelMessage=void 0,n(624),o(n(650),t),o(n(225),t),o(n(844),t),o(n(171),t);var i=n(650);Object.defineProperty(t,"ChannelMessage",{enumerable:!0,get:function(){return i.ChannelMessage}})},225:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Session=void 0;var r=n(127),o=function(){function e(e,t,n){this.created=n,this.token=e,this.refresh_token=t,this.created_at=Math.floor((new Date).getTime()/1e3),this.update(e,t)}var t=e.prototype;return t.isexpired=function(e){return this.expires_at-e<0},t.isrefreshexpired=function(e){return this.refresh_expires_at-e<0},t.update=function(e,t){var n=e.split(".");if(3!=n.length)throw"jwt is not valid.";var o=JSON.parse(r.atob(n[1])),i=Math.floor(parseInt(o.exp));if(t){var s=t.split(".");if(3!=s.length)throw"refresh jwt is not valid.";var a=JSON.parse(r.atob(s[1])),c=Math.floor(parseInt(a.exp));this.refresh_expires_at=c,this.refresh_token=t}this.token=e,this.expires_at=i,this.username=o.usn,this.user_id=o.uid,this.vars=o.vrs},e.restore=function(t,n){return new e(t,n,!1)},e}();t.Session=o},844:function(e,t,n){var o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultSocket=void 0;var i=n(171);t.DefaultSocket=function(){function e(e,t,n,r,o){void 0===n&&(n=!1),void 0===r&&(r=!1),void 0===o&&(o=new i.WebSocketAdapterText),this.host=e,this.port=t,this.useSSL=n,this.verbose=r,this.adapter=o,this.cIds={},this.nextCid=1}var t=e.prototype;return t.generatecid=function(){var e=this.nextCid.toString();return++this.nextCid,e},t.connect=function(e,t){var n=this;if(void 0===t&&(t=!1),this.adapter.isConnected)return Promise.resolve(e);var r=this.useSSL?"wss://":"ws://";return this.adapter.connect(r,this.host,this.port,t,e.token),this.adapter.onClose=function(e){n.ondisconnect(e)},this.adapter.onError=function(e){n.onerror(e)},this.adapter.onMessage=function(e){if(n.verbose&&window&&window.console&&console.log("Response: %o",JSON.stringify(e)),e.cid){var t=n.cIds[e.cid];if(!t)return void(n.verbose&&window&&window.console&&console.error("No promise executor for message: %o",e));delete n.cIds[e.cid],e.error?t.reject(e.error):t.resolve(e)}else e.notifications?e.notifications.notifications.forEach(function(e){e.content=e.content?JSON.parse(e.content):void 0,n.onnotification(e)}):e.match_data?(e.match_data.op_code=parseInt(e.match_data.op_code),n.onmatchdata(e.match_data)):e.match_presence_event?n.onmatchpresence(e.match_presence_event):e.matchmaker_ticket?n.onmatchmakerticket(e.matchmaker_ticket):e.matchmaker_matched?n.onmatchmakermatched(e.matchmaker_matched):e.status_presence_event?n.onstatuspresence(e.status_presence_event):e.stream_presence_event?n.onstreampresence(e.stream_presence_event):e.stream_data?n.onstreamdata(e.stream_data):e.channel_message?(e.channel_message.content=JSON.parse(e.channel_message.content),n.onchannelmessage(e.channel_message)):e.channel_presence_event?n.onchannelpresence(e.channel_presence_event):e.party_data?(e.party_data.op_code=parseInt(e.party_data.op_code),n.onpartydata(e.party_data)):e.on_party_close?n.onpartyclose():e.party_join_request?n.onpartyjoinrequest(e.party_join_request):e.party_leader?n.onpartyleader(e.party_leader):e.party_matchmaker_ticket?n.onpartymatchmakerticket(e.party_matchmaker_ticket):e.party_presence_event?n.onpartypresence(e.party_presence_event):e.party?n.onparty(e.party):n.verbose&&window&&window.console&&console.log("Unrecognized message received: %o",e)},new Promise(function(t,r){n.adapter.onOpen=function(r){n.verbose&&window&&window.console&&console.log(r),t(e)},n.adapter.onError=function(e){r(e),n.adapter.close()}})},t.disconnect=function(e){void 0===e&&(e=!0),this.adapter.isConnected&&this.adapter.close(),e&&this.ondisconnect({})},t.ondisconnect=function(e){this.verbose&&window&&window.console&&console.log(e)},t.onerror=function(e){this.verbose&&window&&window.console&&console.log(e)},t.onchannelmessage=function(e){this.verbose&&window&&window.console&&console.log(e)},t.onchannelpresence=function(e){this.verbose&&window&&window.console&&console.log(e)},t.onnotification=function(e){this.verbose&&window&&window.console&&console.log(e)},t.onmatchdata=function(e){this.verbose&&window&&window.console&&console.log(e)},t.onmatchpresence=function(e){this.verbose&&window&&window.console&&console.log(e)},t.onmatchmakerticket=function(e){this.verbose&&window&&window.console&&console.log(e)},t.onmatchmakermatched=function(e){this.verbose&&window&&window.console&&console.log(e)},t.onparty=function(e){this.verbose&&window&&window.console&&console.log(e)},t.onpartyclose=function(){this.verbose&&window&&window.console&&console.log("Party closed.")},t.onpartyjoinrequest=function(e){this.verbose&&window&&window.console&&console.log(e)},t.onpartydata=function(e){this.verbose&&window&&window.console&&console.log(e)},t.onpartyleader=function(e){this.verbose&&window&&window.console&&console.log(e)},t.onpartymatchmakerticket=function(e){this.verbose&&window&&window.console&&console.log(e)},t.onpartypresence=function(e){this.verbose&&window&&window.console&&console.log(e)},t.onstatuspresence=function(e){this.verbose&&window&&window.console&&console.log(e)},t.onstreampresence=function(e){this.verbose&&window&&window.console&&console.log(e)},t.onstreamdata=function(e){this.verbose&&window&&window.console&&console.log(e)},t.send=function(e){var t=this,n=e;return new Promise(function(e,r){if(t.adapter.isConnected)if(n.match_data_send)t.adapter.send(n),e();else if(n.party_data_send)t.adapter.send(n),e();else{n.channel_message_send?n.channel_message_send.content=JSON.stringify(n.channel_message_send.content):n.channel_message_update&&(n.channel_message_update.content=JSON.stringify(n.channel_message_update.content));var o=t.generatecid();t.cIds[o]={resolve:e,reject:r},n.cid=o,t.adapter.send(n)}else r("Socket connection has not been established yet.");t.verbose&&window&&window.console&&console.log("Sent message: %o",JSON.stringify(n))})},t.acceptPartyMember=function(e,t){return this.send({party_accept:{party_id:e,presence:t}})},t.addMatchmaker=function(e,t,n,i,s){return o(this,void 0,void 0,r().mark(function o(){return r().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.send({matchmaker_add:{min_count:t,max_count:n,query:e,string_properties:i,numeric_properties:s}});case 2:return r.abrupt("return",r.sent.matchmaker_ticket);case 3:case"end":return r.stop()}},o,this)}))},t.addMatchmakerParty=function(e,t,n,i,s,a){return o(this,void 0,void 0,r().mark(function o(){return r().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.send({party_matchmaker_add:{party_id:e,min_count:n,max_count:i,query:t,string_properties:s,numeric_properties:a}});case 2:return r.abrupt("return",r.sent.party_matchmaker_ticket);case 3:case"end":return r.stop()}},o,this)}))},t.closeParty=function(e){return o(this,void 0,void 0,r().mark(function t(){return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.send({party_close:{party_id:e}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)}))},t.createMatch=function(){return o(this,void 0,void 0,r().mark(function e(){return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.send({match_create:{}});case 2:return e.abrupt("return",e.sent.match);case 3:case"end":return e.stop()}},e,this)}))},t.createParty=function(e,t){return o(this,void 0,void 0,r().mark(function n(){return r().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.send({party_create:{open:e,max_size:t}});case 2:return n.abrupt("return",n.sent.party);case 3:case"end":return n.stop()}},n,this)}))},t.followUsers=function(e){return o(this,void 0,void 0,r().mark(function t(){return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.send({status_follow:{user_ids:e}});case 2:return t.abrupt("return",t.sent.status);case 3:case"end":return t.stop()}},t,this)}))},t.joinChat=function(e,t,n,i){return o(this,void 0,void 0,r().mark(function o(){return r().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.send({channel_join:{target:e,type:t,persistence:n,hidden:i}});case 2:return r.abrupt("return",r.sent.channel);case 3:case"end":return r.stop()}},o,this)}))},t.joinMatch=function(e,t,n){return o(this,void 0,void 0,r().mark(function o(){var i;return r().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return i={match_join:{metadata:n}},t?i.match_join.token=t:i.match_join.match_id=e,r.next=4,this.send(i);case 4:return r.abrupt("return",r.sent.match);case 5:case"end":return r.stop()}},o,this)}))},t.joinParty=function(e){return o(this,void 0,void 0,r().mark(function t(){return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.send({party_join:{party_id:e}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)}))},t.leaveChat=function(e){return this.send({channel_leave:{channel_id:e}})},t.leaveMatch=function(e){return this.send({match_leave:{match_id:e}})},t.leaveParty=function(e){return this.send({party_leave:{party_id:e}})},t.listPartyJoinRequests=function(e){return o(this,void 0,void 0,r().mark(function t(){return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.send({party_join_request_list:{party_id:e}});case 2:return t.abrupt("return",t.sent.party_join_request);case 3:case"end":return t.stop()}},t,this)}))},t.promotePartyMember=function(e,t){return o(this,void 0,void 0,r().mark(function n(){return r().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.send({party_promote:{party_id:e,presence:t}});case 2:return n.abrupt("return",n.sent.party_leader);case 3:case"end":return n.stop()}},n,this)}))},t.removeChatMessage=function(e,t){return o(this,void 0,void 0,r().mark(function n(){return r().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.send({channel_message_remove:{channel_id:e,message_id:t}});case 2:return n.abrupt("return",n.sent.channel_message_ack);case 3:case"end":return n.stop()}},n,this)}))},t.removeMatchmaker=function(e){return this.send({matchmaker_remove:{ticket:e}})},t.removeMatchmakerParty=function(e,t){return this.send({party_matchmaker_remove:{party_id:e,ticket:t}})},t.removePartyMember=function(e,t){return o(this,void 0,void 0,r().mark(function n(){return r().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",this.send({party_remove:{party_id:e,presence:t}}));case 1:case"end":return n.stop()}},n,this)}))},t.rpc=function(e,t,n){return o(this,void 0,void 0,r().mark(function o(){return r().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.send({rpc:{id:e,payload:t,http_key:n}});case 2:return r.abrupt("return",r.sent.rpc);case 3:case"end":return r.stop()}},o,this)}))},t.sendMatchState=function(e,t,n,i,s){return o(this,void 0,void 0,r().mark(function o(){return r().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",this.send({match_data_send:{match_id:e,op_code:t,data:n,presences:null!=i?i:[],reliable:s}}));case 1:case"end":return r.stop()}},o,this)}))},t.sendPartyData=function(e,t,n){return this.send({party_data_send:{party_id:e,op_code:t,data:n}})},t.unfollowUsers=function(e){return this.send({status_unfollow:{user_ids:e}})},t.updateChatMessage=function(e,t,n){return o(this,void 0,void 0,r().mark(function o(){return r().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.send({channel_message_update:{channel_id:e,message_id:t,content:n}});case 2:return r.abrupt("return",r.sent.channel_message_ack);case 3:case"end":return r.stop()}},o,this)}))},t.updateStatus=function(e){return this.send({status_update:{status:e}})},t.writeChatMessage=function(e,t){return o(this,void 0,void 0,r().mark(function n(){return r().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.send({channel_message_send:{channel_id:e,content:t}});case 2:return n.abrupt("return",n.sent.channel_message_ack);case 3:case"end":return n.stop()}},n,this)}))},e}()},48:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.buildFetchOptions=function(e,t,n){var r=Object.assign({method:e},t);r.headers=Object.assign({},t.headers);var o=Object.getOwnPropertyDescriptor(XMLHttpRequest.prototype,"withCredentials");return(null==o?void 0:o.set)||(r.credentials="cocos-ignore"),Object.keys(r.headers).includes("Accept")||(r.headers.Accept="application/json"),Object.keys(r.headers).includes("Content-Type")||(r.headers["Content-Type"]="application/json"),Object.keys(r.headers).forEach(function(e){r.headers[e]||delete r.headers[e]}),n&&(r.body=n),r},t.b64EncodeUnicode=function(e){return(0,r.encode)(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,function(e,t){return String.fromCharCode(Number("0x"+t))}))},t.b64DecodeUnicode=function(e){return decodeURIComponent((0,r.decode)(e).split("").map(function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)}).join(""))};var r=n(127)},171:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.WebSocketAdapterText=void 0;var r=n(257),o=n(127);t.WebSocketAdapterText=function(){function e(){this._isConnected=!1}var t=e.prototype;return t.connect=function(e,t,n,r,o){var i=""+e+t+":"+n+"/ws?lang=en&status="+encodeURIComponent(r.toString())+"&token="+encodeURIComponent(o);this._socket=new WebSocket(i),this._isConnected=!0},t.close=function(){this._isConnected=!1,this._socket.close(),this._socket=void 0},t.send=function(e){if(e.match_data_send){e.match_data_send.op_code=e.match_data_send.op_code.toString();var t=e.match_data_send.data;t&&t instanceof Uint8Array?e.match_data_send.data=r.encode(t.buffer):t&&(e.match_data_send.data=o.btoa(t))}else if(e.party_data_send){e.party_data_send.op_code=e.party_data_send.op_code.toString();var n=e.party_data_send.data;n&&n instanceof Uint8Array?e.party_data_send.data=r.encode(n.buffer):n&&(e.party_data_send.data=o.btoa(n))}this._socket.send(JSON.stringify(e))},c(e,[{key:"onClose",get:function(){return this._socket.onclose},set:function(e){this._socket.onclose=e}},{key:"onError",get:function(){return this._socket.onerror},set:function(e){this._socket.onerror=e}},{key:"onMessage",get:function(){return this._socket.onmessage},set:function(e){e?this._socket.onmessage=function(t){var n=JSON.parse(t.data);n.match_data&&n.match_data.data?n.match_data.data=new Uint8Array(r.decode(n.match_data.data)):n.party_data&&n.party_data.data&&(n.party_data.data=new Uint8Array(r.decode(n.party_data.data))),e(n)}:e=null}},{key:"onOpen",get:function(){return this._socket.onopen},set:function(e){this._socket.onopen=e}},{key:"isConnected",get:function(){return this._isConnected}}]),e}()},624:function(e,t,n){n.r(t),n.d(t,{DOMException:function(){return _},Headers:function(){return u},Request:function(){return v},Response:function(){return w},fetch:function(){return C}});var r="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==r&&r,o={searchParams:"URLSearchParams"in r,iterable:"Symbol"in r&&"iterator"in Symbol,blob:"FileReader"in r&&"Blob"in r&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in r,arrayBuffer:"ArrayBuffer"in r};if(o.arrayBuffer)var i=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],s=ArrayBuffer.isView||function(e){return e&&i.indexOf(Object.prototype.toString.call(e))>-1};function a(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw new TypeError('Invalid character in header field name: "'+e+'"');return e.toLowerCase()}function c(e){return"string"!=typeof e&&(e=String(e)),e}function l(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return o.iterable&&(t[Symbol.iterator]=function(){return t}),t}function u(e){this.map={},e instanceof u?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function d(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function h(e){return new Promise(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function f(e){var t=new FileReader,n=h(t);return t.readAsArrayBuffer(e),n}function p(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function g(){return this.bodyUsed=!1,this._initBody=function(e){var t;this.bodyUsed=this.bodyUsed,this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:o.blob&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:o.formData&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:o.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():o.arrayBuffer&&o.blob&&(t=e)&&DataView.prototype.isPrototypeOf(t)?(this._bodyArrayBuffer=p(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):o.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(e)||s(e))?this._bodyArrayBuffer=p(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):o.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},o.blob&&(this.blob=function(){var e=d(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?d(this)||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer)):this.blob().then(f)}),this.text=function(){var e,t,n,r=d(this);if(r)return r;if(this._bodyBlob)return e=this._bodyBlob,n=h(t=new FileReader),t.readAsText(e),n;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},o.formData&&(this.formData=function(){return this.text().then(b)}),this.json=function(){return this.text().then(JSON.parse)},this}u.prototype.append=function(e,t){e=a(e),t=c(t);var n=this.map[e];this.map[e]=n?n+", "+t:t},u.prototype.delete=function(e){delete this.map[a(e)]},u.prototype.get=function(e){return e=a(e),this.has(e)?this.map[e]:null},u.prototype.has=function(e){return this.map.hasOwnProperty(a(e))},u.prototype.set=function(e,t){this.map[a(e)]=c(t)},u.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},u.prototype.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),l(e)},u.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),l(e)},u.prototype.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),l(e)},o.iterable&&(u.prototype[Symbol.iterator]=u.prototype.entries);var m=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function v(e,t){if(!(this instanceof v))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var n,r,o=(t=t||{}).body;if(e instanceof v){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new u(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,o||null==e._bodyInit||(o=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new u(t.headers)),this.method=(r=(n=t.method||this.method||"GET").toUpperCase(),m.indexOf(r)>-1?r:n),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&o)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(o),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==t.cache&&"no-cache"!==t.cache)){var i=/([?&])_=[^&]*/;i.test(this.url)?this.url=this.url.replace(i,"$1_="+(new Date).getTime()):this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}function b(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),o=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(o))}}),t}function w(e,t){if(!(this instanceof w))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText=void 0===t.statusText?"":""+t.statusText,this.headers=new u(t.headers),this.url=t.url||"",this._initBody(e)}v.prototype.clone=function(){return new v(this,{body:this._bodyInit})},g.call(v.prototype),g.call(w.prototype),w.prototype.clone=function(){return new w(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new u(this.headers),url:this.url})},w.error=function(){var e=new w(null,{status:0,statusText:""});return e.type="error",e};var y=[301,302,303,307,308];w.redirect=function(e,t){if(-1===y.indexOf(t))throw new RangeError("Invalid status code");return new w(null,{status:t,headers:{location:e}})};var _=r.DOMException;try{new _}catch(e){(_=function(e,t){this.message=e,this.name=t;var n=Error(e);this.stack=n.stack}).prototype=Object.create(Error.prototype),_.prototype.constructor=_}function C(e,t){return new Promise(function(n,i){var s=new v(e,t);if(s.signal&&s.signal.aborted)return i(new _("Aborted","AbortError"));var a=new XMLHttpRequest;function l(){a.abort()}a.onload=function(){var e,t,r={status:a.status,statusText:a.statusText,headers:(e=a.getAllResponseHeaders()||"",t=new u,e.replace(/\r?\n[\t ]+/g," ").split("\r").map(function(e){return 0===e.indexOf("\n")?e.substr(1,e.length):e}).forEach(function(e){var n=e.split(":"),r=n.shift().trim();if(r){var o=n.join(":").trim();t.append(r,o)}}),t)};r.url="responseURL"in a?a.responseURL:r.headers.get("X-Request-URL");var o="response"in a?a.response:a.responseText;setTimeout(function(){n(new w(o,r))},0)},a.onerror=function(){setTimeout(function(){i(new TypeError("Network request failed"))},0)},a.ontimeout=function(){setTimeout(function(){i(new TypeError("Network request failed"))},0)},a.onabort=function(){setTimeout(function(){i(new _("Aborted","AbortError"))},0)},a.open(s.method,function(e){try{return""===e&&r.location.href?r.location.href:e}catch(t){return e}}(s.url),!0),"include"===s.credentials?a.withCredentials=!0:"omit"===s.credentials&&(a.withCredentials=!1),"responseType"in a&&(o.blob?a.responseType="blob":o.arrayBuffer&&s.headers.get("Content-Type")&&-1!==s.headers.get("Content-Type").indexOf("application/octet-stream")&&(a.responseType="arraybuffer")),!t||"object"!=typeof t.headers||t.headers instanceof u?s.headers.forEach(function(e,t){a.setRequestHeader(t,e)}):Object.getOwnPropertyNames(t.headers).forEach(function(e){a.setRequestHeader(e,c(t.headers[e]))}),s.signal&&(s.signal.addEventListener("abort",l),a.onreadystatechange=function(){4===a.readyState&&s.signal.removeEventListener("abort",l)}),a.send(void 0===s._bodyInit?null:s._bodyInit)})}C.polyfill=!0,r.fetch||(r.fetch=C,r.Headers=u,r.Request=v,r.Response=w)}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r].call(i.exports,i,i.exports,n),i.exports}return n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n(57)}()},"object"==typeof n&&"object"==typeof t?t.exports=f():"function"==typeof define&&define.amd?define([],f):"object"==typeof n?n.nakama=f():h.nakama=f(),cc._RF.pop()},{}]},{},["AudioController","ChatPresenter","AlertDialog","BackgroundResizer","BaseDialog","Broadcast","CanvasController","ConfigClient","ConfirmDialog","Constants","Dropdown","DropdownItem","GlobalApp","IAPExample","NodeResizer","OneSignalExample","Processing","SPUtils","Toast","User","Utils","BankDialog","BannerDialog","ChatInGameDialog","ExchangeDialog","ExchangeFormInputDialog","FreeChipsDialog","GiftCodeDialog","JackpotDialog","LeaderBoardDialog","MailBoxDialog","OptionDialog","PlayerInfoDialog","ChangeNameDialog","ChangePasswordDialog","ProfileDialog","RegisterDialog","QuickChatDialog","SendGiftDialog","SettingDialog","ShopDialog","GamePresenter","HotNews","LanguageController","LanguageLabel","LanguageSkeleton","LanguageSprite","nakama","CreateTableDialog","EnterPasswordDialog","GameList","GameListItem","LobbyController","TableList","LoginController","HttpClient","NetworkClient","BubbleChat","Card","PlayerCasino"]);