window.__require=function t(i,e,n){function s(a,l){if(!e[a]){if(!i[a]){var r=a.split("/");if(r=r[r.length-1],!i[r]){var h="function"==typeof __require&&__require;if(!l&&h)return h(r,!0);if(o)return o(r,!0);throw new Error("Cannot find module '"+a+"'")}a=r}var c=e[a]={exports:{}};i[a][0].call(c.exports,function(t){return s(i[a][1][t]||t)},c,c.exports,t,i,e,n)}return e[a].exports}for(var o="function"==typeof __require&&__require,a=0;a<n.length;a++)s(n[a]);return s}({IncaConstants:[function(t,i,e){"use strict";cc._RF.push(i,"a86259onjJGYb+C1ZZY/GsA","IncaConstants"),Object.defineProperty(e,"__esModule",{value:!0}),e.SixiangGame=e.Symbol=e.BigWin=e.SPEED_AUTO=e.SPEED_NORMAL=e.RECT_SIZE=e.TIME_RUN_SPIN_AUTO=e.TIME_RUN_SPIN_NORMAL=e.SPRITE_STOP=e.SPRITE_FREESPIN=e.SPRITE_SPIN=e.ZINDEX_LINE=e.ZINDEX_ITEMANIM=void 0,e.ZINDEX_ITEMANIM=30,e.ZINDEX_LINE=10,e.SPRITE_SPIN=0,e.SPRITE_FREESPIN=1,e.SPRITE_STOP=2,e.TIME_RUN_SPIN_NORMAL=2500,e.TIME_RUN_SPIN_AUTO=1800,e.RECT_SIZE=cc.v2(165,129),e.SPEED_NORMAL=.15,e.SPEED_AUTO=.1,e.BigWin={0:0,5:0,10:2,25:1,50:3},e.Symbol={8:0,4:1,2:2,16:3,4608:5,4609:6,4610:7,4611:4,4612:10,4613:9,4614:10,65535:11,512:12},e.SixiangGame={SI_XIANG_GAME_NORMAL:1,SI_XIANG_GAME_INCA_FREE_GAME:301},cc._RF.pop()},{}],IncaController:[function(t,i,e){"use strict";cc._RF.push(i,"0355d+eVLNHR6tfg+TSHyfc","IncaController");var n,s=this&&this.__decorate||function(t,i,e,n){var s,o=arguments.length,a=o<3?i:null===n?n=Object.getOwnPropertyDescriptor(i,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,i,e,n);else for(var l=t.length-1;l>=0;l--)(s=t[l])&&(a=(o<3?s(a):o>3?s(i,e,a):s(i,e))||a);return o>3&&a&&Object.defineProperty(i,e,a),a};Object.defineProperty(e,"__esModule",{value:!0});const o=t("../../lobby/src/common/Constants"),a=t("../../lobby/src/common/Utils"),l=t("../../lobby/src/language/LanguageController"),r=t("../../lobby/src/dialogs/banner/BannerDialog"),h=t("../../lobby/src/common/GlobalApp"),c=t("../../lobby/src/dialogs/shop/ShopDialog"),m=t("../../lobby/src/dialogs/option/OptionDialog"),p=t("../../lobby/src/chat/ChatPresenter"),d=t("./IncaRuleDialog"),u=t("./IncaPresenter"),g=t("./IncaNetworkTransport"),f=t("./IncaItem"),S=t("./IncaItemAnimation"),I=t("./IncaConstants"),{ccclass:_,property:b}=cc._decorator;let A=n=class extends cc.Component{constructor(){super(...arguments),this.itemSlotPr=null,this.itemAnim=null,this.inca_Rule=null,this.listSprBtn=[],this.animMask=null,this.sprAtlas=null,this.blackMask=null,this.parentItemNode=null,this.itemMiniResult=null,this.listItemMiniResult=[],this.bkg_mid=null,this.bkg_Top=null,this.bkg_Bottom=null,this.btn_Spin=null,this.lb_markBet=null,this.lb_ChipWinRound=null,this.lb_Chip=null,this.lb_Result=null,this.lb_info=null,this.lb_titleWin=null,this.lb_freeSpinLeft=null,this.lb_TypeMark=null,this.lb_numLine1=null,this.lb_numLine2=null,this.inca_items=[],this.khungFreeAmin=null,this.vienFreeAmin=null,this.speedSpinAnim=null,this.fiveOfaKindAmin=null,this.freespinAnim=null,this.megaBigWinAnim=null,this.freenumAnim=null,this.listItem=[],this.listOriginItem=[],this.listCheckStopCol=[!1,!1,!1,!1,!1],this.listColor=["#69C4C9","#067048","#25A0F0","#6AF28E","#003CC3","#1DC42C","#6C58B1","#97B158","#0F0098","#6700BE","#920E48","#F277E2","#BC8B15","#AC6456","#E17512","#50A31E","#20E0B5","#EC0F0F","#9AEC0F","#0FEC9A","#6A03FF","#FF037A","#E70337","#0E8CAD","#B2DC7F","#FB2A94","#33F4D7","#9932F4","#FB4D61","#43FB6B","#1DC42C","#6C58B1","#97B158","#0F0098","#6700BE"],this.winningLine=[],this.listWinLineNode=[],this.listItemAnim=[],this.listPosItem=[cc.v2(95,227),cc.v2(280,227),cc.v2(466,227),cc.v2(652,227),cc.v2(834,227)],this.listAnimWS=[],this.listAnimBkgFree=[],this.listIndexSpr=[],this.listLineRect=[],this.listCollum=[],this.listMarkBet=[],this.listScatter=[],this.clickSpinCount=0,this.speedSpin=I.SPEED_NORMAL,this.agPlayer=0,this.markIndex=0,this.winType=0,this.scatterCount=0,this.totalWin=0,this.startNum=0,this.endNum=0,this.deltaNum=0,this.curNum=0,this.timeHoldSpin=0,this.totalAgFSP=0,this.curChip=0,this.curMarkBet=0,this.freeSpinLeft=0,this.idMini=-1,this.posAnimSpeedX=0,this.countWild=0,this.initPosItem=cc.v2(0,0),this.initHeightItem=0,this.resetPosY1=0,this.resetPosY2=0,this.resetPosY3=0,this.isHoldSpin=!1,this.isHaveFiveOfaKind=!1,this.isCheckScatterItem3=!1,this.isAutoSpin=!1,this.isHave2Scatter=!1,this.isStop=!0,this.isShowBigWin=!1,this.isShowHugeWin=!1,this.canSpin=!1,this.isFreeSpin=!1,this.isSpinFree=!1,this.gameStarted=!1,this.mock=!0,this.isWildWinInLine=!1,this.finishData=null,this.finishView=[],this.payLine=[],this.timeShowBigMega=2,this.numPerSec=0,this.firstAnim=null,this.lb_Money=null,this.animBtnSpin=null,this.blackMaskBig=null,this.lbFreeAnim=null}static getInstance(){return this.instance}start(){n.instance=this,g.default.subscribe(),p.default.getInstance().joinChatRoom(h.default.getInstance().matchInfo.match_id,this),this.bkg_mid.opacity=0,this.bkg_Bottom.opacity=0,this.bkg_Top.opacity=0,this.initPosItem=cc.v2(this.parentItemNode.width/10,this.parentItemNode.height/2),this.animBtnSpin=this.btn_Spin.node.getChildByName("ItemAnimation").getComponent(S.default),this.blackMaskBig=this.node.getChildByName("bkg_black"),this.node.on("touchstart",t=>{this.btn_Spin.node.getBoundingBoxToWorld().contains(t.getLocation())&&(this.timeHoldSpin=0,this.isHoldSpin=!0)}),this.node.on("touchend",t=>{this.isHoldSpin&&(this.btn_Spin.node.getBoundingBoxToWorld().contains(t.getLocation())&&(this.isHoldSpin=!1,this.timeHoldSpin<1&&this.onClickSpin()),this.timeHoldSpin=0)}),r.default.show(o.Game.Enum.INCA)}update(t){this.isHoldSpin&&(this.timeHoldSpin+=t,this.timeHoldSpin>=1&&this.isStop&&(this.onClickAutoSpin(),this.setStateSpinBtn(),this.isHoldSpin=!1,this.timeHoldSpin=0))}startEffect(){this.bkg_Top.stopAllActions(),this.bkg_Bottom.stopAllActions(),this.bkg_mid.stopAllActions(),this.bkg_Top.runAction(cc.sequence(cc.fadeTo(.5,255),cc.delayTime(1.5))),this.bkg_Bottom.runAction(cc.sequence(cc.fadeTo(.5,255),cc.delayTime(1.5))),this.bkg_mid.runAction(cc.sequence(cc.fadeTo(.5,255),cc.delayTime(1.5),cc.callFunc(()=>{this.canSpin=!0})))}handleCTable(t){var i,e,n,s,o,l,r,h;t.slotViews=[];for(let a=0;a<t.matrix.cols;a++){let i=[];for(let e=0;e<t.matrix.lists.length;e++)if(e%t.matrix.cols===a){let n=I.Symbol[t.matrix.lists[e]];void 0===I.Symbol[t.matrix.lists[e]]&&console.log("Symbol[data.matrix.lists[i]]",I.Symbol[t.matrix.lists[e]],t.matrix.lists[e]),i.push(n)}t.slotViews.push(i)}if(this.gameStarted)this.handleSpin(Object.assign(Object.assign({},t),{currentChipBonus:Number(t.gameReward.perlGreenForestChipsCollect),freeSpinLeft:Number(t.numSpinLeft)>=0||Number(null===(i=null==t?void 0:t.gameConfig)||void 0===i?void 0:i.numFreeSpin)?Number(t.numSpinLeft)>0?Number(t.numSpinLeft):Number(null===(e=null==t?void 0:t.gameConfig)||void 0===e?void 0:e.numFreeSpin):0,freeSpin:t.currentSixiangGame===I.SixiangGame.SI_XIANG_GAME_INCA_FREE_GAME,isFreeSpin:t.nextSixiangGame===I.SixiangGame.SI_XIANG_GAME_INCA_FREE_GAME,winType:I.BigWin[t.bigWin],agWin:I.BigWin[t.bigWin]>0?t.gameReward.totalChipsWinByGame:0,chipBonusFullExp:t.gameReward.updateChipsBonus?t.gameReward.perlGreenForestChips:0,jpGrandPlayer:Number(null===(s=null===(n=t.winJpHistory)||void 0===n?void 0:n.grand)||void 0===s?void 0:s.chipsAccum),jpMajorPlayer:Number(null===(l=null===(o=t.winJpHistory)||void 0===o?void 0:o.major)||void 0===l?void 0:l.chipsAccum)}));else{t.currentChipBonus=Number(t.gameReward.perlGreenForestChipsCollect),t.freeSpinLeft=Number(t.numSpinLeft)>=0||Number(null===(r=null==t?void 0:t.gameConfig)||void 0===r?void 0:r.numFreeSpin)?Number(t.numSpinLeft)>0?Number(t.numSpinLeft):Number(null===(h=null==t?void 0:t.gameConfig)||void 0===h?void 0:h.numFreeSpin):0,t.freeSpin=t.currentSixiangGame===I.SixiangGame.SI_XIANG_GAME_INCA_FREE_GAME,t.isFreeSpin=t.nextSixiangGame===I.SixiangGame.SI_XIANG_GAME_INCA_FREE_GAME,t.views=[];for(let i=0;i<t.matrix.cols;i++){let e=[];for(let n=0;n<t.matrix.lists.length;n++)if(n%t.matrix.cols===i){let i=I.Symbol[t.matrix.lists[n]];void 0===I.Symbol[t.matrix.lists[n]]&&console.log("Symbol[data.matrix.lists[i]]",I.Symbol[t.matrix.lists[n]],t.matrix.lists[n]),e.push(i)}t.views.push(e)}this.finishData=t,this.scheduleOnce(()=>{this.initItemSlot(t.views)},.5),this.payLine=[[1,1,1,1,1],[0,0,0,0,0],[2,2,2,2,2],[0,1,2,1,0],[2,1,0,1,2],[1,0,0,0,1],[1,2,2,2,1],[0,0,1,2,2],[2,2,1,0,0],[1,2,1,0,1],[1,0,1,2,1],[0,1,0,1,0],[2,1,2,1,2],[0,1,1,1,0],[2,1,1,1,2],[1,1,0,1,1],[1,1,2,1,1],[0,0,2,0,0],[2,2,0,2,2],[0,2,2,2,0]],this.lb_numLine1.string=this.payLine.length.toString(),this.lb_numLine2.string=this.payLine.length.toString(),this.listMarkBet=[],this.isFreeSpin=Number(t.numSpinLeft)>0,this.freeSpinLeft=t.freeSpinLeft,this.freeSpinLeft>0&&0===this.listAnimBkgFree.length&&this.showAnimBkgFreeSpin(),this.setStateSpinBtn(),this.lb_ChipWinRound.string=t.gameReward.totalChipsWinByGame,this.agPlayer=Number(t.gameReward.balanceChipsWalletAfter),this.listMarkBet=t.betLevels,this.curMarkBet=Number(t.chipsMcb);for(let i=0;i<t.betLevels.length;i++)if(Number(t.betLevels[i])===Number(t.chipsMcb)){this.markIndex=i;break}this.lb_markBet.string=a.default.formatNumber(this.curMarkBet),this.lb_Chip.string=a.default.formatNumber(this.agPlayer),this.gameStarted=!0}}setTimeout(t,i){setTimeout(()=>{null!=this.node&&t.call(this)},i)}getCurMarkBet(t){for(let i=0;i<this.listMarkBet.length;i++)if(0===t){let t=this.listMarkBet[i];t<=this.agPlayer/20?(this.curMarkBet=t,this.markIndex=i,i===this.listMarkBet.length-1&&(this.lb_TypeMark.string=l.default.getInstance().getString("shan2_maxbet"))):this.listMarkBet[0]>this.agPlayer/20&&(this.curMarkBet=this.listMarkBet[0],this.markIndex=0)}else this.listMarkBet.includes(t)?(this.curMarkBet=t,this.markIndex=this.listMarkBet.indexOf(t)):this.listMarkBet.length>0&&(this.markIndex=this.listMarkBet.length-1,this.curMarkBet=this.listMarkBet[this.markIndex]);(this.listMarkBet.length<1||this.listMarkBet[0]>this.agPlayer)&&(this.markIndex=0,this.curMarkBet=this.listMarkBet[0])}initItemSlot(t){let i=0;this.listCollum=[];for(let e=0;e<this.listItem.length;e++)this.listItem[e].destroy();this.listItem=[];for(let e=0;e<15;e++){let n=cc.instantiate(this.itemSlotPr).getComponent(f.default),s=cc.instantiate(this.itemSlotPr).getComponent(f.default),o=cc.instantiate(this.itemSlotPr).getComponent(f.default);if(this.initHeightItem=n.node.height,n.node.position=cc.v3(this.listPosItem[i].x,this.initPosItem.y,0),this.parentItemNode.addChild(n.node),n.typeItem=1,n.numCol=i,n.setSpriteListItem(t[i]),this.resetPosY1=this.initPosItem.y,3===i){let t=this.parentItemNode.convertToWorldSpaceAR(n.node.position);this.posAnimSpeedX=this.bkg_mid.convertToNodeSpaceAR(t).x}s.node.position=cc.v3(n.node.x,n.node.position.y+n.node.height,0),this.parentItemNode.addChild(s.node),s.typeItem=2,s.numCol=i,s.setSpriteListItem(t[i]),this.resetPosY2=s.node.position.y,o.node.position=cc.v3(n.node.x,s.node.position.y+s.node.height,0),this.parentItemNode.addChild(o.node),o.typeItem=3,o.numCol=i,o.setSpriteListItem(t[i]),this.resetPosY3=o.node.position.y;let a=[];a.push(n.node,s.node,o.node),this.listCollum.push(a),this.listItem.push(n.node,s.node,o.node),i++,e+=2}this.startEffect(),this.initItemAnim()}initItemAnim(){for(let t=0;t<5;t++){let t=cc.instantiate(this.itemAnim).getComponent(S.default);this.node.addChild(t.node,I.ZINDEX_ITEMANIM),t.node.active=!1,this.listItemAnim.push(t)}this.firstAnim=cc.instantiate(this.itemAnim).getComponent(S.default),this.node.addChild(this.firstAnim.node,I.ZINDEX_ITEMANIM),this.firstAnim.node.active=!1,this.firstAnim.animation.skeletonData=null}onClickSpin(t,i){if((this.canSpin||this.isAutoSpin)&&!(this.clickSpinCount>1)){if(this.agPlayer<this.listMarkBet[0]&&!this.isFreeSpin)return this.lb_info.string=l.default.getInstance().getString("not_enought_gold"),void h.default.getInstance().alertDialog.showMessage(l.default.getInstance().getString("txt_not_enough_money_gl"));if(this.lb_titleWin.string=this.isFreeSpin?l.default.getInstance().getString("txt_total_win"):l.default.getInstance().getString("txt_last_win"),this.isStop||!this.isFreeSpin){if(this.clickSpinCount>0)return this.isAutoSpin=!1,this.setStateSpinBtn(),void(this.isStop&&this.resetForNextSpin());if(0===this.listMarkBet.length&&!this.isFreeSpin)return this.lb_info.string=l.default.getInstance().getString("not_enought_gold"),void h.default.getInstance().alertDialog.showMessage(l.default.getInstance().getString("txt_not_enough_money_gl"));this.isSpinFree=this.isFreeSpin,this.playSoundEff("clickspin"),this.isFreeSpin?this.freeSpinLeft>0&&(0===this.listAnimBkgFree.length?this.showAnimBkgFreeSpin():this.lbFreeAnim.string=this.freeSpinLeft-1+" Sisa Putaran Gratis"):(this.curChip=this.agPlayer,a.default.runNumber(this.lb_Chip,this.curChip-this.curMarkBet,1),this.agPlayer-=this.curMarkBet,this.curChip=this.agPlayer),this.clickSpinCount++,g.default.sendSpin({chips:this.curMarkBet,req_spec_game:this.mock?I.SixiangGame.SI_XIANG_GAME_INCA_FREE_GAME:0}),this.mock=!1,this.isStop=!1,this.setStateSpinBtn(),this.blackMask.active=!1;for(let t=0;t<this.listCheckStopCol.length;t++)this.listCheckStopCol[t]=!1;this.lb_info.node.active=!0,this.lb_info.string=l.default.getInstance().getString("txt_playing_lines").replace("%d","20"),this.playSoundEff("wheelspin"),this.listCollum.forEach((t,i)=>{t.forEach(t=>{let e=t.getComponent(f.default);cc.Tween.stopAllByTarget(t);var n=()=>{if(e.typeItem--,this.listCheckStopCol[i]||e.numCol!=i){if(this.listCheckStopCol[i]&&e.numCol==i){let n=0;e.typeItem<0&&(t.y=this.resetPosY2,e.typeItem=2,e.setSpriteListItem(this.finishView[i],!1),this.listOriginItem.push(t)),0==e.typeItem&&(t.y=this.resetPosY3,e.typeItem=3),this.isAutoSpin,2==i&&this.isCheckScatterItem3&&(this.speedSpin=I.SPEED_AUTO,n=1,this.firstAnim&&this.firstAnim.node&&(this.setInfoAnim(this.firstAnim,this.speedSpinAnim,cc.v3(this.posAnimSpeedX,20,0),1),this.firstAnim.node.parent=this.bkg_mid,this.firstAnim.node.zIndex=this.parentItemNode.zIndex+1,this.firstAnim.playAnimation2("animation",!0))),e.setSpriteListItem(e.listIdView,!1),cc.tween(t).to(.2,{y:t.y-this.initHeightItem},{easing:cc.easing.backOut}).delay(this.isCheckScatterItem3?n:0).call(()=>{this.listCheckStopCol[i+1]=!0,this.playSoundEff("stopspin"),this.canSpin=!1}).call(()=>{4==i&&2==e.typeItem&&(this.getOriginItem(),this.winningLine.forEach(t=>{this.initLineWin(t.lineWin,t.color)}),this.checkWildWinInLine(),this.acShowWinLine(),this.freeSpinLeft>0&&(0===this.listAnimBkgFree.length?this.showAnimBkgFreeSpin():this.lbFreeAnim.string=this.freeSpinLeft+" Sisa Putaran Gratis")),e.typeItem--,3==i&&this.isCheckScatterItem3&&(this.firstAnim.node.active=!1,this.firstAnim.animation.skeletonData=null),this.isAutoSpin||(this.listCheckStopCol[i+1]=!0)}).start()}}else{e.typeItem<0&&(t.y=this.resetPosY2,e.typeItem=2,this.isCheckScatterItem3&&e.numCol>2&&e.setRandomId(!1));let s=this.speedSpin;4==i&&!this.isAutoSpin&&this.isCheckScatterItem3&&(s=I.SPEED_NORMAL),cc.tween(t).to(s,{y:t.y-this.initHeightItem}).call(n).start()}};cc.tween(t).call(()=>{e.setSpriteListItem(e.listIdView,!0)}).to(this.speedSpin,{y:t.y-this.initHeightItem}).call(n).start()})})}}}setStateSpinBtn(t=null){let i;switch(this.isStop?i=this.isFreeSpin?"freespinOn":"spinOn":(i=this.isAutoSpin?"autoSpin":"spinOff",i=this.isFreeSpin?"freespinOff":i),null!==t&&(i=t),i){case"spinOn":this.animBtnSpin.playAnimation2("spinHoldforAuto_cam",!0);break;case"spinOff":this.animBtnSpin.node.active=!1,this.btn_Spin.getComponent(cc.Sprite).spriteFrame=this.listSprBtn[I.SPRITE_SPIN];break;case"freespinOn":this.animBtnSpin.node.active=!0,this.animBtnSpin.playAnimation2("freespin_cam",!0),this.btn_Spin.interactable=!0;break;case"freespinOff":this.animBtnSpin.node.active=!1,this.btn_Spin.getComponent(cc.Sprite).spriteFrame=this.listSprBtn[I.SPRITE_FREESPIN];break;case"autoSpin":this.animBtnSpin.node.active=!1,this.btn_Spin.getComponent(cc.Sprite).spriteFrame=this.listSprBtn[I.SPRITE_STOP]}}onClickAutoSpin(){this.isAutoSpin=!this.isAutoSpin,this.setStateSpinBtn(),this.isStop&&(this.speedSpin=I.SPEED_AUTO,this.onClickSpin())}handleSpin(t){if(this.finishData=t,this.finishData.isFinishGame||Number(this.curMarkBet)===Number(t.chipsMcb)){this.finishView=t.slotViews,this.isCheckScatterItem3=!1,this.finishView[1].includes(12)&&this.finishView[2].includes(12)&&(this.isCheckScatterItem3=!0),this.getLineWin(t),this.setTimeout(()=>{this.node&&this.onStopSpin()},500),t.freeSpin&&(this.lb_ChipWinRound.string=a.default.formatNumber(Number(t.gameReward.totalChipsWinByGame))),this.totalAgFSP=t.gameReward.totalChipsWinByGame,this.totalWin=t.gameReward.totalChipsWinByGame,this.agPlayer=Number(t.gameReward.balanceChipsWalletAfter),this.winType=t.winType,this.freeSpinLeft=t.freeSpinLeft,this.isFreeSpin=0!==t.freeSpinLeft,this.listMarkBet=t.betLevels,this.curMarkBet=Number(t.chipsMcb);for(let i=0;i<t.betLevels.length;i++)if(Number(t.betLevels[i])===Number(t.chipsMcb)){this.markIndex=i;break}this.freeSpinLeft<=0&&(this.lb_markBet.string=a.default.formatNumber(this.curMarkBet),this.isSpinFree=!1)}}onClickBack(){m.default.show(this,m.DialogPosition.LEFT)}showAnimScatter(){this.playSoundEff("wildscatter");for(let t=0;t<this.listScatter.length;t++){let i=this.listScatter[t],e=this.getAnimFromPool(this.listAnimWS);e&&e.node&&(this.setInfoAnim(e,this.inca_items[12],cc.v3(i.pos.x,i.pos.y,0),.8),this.node.addChild(e.node),e.playAnimation2("animation",!0))}}setInfoAnim(t,i,e,n,s=!1){t&&t.node&&(t.node.active=!0,t.node.zIndex=I.ZINDEX_ITEMANIM,"number"==typeof n?t.animation.node.setScale(n):t.animation.node.setScale(n.x,n.y),e instanceof cc.Vec3?t.node.position=e:t.node.position=cc.v3(e.x,e.y,0),t.initAnimation(i),t.node.getChildByName("lb_Money").active=s)}showAnimOneWinLine(){if(this.blackMaskBig.active=!1,this.btn_Spin.interactable=!this.isAutoSpin,0===this.listWinLineNode.length||this.isAutoSpin&&this.listWinLineNode.length>1)return this.canSpin=!0,this.setStateSpinBtn(),this.firstAnim.node.active=!1,this.firstAnim.animation.skeletonData=null,this.firstAnim.node.getChildByName("lb_Money").active=!1,void this.resetForNextSpin();if(this.isAutoSpin?this.canSpin=!0:this.setTimeout(()=>{this.node&&(this.canSpin=!0,this.setStateSpinBtn())},300),this.firstAnim.node.active=!1,this.firstAnim.animation.skeletonData=null,this.firstAnim.node.getChildByName("lb_Money").active=!1,2===this.clickSpinCount)return;let t=this.listWinLineNode.length,i=cc.callFunc(()=>{(this.isAutoSpin||this.finishData.freeSpin&&0!==this.finishData.freeSpinLeft)&&this.resetForNextSpin()});for(let e=0;e<t;e++)this.node.runAction(cc.sequence(cc.delayTime(1.5*e),cc.callFunc(()=>{for(let e=0;e<this.listWinLineNode.length;e++)this.listWinLineNode[e].node.active=!1;this.playSoundEff("showline"),this.turnOffAnim(),this.turnOffMiniResult();for(let e=0;e<this.listIndexSpr.length;e++)this.listOriginItem[e].getComponent(f.default).setStateSpr(this.listIndexSpr[e],!0);this.listIndexSpr=[];for(let e=0;e<this.listLineRect.length;e++)this.listLineRect[e].active=!1;let t=this.winningLine[e].lineWin,i=[],n=[];for(let e=0;e<t.length;e++){let s=this.listOriginItem[e].getComponent(f.default),o=t[e],a=s.getWordPosItem(s.listItem[o]);n.push(a);let l=s.listIdView[o];i.push(l)}this.idMini=-1,this.showListAnim(n,i,this.winningLine[e].color,this.winningLine[e].pays,t)}),cc.delayTime(1.07),i))}showAllWinLine(){if(this.updateMoney(),this.blackMaskBig.active=!1,0!==this.listWinLineNode.length&&(this.blackMask.active=!0),this.firstAnim.node.active=!1,this.firstAnim.animation.skeletonData=null,this.listWinLineNode.length>1)for(let t=0;t<this.listWinLineNode.length;t++)this.node.runAction(cc.sequence(cc.delayTime(I.SPEED_NORMAL*t),cc.callFunc(()=>{this.listWinLineNode[t].node.active=!0})));this.turnOffAnim(),this.turnOffMiniResult(),this.isStop=!0}showAnim5OfAkind(){this.blackMaskBig.active=!0,this.firstAnim.node.active=!0,this.firstAnim.animation.skeletonData=null,this.setInfoAnim(this.firstAnim,this.fiveOfaKindAmin,cc.v3(0,0,0),1),this.firstAnim.node.parent=this.node,this.firstAnim.playAnimation2("animation",!0)}showAnimFreeSpin(){this.playSoundEff("freespin"),this.blackMaskBig.active=!0,this.turnOffAnim(),this.firstAnim.node.active=!1,this.firstAnim.animation.skeletonData=null,this.setInfoAnim(this.firstAnim,this.freespinAnim,cc.v3(0,0,0),.5),this.firstAnim.node.parent=this.node,this.firstAnim.playAnimation2("cam",!0)}showAnimAllWild(){this.playSoundEff("wildscatter");let t=[];for(let i=0;i<this.winningLine.length;i++){let e={lineWinId:[],lineWin:[]},n=this.winningLine[i].lineWinId;n.includes(11)&&(e.lineWinId=n,e.lineWin=this.winningLine[i].lineWin),t.push(e)}for(let i=0;i<t.length;i++){let e=t[i],n=this.checkIndexToShowAnim(e.lineWinId);for(let t=0;t<=n;t++){let i=this.listOriginItem[t].getComponent(f.default);if(11===e.lineWinId[t]){let n=i.getWordPosItem(i.listItem[e.lineWin[t]]),s=this.getAnimFromPool(this.listAnimWS);if(!s||!s.node)return;this.setInfoAnim(s,this.inca_items[11],n,.8),this.node.addChild(s.node,I.ZINDEX_ITEMANIM),s.playAnimation2("animation",!0)}}}}showAnimBigWin(){this.playSoundEff("bigwin"),this.blackMaskBig.active=!0,this.firstAnim.node.active=!1,this.firstAnim.animation.skeletonData=null,this.setInfoAnim(this.firstAnim,this.megaBigWinAnim,cc.v3(0,0,0),1),this.firstAnim.node.parent=this.node,this.firstAnim.playAnimation2("bigwin_cam",!0);let t=this.firstAnim.node.getChildByName("lb_Money");t.active=!0,t.opacity=255,t.scale=.8,this.lb_Money=t.getComponent(cc.Label),this.lb_Money.node.position=cc.v3(0,-100,0),this.createEffNumRun(t.getComponent(cc.Label),0,Number(this.finishData.gameReward.totalChipsWinByGame),this.timeShowBigMega-1),t.runAction(cc.sequence(cc.scaleTo(this.timeShowBigMega-1,1.2),cc.scaleTo(.5,1).easing(cc.easeBackOut()),cc.delayTime(.1),cc.scaleTo(.1,0)))}showAnimHugeWin(){this.playSoundEff("megawin"),this.blackMaskBig.active=!0,this.firstAnim.playAnimation2("megawin_cam",!0)}showAnimBkgFreeSpin(t){let i=this.bkg_mid.getChildByName("bg_spin").zIndex-1,e=this.getAnimFromPool(this.listAnimBkgFree);if(e&&e.node){this.setInfoAnim(e,this.khungFreeAmin,cc.v3(0,130,0),1),e.node.parent=this.bkg_mid,e.node.zIndex=i,e.playAnimation2("animation",!0);let n=this.getAnimFromPool(this.listAnimBkgFree);n&&n.node&&(this.setInfoAnim(n,this.vienFreeAmin,cc.v3(0,130,0),1),n.node.parent=this.bkg_mid,n.node.zIndex=i+1,n.playAnimation2("animation",!0),this.lbFreeAnim=n.node.getChildByName("lb_Money").getComponent(cc.Label),this.lbFreeAnim.string=(t||this.freeSpinLeft)+" Sisa Putaran Gratis"),this.showAnimFreeNum()}}showAnimFreeNum(){let t=this.parentItemNode.zIndex+1,i=this.getAnimFromPool(this.listAnimBkgFree);i&&i.node&&(this.setInfoAnim(i,this.freenumAnim,cc.v3(0,-30,0),1),i.node.parent=this.bkg_mid,i.node.zIndex=t,i.playAnimation2("animation",!0))}onStopSpin(){this.listOriginItem=[],this.listCheckStopCol[0]=!0}getOriginItem(){this.listScatter=[];for(let t=0;t<this.listItem.length;t++){let i=this.listItem[t].getComponent(f.default);if(i&&2===i.typeItem&&(this.listOriginItem.push(this.listItem[t]),12===i.listIdView[1])){this.scatterCount++;let i=this.parentItemNode.convertToWorldSpaceAR(this.listItem[t].position),e=this.node.convertToNodeSpaceAR(i);this.listScatter.push({pos:e,node:this.listItem[t]})}}this.isHave2Scatter=this.scatterCount>1}initLineWin(t,i){let e=[];for(let n=0;n<t.length;n++){let i=this.listOriginItem[n].getComponent(f.default),s=i.getWordPosItem(i.listItem[t[n]]);e.push(s)}this.drawLine(e,i)}getLineWin(t){t.paylines.forEach(i=>{let e={lineWin:[],lineWinId:[],color:null,pays:null},n=i.indices.map(i=>I.Symbol[t.matrix.lists[i]]);e.lineWin=i.indices.map(t=>Math.floor(t/5)),e.color=this.listColor[this.getRanNum(0,this.listColor.length-1)],e.pays=Number(i.chips),e.lineWinId=n,this.winningLine.push(e)}),this.checkFiveOfaKind()}acShowWinLine(){if(!this.isFreeSpin&&(this.totalAgFSP>20*this.curMarkBet&&(this.isShowBigWin=!0),this.totalAgFSP>50*this.curMarkBet&&(this.isShowHugeWin=!0),this.finishData.freeSpin)){for(let t=0;t<this.listAnimBkgFree.length;t++)this.listAnimBkgFree[t].node.destroy();this.listAnimBkgFree=[]}!this.isFreeSpin&&this.finishData.freeSpin&&(this.totalWin=this.totalAgFSP),this.finishData.freeSpin?this.lb_ChipWinRound.string=a.default.formatNumber(this.totalAgFSP):this.lb_ChipWinRound.string=a.default.formatNumber(this.totalWin),0===this.finishData.agWin||this.finishData.freeSpin||(this.lb_titleWin.string=l.default.getInstance().getString("txt_win")),this.finishData.freeSpin&&(this.lb_titleWin.string=l.default.getInstance().getString("txt_total_win"));let t=0,i=0,e=1.5*this.listWinLineNode.length,n=0,s=0,o=0,r=0;this.listWinLineNode.length>1&&(r=this.listWinLineNode.length*I.SPEED_NORMAL+.7),this.isHaveFiveOfaKind&&(s=2),(this.isWildWinInLine||this.isHave2Scatter)&&(o=1.3);let h=[100,101,102];this.finishData.currentSixiangGame!==I.SixiangGame.SI_XIANG_GAME_INCA_FREE_GAME&&this.finishData.nextSixiangGame===I.SixiangGame.SI_XIANG_GAME_INCA_FREE_GAME&&(n=2),((h=[1,101,102]).includes(this.winType)&&!this.finishData.freeSpin||this.isShowBigWin)&&(t=3),((h=[2,102]).includes(this.winType)&&!this.finishData.freeSpin||this.isShowHugeWin)&&(t=2.7,i=3),this.timeShowBigMega=t+i;let c=cc.callFunc(()=>{this.showAllWinLine()}),m=cc.callFunc(()=>{this.node.runAction(cc.repeatForever(cc.sequence(cc.callFunc(()=>{this.showAnimOneWinLine()}),cc.delayTime(e))))}),p=cc.callFunc(()=>{this.isHave2Scatter&&this.showAnimScatter()}),d=cc.callFunc(()=>{this.isHaveFiveOfaKind&&this.showAnim5OfAkind()}),u=cc.callFunc(()=>{this.finishData.currentSixiangGame!==I.SixiangGame.SI_XIANG_GAME_INCA_FREE_GAME&&this.finishData.nextSixiangGame===I.SixiangGame.SI_XIANG_GAME_INCA_FREE_GAME&&this.showAnimFreeSpin()}),g=cc.callFunc(()=>{this.isWildWinInLine&&this.showAnimAllWild()}),f=cc.callFunc(()=>{([1,2,101,102].includes(this.winType)&&!this.finishData.freeSpin||this.isShowBigWin)&&this.showAnimBigWin()}),S=cc.callFunc(()=>{([2,102].includes(this.winType)&&!this.finishData.freeSpin||this.isShowHugeWin)&&this.showAnimHugeWin()}),_=cc.sequence(p,g,cc.delayTime(o),c,cc.delayTime(r),u,cc.delayTime(n),d,cc.delayTime(s),f,cc.delayTime(t),S,cc.delayTime(i),m);this.node.runAction(_),this.lb_info.node.active=!1}drawLine(t,i){let e=this.createLine(i);e.moveTo(t[0].x-90,t[0].y),e.lineTo(t[0].x,t[0].y);let n=t.length;for(let s=1;s<n;s++)e.lineJoin=cc.Graphics.LineJoin.ROUND,e.lineTo(t[s].x,t[s].y);e.lineTo(t[n-1].x+90,t[n-1].y),e.stroke(),e.node.active=!1,this.listWinLineNode.push(e)}drawLineLast(t,i){let e=this.createLine(i),n=this.getCrossPoint(t[0],t[1]);e.moveTo(n.x,n.y);let s=t.length;for(let o=1;o<s;o++)e.lineJoin=cc.Graphics.LineJoin.ROUND,e.lineTo(t[o].x,t[o].y);e.lineTo(t[s-1].x+90,t[s-1].y),e.stroke(),this.listLineRect.push(e.node)}createLine(t,i=!1,e=5){let n=(new cc.Node).addComponent(cc.Graphics);return n.lineWidth=e,n.lineCap=cc.Graphics.LineCap.ROUND,n.strokeColor=(new cc.Color).fromHEX(t),n.node.active=!0,this.node.addChild(n.node,I.ZINDEX_LINE),i&&(n.node.zIndex=I.ZINDEX_ITEMANIM+1),n}showListAnim(t,i,e,n,s){let o=this.checkIndexToShowAnim(i);for(let a=0;a<=o;a++){this.showItemAnim(a,t[a],i[a],n),this.turnOffItemSpr(a,s[a]);let l=t[a],r=!1;if(o<4&&a===o&&(r=!0),a+1<=o&&(t[a].y>t[a+1].y+290||t[a].y<t[a+1].y-290)){let i=this.getCrossPoint(t[a],t[a+1]),n=this.getCrossPoint(t[a+1],t[a]),s=this.createLine(e);s.moveTo(i.x,i.y),s.lineTo(n.x,n.y),s.stroke(),this.listLineRect.push(s.node)}this.drawRect(l,e,r,o,t)}}checkIndexToShowAnim(t){let i=0,e=t[0];for(let n=1;n<t.length;n++)if(11!==e){if(t[n]!==e&&11!==t[n])break;i++}else e=t[n],i++;return i}showItemAnim(t,i,e,n){this.setItemMiniResult(e,t,n);let s,o=this.listItemAnim[t],a=1;if(e<4)switch(a=.9,e){case 0:s="A_animation";break;case 1:s="K_animation";break;case 2:s="Q_animation";break;case 3:s="J_animation";break;default:s="A_animation"}else if(e>3&&e<8)switch(a=.8,e){case 4:s="ngua_animation";break;case 5:s="chim_animation";break;case 6:s="bichtep_animation";break;case 7:s="zo_animation";break;default:s="ngua_animation"}else switch(e){case 8:a=.9,s="nam_animation";break;case 9:a=.9,s="nu_animation";break;case 10:a=.9,s="vang_animation";break;case 11:a=.8,s="wildcard_animation";break;case 12:a=.8,s="scatter_animation";break;default:s="A_animation"}this.setInfoAnim(o,this.inca_items[e],i,a),o.node.parent=this.node,o.animation.node.scale=a,o.playAnimation2(s,!0)}setItemMiniResult(t,i,e){if(11!==t){this.idMini=t;for(let e=0;e<i;e++)this.listItemMiniResult[e].node.getComponent(cc.Sprite).spriteFrame=this.sprAtlas.getSpriteFrame(t.toString())}11===t&&-1!==this.idMini&&(t=this.idMini),this.listItemMiniResult[i].node.active=!0,this.listItemMiniResult[i].node.getComponent(cc.Sprite).spriteFrame=this.sprAtlas.getSpriteFrame(t.toString()),this.lb_Result.string=l.default.getInstance().getString("txt_pays_chip").replace("%s",a.default.formatMoney(e)),this.itemMiniResult.active=!0}turnOffMiniResult(){for(let t=0;t<this.listItemMiniResult.length;t++)this.listItemMiniResult[t].node.active=!1}getCrossPoint(t,i){let e=t.y>i.y?-1:1,n=cc.v2(t.x-I.RECT_SIZE.x,t.y+I.RECT_SIZE.y/2*e),s=cc.v2(n.x+I.RECT_SIZE.x,n.y);return Math.abs(t.y-i.y)<1&&(n=cc.v2(t.x+I.RECT_SIZE.x/2,t.y+I.RECT_SIZE.y/2),s=cc.v2(t.x+I.RECT_SIZE.x/2,t.y-I.RECT_SIZE.y/2)),a.default.pIntersectPoint(n,s,t,i)}turnOffItemSpr(t,i){this.listIndexSpr.push(i),this.listOriginItem[t].getComponent(f.default).setStateSpr(i,!1)}turnOffAnim(){for(let t=0;t<this.listAnimWS.length;t++)this.listAnimWS[t].node.destroy();this.listAnimWS=[];for(let t=0;t<this.listItemAnim.length;t++)this.listItemAnim[t].node.active=!1,this.listItemAnim[t].animation.skeletonData=null}checkFiveOfaKind(){this.isHaveFiveOfaKind=!1;let t=0;for(let i=0;i<this.winningLine.length;i++){let e=[],n=this.winningLine[i].lineWin;for(let t=0;t<n.length;t++)e.push(this.finishView[t][n[t]]);if(4===(t=this.checkIndexToShowAnim(e)))return void(this.isHaveFiveOfaKind=!0)}}checkWildWinInLine(){this.isWildWinInLine=!1,this.countWild=0;for(let t=0;t<this.winningLine.length;t++){let i=this.winningLine[t].lineWinId;for(let t=0;t<i.length;t++)11===i[t]&&(this.countWild++,this.isWildWinInLine=!0)}this.countWild>=3&&(this.isWildWinInLine=!0)}drawRect(t,i,e,n,s){let o=this.createLine(i,!0,5),a=cc.v2(t.x-I.RECT_SIZE.x/2,t.y-I.RECT_SIZE.y/2);if(o.moveTo(a.x,a.y),o.rect(a.x,a.y,I.RECT_SIZE.x,I.RECT_SIZE.y),this.listLineRect.push(o.node),o.stroke(),e){let t=s.slice(n,5);t&&t.length>=2&&this.drawLineLast(t,i)}}resetForNextSpin(){for(let t=0;t<this.listIndexSpr.length;t++)this.listOriginItem[t].getComponent(f.default).setStateSpr(this.listIndexSpr[t],!0);this.listIndexSpr=[],this.node.stopAllActions(),this.canSpin=!0,this.blackMask.active=!1;for(let t=0;t<this.listWinLineNode.length;t++)this.listWinLineNode[t].node.destroy();this.turnOffAnim();for(let t=0;t<this.listLineRect.length;t++)this.listLineRect[t].destroy();this.listLineRect=[],this.listWinLineNode=[],this.winningLine=[],this.clickSpinCount=0,this.scatterCount=0,this.isShowBigWin=!1,this.isShowHugeWin=!1,this.blackMaskBig.active=!1,this.isFreeSpin||(this.totalAgFSP=0),this.finishData.freeSpin||this.isAutoSpin?this.speedSpin=I.SPEED_AUTO:this.speedSpin=I.SPEED_NORMAL,this.setStateSpinBtn(),this.agPlayer<this.curMarkBet&&!this.isFreeSpin&&(this.lb_info.string=l.default.getInstance().getString("not_enought_gold"),h.default.getInstance().alertDialog.showMessage(l.default.getInstance().getString("txt_not_enough_money_gl"))),this.itemMiniResult.active=!1,this.lb_info.node.active=!0,this.agPlayer<this.curMarkBet&&!this.isFreeSpin&&(this.lb_info.string=l.default.getInstance().getString("not_enought_gold"),h.default.getInstance().alertDialog.showMessage(l.default.getInstance().getString("txt_not_enough_money_gl"))),this.agPlayer>=this.listMarkBet[0]||this.isFreeSpin?(this.parentItemNode.getComponent(cc.Button).interactable=!0,this.lb_info.string=this.isAutoSpin?"Playing 20 lines. Good luck!":l.default.getInstance().getString("txt_press_spin_to_play")):(this.parentItemNode.getComponent(cc.Button).interactable=!1,this.btn_Spin.interactable=!1,this.btn_Spin.interactable=!1,this.lb_info.string=l.default.getInstance().getString("not_enought_gold"),h.default.getInstance().alertDialog.showMessage(l.default.getInstance().getString("txt_not_enough_money_gl"))),(this.isAutoSpin||this.isSpinFree)&&this.onClickSpin()}onClickPlusMarkBet(){!this.isStop||this.isFreeSpin||this.markIndex<0||this.isAutoSpin||(this.markIndex<this.listMarkBet.filter(t=>t<=this.agPlayer/20).length-1?(this.markIndex++,this.markIndex===this.listMarkBet.length-1&&(this.lb_TypeMark.string=l.default.getInstance().getString("shan2_maxbet"))):(this.markIndex=0,this.lb_TypeMark.string=l.default.getInstance().getString("txt_pok_to")),this.curMarkBet=this.listMarkBet[this.markIndex],this.lb_markBet.string=a.default.formatMoney(this.curMarkBet),u.default.updateBet(this.curMarkBet))}onClickMinusMarkBet(){if(!(!this.isStop||this.isFreeSpin||this.markIndex<0||this.isAutoSpin)){if(this.markIndex>0)this.markIndex--,this.lb_TypeMark.string=l.default.getInstance().getString("txt_pok_to");else{let t=this.listMarkBet.filter(t=>t<=this.agPlayer/20).sort((t,i)=>t-i).pop();this.markIndex=this.listMarkBet.indexOf(t),this.lb_TypeMark.string=l.default.getInstance().getString("shan2_maxbet")}this.curMarkBet=this.listMarkBet[this.markIndex],this.lb_markBet.string=a.default.formatMoney(this.curMarkBet),u.default.updateBet(this.curMarkBet)}}onClickMaxBet(){if(this.agPlayer<this.listMarkBet[0]&&!this.isFreeSpin)return;if(!this.isStop||this.isFreeSpin||this.markIndex<0||this.isAutoSpin)return;this.lb_TypeMark.string=l.default.getInstance().getString("shan2_maxbet");let t=this.listMarkBet.filter(t=>t<=this.agPlayer/20).sort((t,i)=>t-i).pop();this.markIndex=this.listMarkBet.indexOf(t),this.curMarkBet=this.listMarkBet[this.markIndex],this.lb_markBet.string=a.default.formatNumber(this.curMarkBet),u.default.updateBet(this.curMarkBet)}getRanNum(t,i){let e=Math.random()*(i-t)+t;return Math.floor(e)}createEffNumRun(t,i,e,n){t.node.active=!0,this.endNum=e,this.deltaNum=this.endNum-this.startNum,this.numPerSec=this.deltaNum/n,this.curNum=i,this.effRunNumber(n,t,this.curNum,this.endNum,this.numPerSec)}effRunNumber(t,i,e,n,s){let o=s/20;if(o<0&&(o=1),e>=n)return void(i.string=a.default.formatMoney(n));this.curNum+=o,i.string=a.default.formatMoney(this.curNum);let l=cc.sequence(cc.delayTime(.05),cc.callFunc(()=>{this.effRunNumber(t,i,this.curNum,n,s)}));i.node.runAction(l)}updateMoney(){0!==this.finishData.freeSpinLeft&&1==this.finishData.freeSpin||(this.curChip===this.agPlayer?this.lb_Chip.string=a.default.formatNumber(this.agPlayer):a.default.runNumber(this.lb_Chip,this.agPlayer,.8),0!==this.finishData.agWin&&(this.lb_titleWin.string=l.default.getInstance().getString("txt_win")),this.lb_ChipWinRound.string=a.default.formatNumber(this.totalWin))}onClickShop(){this.isStop&&c.default.show()}getAnimFromPool(t){let i=cc.instantiate(this.itemAnim).getComponent(S.default);return t.push(i),i}playSoundEff(t){}stopSoundEff(){}onClickRule(){d.default.show(this.node)}onQuit(){r.BannerData.setBannerData(o.Banner.ShowType.LEFT_MATCH,!0,o.Game.Enum.INCA),g.default.onQuit()}};A.instance=null,s([b(cc.Prefab)],A.prototype,"itemSlotPr",void 0),s([b(cc.Prefab)],A.prototype,"itemAnim",void 0),s([b(cc.Prefab)],A.prototype,"inca_Rule",void 0),s([b([cc.SpriteFrame])],A.prototype,"listSprBtn",void 0),s([b(cc.SpriteFrame)],A.prototype,"animMask",void 0),s([b(cc.SpriteAtlas)],A.prototype,"sprAtlas",void 0),s([b(cc.Node)],A.prototype,"blackMask",void 0),s([b(cc.Node)],A.prototype,"parentItemNode",void 0),s([b(cc.Node)],A.prototype,"itemMiniResult",void 0),s([b([cc.Sprite])],A.prototype,"listItemMiniResult",void 0),s([b(cc.Node)],A.prototype,"bkg_mid",void 0),s([b(cc.Node)],A.prototype,"bkg_Top",void 0),s([b(cc.Node)],A.prototype,"bkg_Bottom",void 0),s([b(cc.Button)],A.prototype,"btn_Spin",void 0),s([b(cc.Label)],A.prototype,"lb_markBet",void 0),s([b(cc.Label)],A.prototype,"lb_ChipWinRound",void 0),s([b(cc.Label)],A.prototype,"lb_Chip",void 0),s([b(cc.Label)],A.prototype,"lb_Result",void 0),s([b(cc.Label)],A.prototype,"lb_info",void 0),s([b(cc.Label)],A.prototype,"lb_titleWin",void 0),s([b(cc.Label)],A.prototype,"lb_freeSpinLeft",void 0),s([b(cc.Label)],A.prototype,"lb_TypeMark",void 0),s([b(cc.Label)],A.prototype,"lb_numLine1",void 0),s([b(cc.Label)],A.prototype,"lb_numLine2",void 0),s([b([sp.SkeletonData])],A.prototype,"inca_items",void 0),s([b(sp.SkeletonData)],A.prototype,"khungFreeAmin",void 0),s([b(sp.SkeletonData)],A.prototype,"vienFreeAmin",void 0),s([b(sp.SkeletonData)],A.prototype,"speedSpinAnim",void 0),s([b(sp.SkeletonData)],A.prototype,"fiveOfaKindAmin",void 0),s([b(sp.SkeletonData)],A.prototype,"freespinAnim",void 0),s([b(sp.SkeletonData)],A.prototype,"megaBigWinAnim",void 0),s([b(sp.SkeletonData)],A.prototype,"freenumAnim",void 0),A=n=s([_],A),e.default=A,cc._RF.pop()},{"../../lobby/src/chat/ChatPresenter":void 0,"../../lobby/src/common/Constants":void 0,"../../lobby/src/common/GlobalApp":void 0,"../../lobby/src/common/Utils":void 0,"../../lobby/src/dialogs/banner/BannerDialog":void 0,"../../lobby/src/dialogs/option/OptionDialog":void 0,"../../lobby/src/dialogs/shop/ShopDialog":void 0,"../../lobby/src/language/LanguageController":void 0,"./IncaConstants":"IncaConstants","./IncaItem":"IncaItem","./IncaItemAnimation":"IncaItemAnimation","./IncaNetworkTransport":"IncaNetworkTransport","./IncaPresenter":"IncaPresenter","./IncaRuleDialog":"IncaRuleDialog"}],IncaItemAnimation:[function(t,i,e){"use strict";cc._RF.push(i,"a8f7dLhS1xniavAEjRWeJ3v","IncaItemAnimation");var n=this&&this.__decorate||function(t,i,e,n){var s,o=arguments.length,a=o<3?i:null===n?n=Object.getOwnPropertyDescriptor(i,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,i,e,n);else for(var l=t.length-1;l>=0;l--)(s=t[l])&&(a=(o<3?s(a):o>3?s(i,e,a):s(i,e))||a);return o>3&&a&&Object.defineProperty(i,e,a),a};Object.defineProperty(e,"__esModule",{value:!0});const{ccclass:s,property:o}=cc._decorator;let a=class extends cc.Component{constructor(){super(...arguments),this.animation=null}initAnimation(t){this.animation.skeletonData=t,this.animation.premultipliedAlpha=!1,this.animation.animation="animation"}playAnimation(t="animation",i=!1,e=!0,n=!1){this.animation.node.active=!0,this.animation.paused=!1,this.animation.setAnimation(0,t,i),n||this.animation.node.runAction(cc.sequence(cc.delayTime(3.5),cc.removeSelf()))}playAnimation2(t="animation",i=!1){this.animation.node.active=!0,this.animation.paused=!1,this.animation.setAnimation(0,t,i)}playAnimBinh(t="animation",i=!1){this.animation.node.opacity=255,this.animation.setAnimation(0,t,i)}setMultiAlpha(t){this.animation.premultipliedAlpha=t}stopAnimation(){this.animation.node.active=!1,this.animation.paused=!0}};n([o(sp.Skeleton)],a.prototype,"animation",void 0),a=n([s],a),e.default=a,cc._RF.pop()},{}],IncaItem:[function(t,i,e){"use strict";cc._RF.push(i,"b49ceIbbLNHerhDSaxbpomu","IncaItem");var n=this&&this.__decorate||function(t,i,e,n){var s,o=arguments.length,a=o<3?i:null===n?n=Object.getOwnPropertyDescriptor(i,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,i,e,n);else for(var l=t.length-1;l>=0;l--)(s=t[l])&&(a=(o<3?s(a):o>3?s(i,e,a):s(i,e))||a);return o>3&&a&&Object.defineProperty(i,e,a),a};Object.defineProperty(e,"__esModule",{value:!0});const s=t("./IncaConstants"),o=t("./IncaController"),{ccclass:a,property:l}=cc._decorator;let r=class extends cc.Component{constructor(){super(...arguments),this.sprAtlas=null,this.sprBlur=null,this.listItem=[],this.itemBlur=[],this.itemMain=[],this.numCol=null,this.typeItem=null,this.listIdView=[]}start(){for(let t=0;t<this.listItem.length;t++)this.listItem[t].setContentSize(cc.size(125,126));for(let t=0;t<this.itemMain.length;t++)this.itemMain[t].setContentSize(cc.size(150,145))}getRanNum(t,i){let e=Math.random()*(i-t)+t;return Math.floor(e)}setRandomId(t){let i=[this.getRanNum(0,13),this.getRanNum(0,13),this.getRanNum(0,13)];this.setSpriteListItem(i,t)}setSpriteListItem(t,i=!1){for(let e=0;e<this.listItem.length;e++){let n=t[e];this.setSprSonItem(e,n,i),this.listItem[e].setContentSize(cc.size(180,140))}this.listIdView=t.slice()}setSprSonItem(t,i,e){let n=this.itemBlur[t],s=this.itemMain[t];n.getComponent(cc.Sprite).spriteFrame=this.sprBlur.getSpriteFrame(i.toString()),s.getComponent(cc.Sprite).spriteFrame=this.sprAtlas.getSpriteFrame(i.toString())}getWordPosItemList(){let t=[];for(let i=0;i<this.listItem.length;i++){let e=this.getWordPosItem(this.listItem[i]);t.push(e)}return t}getWordPosItem(t){let i=this.node.convertToWorldSpaceAR(t.position);return o.default.getInstance().node.convertToNodeSpaceAR(i)}getScatterItem(){let t={id:null,pos:null};for(let i=0;i<this.listIdView.length;i++){let e=this.listIdView[i];e===s.Symbol[512]&&(t.pos=this.getWordPosItem(this.listItem[i]),t.id=e,o.default.getInstance().scatterCount++,o.default.getInstance().listScatter.push(t))}}getItemWithId(t){let i=[];for(let e=0;e<this.listIdView.length;e++)this.listIdView[e]===t&&i.push(this.listItem[e]);return i}setStateSpr(t,i){this.itemMain[t].active=i}};n([l(cc.SpriteAtlas)],r.prototype,"sprAtlas",void 0),n([l(cc.SpriteAtlas)],r.prototype,"sprBlur",void 0),n([l([cc.Node])],r.prototype,"listItem",void 0),n([l([cc.Node])],r.prototype,"itemBlur",void 0),n([l([cc.Node])],r.prototype,"itemMain",void 0),r=n([a],r),e.default=r,cc._RF.pop()},{"./IncaConstants":"IncaConstants","./IncaController":"IncaController"}],IncaNetworkTransport:[function(t,i,e){"use strict";cc._RF.push(i,"b8b068bVmlE7Y4XMYeigvaE","IncaNetworkTransport"),Object.defineProperty(e,"__esModule",{value:!0});const n=t("../../lobby/src/common/Constants"),s=t("../../lobby/src/network/NetworkClient"),o=t("../../lobby/src/common/ConfigClient"),a=t("../../lobby/src/common/GlobalApp"),l=t("../../lobby/src/chat/ChatPresenter"),r=t("./IncaController"),h=t("../../lobby/src/lobby/GameList");class c{static subscribe(){s.default.getInstance().subscribeEventHandler(n.Game.Enum.INCA,this)}static matchDataHandler(t){switch(t.op_code){case o.default.Network.OP_CODE.OPCODE_UPDATE_TABLE:cc.log("OPCODE_UPDATE_TABLE",t.data),r.default.getInstance().handleCTable(t.data);break;case o.default.Network.OP_CODE.OPCODE_UPDATE_DEAL:cc.log("OPCODE_UPDATE_DEAL",t.data);break;case o.default.Network.OP_CODE.OPCODE_UPDATE_GAME_STATE:c.processUpdateGameState(t);break;case o.default.Network.OP_CODE.OPCODE_UPDATE_FINISH:cc.log("result",t);break;case o.default.Network.OP_CODE.OPCODE_UPDATE_WALLET:cc.log("wallet",t);break;case o.default.Network.OP_CODE.OPCODE_KICK_OFF_THE_TABLE:cc.log("kick off",t),c.onQuit();break;default:cc.log("Data code not found ",t)}}static processUpdateGameState(t){switch(t.data.state){case n.Game.GAME_STATE.PREPARE:break;case n.Game.GAME_STATE.RUN:cc.log("GAME_STATE.RUN",t);break;case n.Game.GAME_STATE.REWARD:cc.log("GAME_STATE.REWARD",t);break;case n.Game.GAME_STATE.FINISH:cc.log("GAME_STATE.FINISH",t);break;default:cc.log("Match state not found ",t)}}static sendSpin(t){s.default.getInstance().sendMatchState(a.default.getInstance().matchInfo.match_id,o.default.Network.OP_CODE_REQUEST.OPCODE_REQUEST_SPIN,t).then(t=>{cc.log("sendSpin success ",t)},t=>{cc.log("sendSpin err",t)})}static onQuit(t=(()=>{})){s.default.getInstance().leaveMatch(a.default.getInstance().matchInfo.match_id).then(i=>{cc.log("leave match: ",i),l.default.getInstance().leaveChat(),cc.sys.isBrowser&&o.default.AppInfo.WEB_NATIVE?(t(),window.location.href="/"):a.default.getInstance().loadSceneByMainBundle(o.default.AppInfo.SCENE_NAME.GAMELIST,()=>{var i;t(),null===(i=h.default.getInstance())||void 0===i||i.setGameType(n.GameType.Enum.SLOT_GAME),r.default.getInstance().node.destroy()})},t=>{cc.log("err when leave match",t)})}}e.default=c,cc._RF.pop()},{"../../lobby/src/chat/ChatPresenter":void 0,"../../lobby/src/common/ConfigClient":void 0,"../../lobby/src/common/Constants":void 0,"../../lobby/src/common/GlobalApp":void 0,"../../lobby/src/lobby/GameList":void 0,"../../lobby/src/network/NetworkClient":void 0,"./IncaController":"IncaController"}],IncaPresenter:[function(t,i,e){"use strict";cc._RF.push(i,"daa89DxsG5BwoE5n42q9ThB","IncaPresenter"),Object.defineProperty(e,"__esModule",{value:!0});const n=t("../../lobby/src/network/NetworkClient"),s=t("../../lobby/src/common/ConfigClient"),o=t("../../lobby/src/common/GlobalApp");e.default=class{static getMatchResult(){n.default.getInstance().sendMatchState(o.default.getInstance().matchInfo.match_id,s.default.Network.OP_CODE_REQUEST.OPCODE_REQUEST_INFO_TABLE,{}).then(()=>{cc.log("getMatchResult success ")},t=>{cc.log("getMatchResult err",t)})}static updateBet(t){n.default.getInstance().sendMatchState(o.default.getInstance().matchInfo.match_id,s.default.Network.OP_CODE_REQUEST.OPCODE_BET,{chips:t}).then(()=>{cc.log("updateBet success ",t)},t=>{cc.log("updateBet err",t)})}},cc._RF.pop()},{"../../lobby/src/common/ConfigClient":void 0,"../../lobby/src/common/GlobalApp":void 0,"../../lobby/src/network/NetworkClient":void 0}],IncaRuleDialog:[function(t,i,e){"use strict";cc._RF.push(i,"cff80/b6thBmKVfucEW809F","IncaRuleDialog");var n,s=this&&this.__decorate||function(t,i,e,n){var s,o=arguments.length,a=o<3?i:null===n?n=Object.getOwnPropertyDescriptor(i,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,i,e,n);else for(var l=t.length-1;l>=0;l--)(s=t[l])&&(a=(o<3?s(a):o>3?s(i,e,a):s(i,e))||a);return o>3&&a&&Object.defineProperty(i,e,a),a};Object.defineProperty(e,"__esModule",{value:!0});const o=t("../../../bundles/lobby/src/common/BaseDialog"),a=t("../../../bundles/lobby/src/common/GlobalApp"),l=t("../../../bundles/lobby/src/common/ConfigClient"),{ccclass:r,property:h}=cc._decorator;let c=n=class extends o.default{constructor(){super(...arguments),this.ruleSprites=[],this.ruleContent=null,this.spriteIndex=0,this.isAnimating=!1}static getInstance(){return this.instance}actionNext(){this.ruleSprites.length<=0||this.isAnimating||(this.spriteIndex++,this.spriteIndex>=this.ruleSprites.length&&(this.spriteIndex=0),this.playPageTurnEffect(!0))}actionPrevious(){this.ruleSprites.length<=0||this.isAnimating||(this.spriteIndex--,this.spriteIndex<0&&(this.spriteIndex=this.ruleSprites.length-1),this.playPageTurnEffect(!1))}updateRuleDisplay(){this.ruleContent&&this.ruleSprites.length>0&&(this.ruleContent.spriteFrame=this.ruleSprites[this.spriteIndex])}playPageTurnEffect(t){if(!this.ruleContent||!this.ruleContent.node)return;this.isAnimating=!0;const i=this.ruleContent.node.scale,e=this.ruleContent.node.position,n=this.ruleContent.node.opacity;this.ruleContent.node.opacity=0,this.ruleContent.node.scale=.8*i,this.ruleContent.node.x=t?e.x+50:e.x-50,this.updateRuleDisplay(),cc.tween(this.ruleContent.node).to(.05,{opacity:100}).to(.25,{scale:i,x:e.x,opacity:n},{easing:"quartOut"}).call(()=>{this.isAnimating=!1}).start()}static show(t){null==this.instance||null==this.instance.node?a.default.getInstance().loadPrefabByBundle(l.default.Bundle.BUNDLE_NAME.INCA,"res/prefabs/IncaRuleDialog",(i,e)=>{if(null!=i)return void a.default.getInstance().alertDialog.showMessage(i);let s=cc.instantiate(e);s.parent=t,this.instance=s.getComponent(n),this.instance.node.zIndex=1e3,this.instance.show()}):(this.instance.node.zIndex=1e3,this.instance.show())}show(){super.show(),this.spriteIndex=0,this.updateRuleDisplay()}};c.instance=null,s([h([cc.SpriteFrame])],c.prototype,"ruleSprites",void 0),s([h(cc.Sprite)],c.prototype,"ruleContent",void 0),c=n=s([r],c),e.default=c,cc._RF.pop()},{"../../../bundles/lobby/src/common/BaseDialog":void 0,"../../../bundles/lobby/src/common/ConfigClient":void 0,"../../../bundles/lobby/src/common/GlobalApp":void 0}]},{},["IncaConstants","IncaController","IncaItem","IncaItemAnimation","IncaNetworkTransport","IncaPresenter","IncaRuleDialog"]);