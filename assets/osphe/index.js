window.__require=function e(t,i,c){function n(o,a){if(!i[o]){if(!t[o]){var l=o.split("/");if(l=l[l.length-1],!t[l]){var r="function"==typeof __require&&__require;if(!a&&r)return r(l,!0);if(s)return s(l,!0);throw new Error("Cannot find module '"+o+"'")}o=l}var h=i[o]={exports:{}};t[o][0].call(h.exports,function(e){return n(t[o][1][e]||e)},h,h.exports,e,t,i,c)}return i[o].exports}for(var s="function"==typeof __require&&__require,o=0;o<c.length;o++)n(c[o]);return n}({BoxBetShow:[function(e,t){"use strict";cc._RF.push(t,"ba9a9YqpgVMnZ1j4uBB90K5","BoxBetShow"),cc.Class({extends:cc.Component,properties:{spIcStatus:cc.Sprite,listSprite:[cc.SpriteFrame],lbChip:cc.Label,theFist:0},setInfo:function(e,t){switch(void 0===e&&(e=0),this.chip=parseInt(e),this.status=t,0==this.chip?(this.node.getComponent(cc.sprite).enabled=!1,this.lbChip.string=""):(this.node.getComponent(cc.sprite).enabled||(this.node.getComponent(cc.sprite).enabled=!0),this.lbChip.string),t){case"AllIn":this.spIcStatus.spriteFrame=this.listSprite[0];break;case"Raise":this.spIcStatus.spriteFrame=this.listSprite[1];break;case"Call":this.spIcStatus.spriteFrame=0==e?this.listSprite[3]:this.listSprite[2];break;case"check":this.node.getComponent(cc.sprite).enabled=!1,this.spIcStatus.spriteFrame=this.listSprite[3];break;case"Fold":this.node.getComponent(cc.sprite).enabled=!1,this.lbChip.string="",this.spIcStatus.spriteFrame=this.listSprite[4];break;default:this.spIcStatus.spriteFrame=null}},offSpriteAll:function(){this.node.getComponent(cc.sprite).enabled=!1,this.lbChip.string=""}}),cc._RF.pop()},{}],ChipReturnShow:[function(e,t){"use strict";cc._RF.push(t,"43615gE6n9Jt56u0on/UNf6","ChipReturnShow"),cc.Class({extends:cc.Component,properties:{listSprite:[cc.SpriteFrame],lbChip:cc.Label},setInfo:function(e,t,i,c,n){return this.node.getComponent(cc.Sprite).SpriteFrame=this.listSprite[n],this.node.setScale(.8,.8),this.lbChip.node.getParent().active=!0,this.lbChip.node.getParent().active=0,this.node.runAction(cc.sequence(cc.delayTime(.5))),this.node.runAction(cc.sequence(cc.delayTime(.5),cc.scaleTo(.3,1.4),cc.scaleTo(.3,1).easing(cc.easeCubicActionIn()),cc.delayTime(i),cc.scaleTo(1,.5).easing(cc.easeCubicActionOut()))),i+2}}),cc._RF.pop()},{}],OsPhe:[function(e,t){"use strict";cc._RF.push(t,"aaff8Pf0o9D8b4tOBSwxI3n","OsPhe");var i,c=s(e("../../lobby/src/common/User")),n=s(e("../../lobby/src/common/Utils"));function s(e){return e&&e.__esModule?e:{default:e}}cc.Class(((i={extends:cc.Component,properties:{animStart:sp.Skeleton,nodeBetPf:cc.Prefab,chipEffect:cc.Node,lbChangeCard:cc.Node,buttonCheckTogglePf:cc.Prefab,boxBetPf:cc.Prefab,listImgWinLose:[cc.SpriteFrame],potValue:0,preNextStack:0,indexTest:0,indexHostPlayer:0,isShowJoin:!1,preChipForCall:0,isTurn:2,countTurn:0,isCheckAddWinListCard:!1,pnameBm:"",isAllIn:!1,chipReturnPf:cc.Prefab,animWin:sp.SkeletonData,bgArrowSwap:cc.Sprite,myChipCur:0,myChipStack:0},onLoad:function(){this.nodeBet=null,this.nodeChangeTime=null,this.listBoxBet=[{},{},{},{},{}],this.buttonCheckToggle=null,this.boxBetPool=new cc.NodePool("BoxBetShow"),this.chipEffectPool=new cc.NodePool,this.nodeTimeToStart=null,this.playerCards=[[],[],[],[],[]],this.buttonCheckToggle=cc.instantiate(this.buttonCheckTogglePf).getComponent("ToggleCheckShow")},start:function(){this.buttonCheckToggle.node.active=!1},onClickSwapCard:function(){},onClickCancel:function(){},onClickEmoji:function(){},onBackClick:function(){cc.director.loadScene("Lobby")},dealCardPlayer:function(e,t,i,c){void 0===i&&(i=!0),void 0===c&&(c=0);var n,s=this.players[e],o=s._indexDynamic,a=this.listPosCard[o],l=!(a.x>0),r=this.getCard();if((r=setTextureWithCode(0)).node.setPosition(),r.node.scale=.45,r.node.rotation=0,this.playerCards[o].push(r.node),l?this.node.addChild(r.node,20):this.node.addChild(r.node),l?(n=cc.v2(a.x+r.node.getContentSize().width/2*.38*s.vectorCardP1.length,a.y),s.vectorCardP1.length>0&&(r.node.zIndex=s.vectorCardP1[s.vectorCardP1.length-1].node.zIndex+1)):(n=cc.v2(a.x-r.node.getContentSize().width/2*.38*s.vectorCardP1.length,a.y),s.vectorCardP1.length>0&&(r.node.zIndex=s.vectorCardP1[s.vectorCardP1.length-1].node.zIndex-1)),i){r.node.rotation=-90,r.node.skewY=15,r.node.scaleX=0;var h=cc.spawn(cc.moveTo(.7,n).easing(cc.easeCubicActionOut()),cc.rotateTo(.6,0).easing(cc.easeCubicActionOut()),cc.skewTo(.6,0,0).easing(cc.easeCubicActionOut()),cc.scaleTo(.6,.45).easing(cc.easeCubicActionOut()));r.node.runAction(cc.sequence(cc.delayTime(.1*o+t),h))}else r.setTextureWithCode(c),r.node.position=n;s.vectorCardP1.push(r)},viewIng:function(e,t){this.Pot.setValue(t.pot);for(var i=0;i<e.length;i++){var c=this.getPlayer(e[i].N),n=thisGetIndexOfPlayer(c),s=c._indexDynamic;if(c.is_ready)if("Fold"===e[i].playerStatus){for(var o=0;o<e[i].Arr.length;o++)this.dealCardPlayer(n,0,!1,0);this.foldPlayer(c),c._playerView.setDark(!0),this.instantiateBoxBet(s,0,"Fold")}else{for(var a=0;a<e[i].Arr.length;a++)this.dealCardPlayer(n,0,!1,e[i].Arr[a]);this.isTurn=this.isTurn<e[i].Arr.length?e[i].Arr.length:this.isTurn}}},instantiateBoxBet:function(e,t,i){var c=this.listBoxBet[e];null!=c.node&&void 0!==c.node||(c=this.boxBetPool.size()<1?cc.instantiate(this.boxBetPf).getComponent("BoxBetShow"):this.boxBetPool.get().getComponent("BoxBetShow"),this.listBoxBet[e]=c,c.node.position=cc.v2(this.listPosBoxBet[e].x,this.listPosBoxBet[e],y)),0==e&&"AllIn"==i&&(this.isAllIn=!0),c.setInfo(t,i)},setNextTurn:function(e){var t=e.nextName;if(void 0===t)return this.potValue=e.pot,void this.resetNewTurn();for(var i=this.getPlayer(t),c=(i._indexDynamic,0);c<this.player.length;c++)null!=this.players[c]._playerView&&this.players[c]._playerView.setTurn(!1,0);if(i._playerView.setTurn(!0,e.timeAction/1e3),i===this.thisPlayer){if(!this.buttonCheckToggle.readInfoToggle()){null==this.nodeBet&&(this.nodeBet=cc.instantiate(this.nodeBetPf).getComponent("ShowNodeBet")),this.nodeBet.node.active=!0,this.lbChangeCard.active=!1,this.bgArrowSwap.node.active=!1,this.nodeBet.autoBetIfClickRaise(e.timeAction/1e3),null!=this.buttonCheckToggle&&(this.buttonCheckToggle.node.active=!1);var n=this.listBoxBet[0].chip;null!=n&&void 0!==n||(n=0),1==this.countTurn?0!=e.chipForCall?(this.nodeBet.setInfoBtn("Fold","Call","Bet",e.chipForCall-n),this.nodeBet.setValueInfo(e.nextStack-e.chipForCall,this.agTable,e.pot)):(this.nodeBet.setInfoBtn("Fold","Check","Bet",e.chipForCall-n),this.nodeBet.setValueInfo(e.nextStack-e.chipForCall,this.agTable,e.pot)):0!=e.chipForCall?(this.nodeBet.setInfoBtn("Fold","Call","Raise",e.chipForCall-n),this.nodeBet.setValueInfo(e.nextStack-e.chipForCall,this.agTable,e.pot)):(this.nodeBet.setInfoBtn("Fold","Check","Raise",e.chipForCall-n),this.nodeBet.setValueInfo(e.nextStack-e.chipForCall,this.agTable,e.pot))}}else{if(null==this.nodeBet)return;this.nodeBet.setFalseIsCountDown(),this.nodeBet.node.active=!1}},setCurentTurn:function(e){var t=this;if(""!=e.status){if(""!==this.pnameBm){var i=this.getPlayer(this.pnameBm);this.instantiateBoxBet(i._indexDynamic,this.agTable/2,""),i._playerView.effectFlyMoney(-this.agTable/2),this.effectMoneyChange(-this.agTable/2,i.ag,i._playerView.lbAG),i.ag-=this.agTable/2,(i=this.thisPlayer)&&(c.default.accountChip-=this.agTable/2),this.pnameBm="",null==this.nodeBet&&(this.nodeBet=cc.instantiate(this.nodeBetPf).getComponent("ShowNodeBet"))}var n=e.userName,s=this.getPlayer(n),o=s._indexDynamic;s._playerView.setTurn(!1,0),this.instantiateBoxBet(o,e.chipBet,e.status),"Fold"==e.status&&this.foldPlayer(s,o);var a=this.listBoxBet[o].chip;e.chipStack-this.preNextStack!=0&&s._playerView.effectFlyMoney(-a);var l=0;a<=0||(l=a<=this.agTable?1:a<=2*this.agTable?2:a<=3*this.agTable?3:4);for(var r=this.listPosBoxBet[o],h=listPosView[o],d=function(){var e=cc.v2(r.x,r.y);t.chipEffectPool.size()<1&&t.chipEffectPool.put(cc.instantiate(t.chipEffect));var i=t.chipEffectPool.get();i.setPosition(h);var c=cc.fadeOut(.8).easing(cc.easeIn(6)),n=cc.moveTo(.5,e).easing(cc.easeOut(3)),s=cc.spawn(c,n);i.runAction(cc.sequence(cc.delayTime(.1*u),s,cc.callFunc(function(){t.chipEffectPool.put(i)})))},u=0;u<l;u++)d();s==this.thisPlayer&&(c.default.accountChip+=e.chipStack-this.preNextStack),this.effectMoneyChange(e.chipStack-this.preNextStack,this.preNextStack,s._playerView.lbAG),s.ag=e.chipStack}},getDynamicIndexPlayerWithName:function(e){return this.getPlayer(e)._indexDynamic},foldPlayer:function(){player.isFold=!0,player._playerView.setDark(!0);for(var e=0;e<player.vectorCardP1.length;e++)this.foldDown(index,vectorCardP1[e].node,.1*e)},foldDown:function(e,t,i){var c=this,n=0,s=0;e<=2?(n=-15,s=15):(n=15,s=-15),t.runAction(cc.sequence(cc.delayTime(i),cc.scaleTo(.5,0,.55).easing(cc.easeCubicActionOut()),cc.callFunc(function(){t.getComponent("card").setTextureWithCode(0),t.getComponent("card").setDark(!0,c.spriteFrameMask)}),cc.scaleTo(.15,.45).easing(cc.easeCubicActionOut()))),t.runAction(cc.sequence(cc.delayTime(i),cc.skewTo(.15,0,n).easing(cc.easeCubicActionOut()),cc.callFunc(function(){t.skewY=s}),cc.skewTo(.15,0,0).easing(cc.easeCubicActionOut())))},foldUp:function(e,t,i){var c=0,n=0;e<=2?(c=-15,n=15):(c=15,n=-15),t.runAction(cc.sequence(cc.scaleTo(.2,0,.65),cc.callFunc(function(){t.getComponent("card").setTextureWithCode(i)}),cc.scaleTo(.2,.45).easing(cc.easeCubicActionOut()))),t.runAction(cc.sequence(cc.skewTo(.2,0,c),cc.callFunc(function(){t.skewY=n}),cc.skewTo(.2,0,0).easing(cc.easeCubicActionOut())))},dealAtTheEndOfTheTurn:function(){for(var e=0;e<this.players.length;e++)!this.players[e].isFold&&this.players[e].is_ready&&this.players[e].vectorCardP1.length<5&&this.dealCardPlayer(e,0,!0,0)},instantiateResultText:function(e,t){var i=new cc.Node;i.addComponent(cc.Sprite).spriteFrame=this.listImgWinLose[t];var c=this.player[e],n=c.vectorCardP1.length,s=c._indexDynamic,o=this.listPosCard[s];i.position=s>2?cc.v2(o.x-(n-2)/2*37.25,o.y-25):cc.v2(o.x+(n-2)/2*37.25,o.y-25),i.runAction(cc.sequence(cc.delayTime(4),cc.removeSelf()))},instantiateEffWinLose:function(){var e=new cc.Node,t=e.addComponent(sp.Skeleton);t.skeletonData=this.animWin,t.premultipliedAlpha=!1,t.setAnimation(0,"win",!0),e.position=this.listPosView[indexDynamic],this.scheduleOnce(function(){e.destroy()},6)},resetViewGame:function(){for(var e=0;e<this.players.length;e++)this.player[e].isFold&&(this.player[e].isFold=!1,this.player[e]._playerView.setDark(!1));for(var t=0;t<listBoxBet.length;t++){var i=this.listBoxBet[t];null!=i&&void 0!==i&&this.boxBetPool.put(i.node)}this.buttonCheckToggle.resetTick(),this.listBoxBet=[{},{},{},{},{}]},scaleUpCard:function(){var e=card.getComponent("card").code,t=0,i=0;index<=2?(t=-15,i=15):(t=15,i=-15),card.runAction(cc.sequence(cc.delayTime(delay),cc.scaleTo(.15,0,.55).easing(cc.easeCubicActionOut()),cc.callFunc(function(){card.getComponent("card").setTextureWithCode(0)}),cc.scaleTo(.15,.55).easing(cc.easeCubicActionOut()),cc.scaleTo(.15,0,.55).easing(cc.easeCubicActionOut()),cc.callFunc(function(){card.getComponent("card").setTextureWithCode(e)}),cc.scaleTo(.15,.45).easing(cc.easeCubicActionOut()))),card.runAction(cc.sequence(cc.delayTime(delay),cc.skewTo(.15,0,t).easing(cc.easeCubicActionOut()),cc.callFunc(function(){card.skewY=i}),cc.skewTo(.15,0,0).easing(cc.easeCubicActionOut()),cc.skewTo(.15,0,t).easing(cc.easeCubicActionOut()),cc.callFunc(function(){card.skewY=i}),cc.skewTo(.15,0,0).easing(cc.easeCubicActionOut())));var c=card.position;card.runAction(cc.sequence(cc.delayTime(delay),cc.moveTo(.3,cc.v2(c.x,c.y+30).easing(cc.easeCubicActionOut(0)))))},reCallCard:function(){for(var e=0,t=0,i=0;i<5;i++)for(var c=this.playerCards[i].length,n=0;n<c;n++){var s=this.playerCards[i].pop();this.moveCardsFinish(s,e,t),t++,e+=100}for(var o=0;o<this.players.length;o++)this.players[o].vectorCardP1=[]},getDynamicIndex:function(e){if(0==e)return 0;var t=e;return this.players.length<=3&&(t+=1),t},resetNewTurn:function(){var e=this;this.isTurn++,this.countTurn=0,this.buttonCheckToggle.node.active=!1,this.isTurn<6&&this.checkNextTurnFail()>1&&this.dealAtTheEndOfTheTurn();for(var t=0;t<this.players.length;t++){var i=this.players[t]._indexDynamic;if(null!=this.listBoxBet[i].node&&void 0!==this.listBoxBet[i]&&this.listBoxBet[i].chip>0)for(var c=function(){e.chipEffectPool.size()<1&&e.chipEffectPool.put(cc.instantiate(e.chipEffect));var t=e.chipEffectPool.get();t.position=cc.v2(e.listPosBoxBet[i].x,e.listPosBoxBet[i].y);var c=cc.moveTo(.8,e.Pot.node.position.add(cc.v2(0+e.generateRandomNumber(-7,7),-40+e.generateRandomNumber(-7,7)))).easing(cc.easeBackIn(2.5)),s=cc.moveTo(.5,e.Pot.node.position).easing(cc.easeElasticIn(1)),o=cc.sequence(cc.delayTime(.02*n),c,cc.delayTime(.6),s);t.runAction(cc.sequence(o,cc.callFunc(function(){e.chipEffectPool.put(t)})))},n=0;n<4;n++)c()}this.Pot.setValue(this.potValue,2);for(var s=0;s<this.listBoxBet.length;s++)null!=this.listBoxBet[s].node&&void 0!==this.listBoxBet[s].node&&("AllIn"==this.listBoxBet[s].status&&this.listBoxBet[s].offSpriteAll(),"AllIn"!=this.listBoxBet[s].status&&"Fold"!=this.listBoxBet[s].status?(this.boxBetPool.put(this.listBoxBet[s].node),this.listBoxBet[s]={}):this.listBoxBet[s].chip=0)},swapElementsInArray:function(e,t,i){var c=i[e];i[e]=i[t],i[t]=c},checkNextTurnFail:function(){for(var e=0,t=0;t<this.players.length;t++)!this.players[t].isFold&&this.players[t].is_ready&&e++;return e},EffectMoneyChange:function(e,t,i,c,s,o){void 0===c&&(c=!1),void 0===s&&(s=1),void 0===o&&(o=1),i.node.runAction(cc.sequence(cc.scaleTo(.2,1.2),cc.callFunc(function(){var c=t;c+=e,i.string=n.default.formatNumber(c)}),cc.scaleTo(.2,1)))},setIndexHost:function(){for(var e=0;e<this.players.length;e++)this.players[e].is_host&&(cc.log("host moi la"+this.players[e].pname),this.indexHostPlayer=e,this.hostPlayer=this.players[e])}}).onClickSwapCard=function(){this.swapElementsInArray(0,3,this.thisPlayer.vectorCardP1),this.lbChangeCard.active=!1,this.bgArrowSwap.node.active=!1,this.thisPlayer.vectorCardP1[3].setDark(!1,this.spriteFrameMask);var e=this.thisPlayer.vectorCardP1[3].node.position,t=this.thisPlayer.vectorCardP1[3].node.zIndex;this.thisPlayer.vectorCardP1[3].node.position=this.thisPlayer.vectorCardP1[0].node.position,this.thisPlayer.vectorCardP1[3].node.zIndex=this.thisPlayer.vectorCardP1[0].node.zIndex,this.thisPlayer.vectorCardP1[0].node.position=e,this.thisPlayer.vectorCardP1[0].node.zIndex=t;var i=this.playercards[0][0];this.playercards[0][0]=this.playercards[0][3],this.playercards[0][3]=i},i.onClickCancel=function(){this.thisPlayer.vectorCardP1[3].setDark(!1,this.spriteFrameMask),this.lbChangeCard.active=!1,this.bg_arrow_swap.node.active=!1},i)),cc._RF.pop()},{"../../lobby/src/common/User":void 0,"../../lobby/src/common/Utils":void 0}],ShowNodeBet:[function(e,t){"use strict";cc._RF.push(t,"9b38bzgyPpDJ5AMw3OVG6zv","ShowNodeBet");var i=cc.Class({extends:cc.Component,properties:{btnFold:cc.Node,txtButtonFold:cc.Label,btnRaise:cc.Node,txtButtonRaise:cc.Label,btnCall:cc.Node,txtButtonCall:cc.Label,handleSlider:cc.Slider,txtBet:cc.Label,scrollBar:cc.Sprite,btnAllInCall:cc.Node,valueBet:0,valueTableAg:500,valueThisPlayer:500,valuePot:0,timeCountDown:0,isClickRaise:!1,isCountDown:!1},onLoad:function(){this.handleSlider.node.on("slide",this.CallBackSlider,this)},update_slider:function(e){this.valueThisPlayer=e},CallBackSlider:function(){this.handleSlider.progress},setValueInfo:function(e,t,i){this.valueThisPlayer=e,this.valueTableAg=t,this.valuePot=i,this.valueBet=t,this.txtBet.string,e<=0?(this.btnAllInCall.active=!0,this.btnRaise=!1,this.btnCall=!1):(this.btnRaise.active=!0,this.btnCall.active=!0,this.btnAllInCall.active=!1)},setInfoBtn:function(){},onClickRaise:function(){this.btnRaise.active=!1,this.isClickRaise=!0,this.handleSlider.node.getParent().active=!0,this.resetSlider()},onClickComfirm:function(){this.btnRaise.active=!0,this.node.active=!1},onClickFold:function(){this.node.active=!1},onClickCall:function(){this.node.active=!1},on1per2Click:function(){var e=parseInt(this.valuePot/2);e<this.valueTableAg&&(e=this.valueTableAg),this.btnRaise.active=!0,this.valueThisPlayer,this.node.active=!1},on1per4Click:function(){var e=parseInt(this.valuePot/4);e<this.valueTableAg&&(e=this.valueTableAg),this.btnRaise.active=!0,this.valueThisPlayer,this.node.active=!1},on1per8Click:function(){var e=parseInt(this.valuePot/8);e<this.valueTableAg&&(e=this.valueTableAg),this.btnRaise.active=!0,this.valueThisPlayer,this.node.active=!1},offSlider:function(){this.btnRaise.active=!0,this.isClickRaise=!1,this.handleSlider.node.getParent().active=!1},onClickBtnAllIn:function(){this.btnRaise.active=!0,this.node.active=!1},resetSlider:function(){this.handleSlider.progress=this.valueTableAg/this.valueThisPlayer/.7>=1?1:this.valueTableAg/this.valueThisPlayer/.7},onClickBtnAllInForCall:function(){this.node.active=!1},autoBetIfClickRaise:function(e){this.timeCountDown=e,this.isCountDown=!0},setFalseIsCountDown:function(){this.timeCountDown=0,this.isCountDown=!1,this.isClickRaise=!1}});t.exports=i,cc._RF.pop()},{}],ToggleCheckShow:[function(e,t){"use strict";cc._RF.push(t,"df8e4TZd8tAR73AwhXeVNnR","ToggleCheckShow"),cc.Class({extends:cc.Component,properties:{listToggle:[cc.Toggle],txtToggleFold:cc.Label,txtToggleCall:cc.Label,txtToggleCallAny:cc.Label},start:function(){}}),cc._RF.pop()},{}]},{},["BoxBetShow","ChipReturnShow","OsPhe","ShowNodeBet","ToggleCheckShow"]);